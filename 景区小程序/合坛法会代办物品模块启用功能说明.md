# 合坛法会代办物品模块启用功能说明

## 功能概述

合坛法会代办物品模块现在支持全局启用/禁用控制。管理员可以在后台设置是否启用代办物品功能，当禁用时，前台用户将无法看到代办物品选择模块。

## 功能特性

### 后台管理功能
1. **模块开关**：可以启用/禁用整个代办物品模块
2. **条件显示**：只有在模块启用时才显示物品管理界面
3. **状态提示**：模块禁用时显示友好的提示信息
4. **实时控制**：开关状态实时生效，无需重启

### 前台功能
1. **条件显示**：只有在后台启用时才显示代办物品模块
2. **数据验证**：模块禁用时不会加载任何物品数据
3. **用户体验**：模块禁用时用户界面更加简洁

## 技术实现

### 数据库设计
- `joint_goods_config` 集合：存储代办物品模块配置
  - `enabled`：是否启用模块（boolean）
  - `create_time`：创建时间
  - `update_time`：更新时间

### 云函数
1. **getJointGoodsConfig**：获取代办物品模块配置
2. **updateJointGoodsConfig**：更新代办物品模块配置

### 前端页面
1. **后台管理页面**：`pages/admin/joint/goods.vue`
2. **代办物品总览页面**：`pages/admin/joint/goods-overview.vue`
3. **前台表单页面**：`pages/fahui/joint/form.vue`

## 使用流程

### 管理员配置
1. 进入后台管理 → 合坛法会管理 → 代办物品管理 或 代办物品总览
2. 在页面顶部找到"代办物品模块"开关
3. 开启开关启用模块，关闭开关禁用模块
4. 开关状态会立即生效

### 用户使用
1. 进入合坛法会报名页面
2. 如果后台启用了代办物品模块，会显示代办物品选择区域
3. 如果后台禁用了代办物品模块，不会显示任何代办物品相关内容

## 配置说明

### 代办物品模块配置字段
- `enabled`：是否启用代办物品模块（boolean）
  - `true`：启用模块，前台显示代办物品选择
  - `false`：禁用模块，前台不显示代办物品相关内容

### 显示逻辑
1. **模块禁用时**：前台完全不显示代办物品相关内容
2. **模块启用时**：前台显示代办物品选择，但具体显示哪些物品取决于各项目的配置

## 注意事项

1. **云函数部署**：确保 `getJointGoodsConfig` 和 `updateJointGoodsConfig` 云函数已正确部署
2. **数据库权限**：确保云函数有相应的数据库操作权限
3. **配置缓存**：前台会实时检查模块配置，无需手动刷新
4. **数据一致性**：模块禁用时，已存在的物品数据不会丢失，只是前台不显示

## 扩展功能

未来可以考虑添加的功能：
1. 按项目分别控制代办物品模块
2. 代办物品模块的权限控制
3. 代办物品使用统计
4. 代办物品模板管理

## 相关文件

- 后台管理页面：`pages/admin/joint/goods.vue`
- 代办物品总览页面：`pages/admin/joint/goods-overview.vue`
- 前台表单页面：`pages/fahui/joint/form.vue`
- 云函数：`uniCloud-aliyun/cloudfunctions/getJointGoodsConfig/`
- 云函数：`uniCloud-aliyun/cloudfunctions/updateJointGoodsConfig/` 