{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/qub/Documents/HBuilderProjects/123/æ™¯åŒºå°ç¨‹åº/pages/fahui/joint/form.vue?0d02","webpack:///C:/Users/qub/Documents/HBuilderProjects/123/æ™¯åŒºå°ç¨‹åº/pages/fahui/joint/form.vue?9192","webpack:///C:/Users/qub/Documents/HBuilderProjects/123/æ™¯åŒºå°ç¨‹åº/pages/fahui/joint/form.vue?9b67","webpack:///C:/Users/qub/Documents/HBuilderProjects/123/æ™¯åŒºå°ç¨‹åº/pages/fahui/joint/form.vue?9ee1","uni-app:///pages/fahui/joint/form.vue","webpack:///C:/Users/qub/Documents/HBuilderProjects/123/æ™¯åŒºå°ç¨‹åº/pages/fahui/joint/form.vue?e2b3","webpack:///C:/Users/qub/Documents/HBuilderProjects/123/æ™¯åŒºå°ç¨‹åº/pages/fahui/joint/form.vue?e2bb"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","uniPopup","data","isLoading","isSubmitting","projectId","applicants","editApplicant","editIndex","jointProjects","jointProjectIdx","currentProject","selectedDateIdx","selectedDate","spouse","name","gender","lunarBirthday","birthTime","editSpouse","chaoduType","chaoduTypes","deceasedList","editDeceased","editDeceasedIndex","items","showItems","receiver","phone","address","showReceiver","receiverConfig","genderOptions","birthTimeOptions","deceasedRelationOptions","computed","hasSelectedItems","projectNames","genderIndex","birthTimeIndex","chaoduTypeIndex","spouseGenderIndex","spouseBirthTimeIndex","deceasedRelationIndex","hasProjectDates","showSpouseInfo","isYinyuanProject","isChaoduProject","onLoad","console","onShow","methods","loadData","index","uni","title","icon","loadJointProjects","jointManagement","result","_id","price","description","category","deadline","dates","maxApplicants","loadItemsConfig","moduleResult","moduleEnabled","item","count","loadReceiverConfig","oldShowReceiver","getReceiverConfig","checkModuleConfig","checkResult","projectInfo","projectItems","itemsResult","message","content","showCancel","checkReceiverConfig","receiverResult","addApplicant","removeApplicant","openApplicantDialog","saveApplicant","setTimeout","duration","closePopup","onGenderChange","onLunarBirthdayChange","onBirthTimeChange","onProjectChange","onDateChange","onChaoduTypeChange","addDeceased","deathDate","relation","removeDeceased","openDeceasedDialog","saveDeceased","closeDeceasedPopup","onDeceasedLunarBirthdayChange","onDeceasedDeathDateChange","onDeceasedRelationChange","openSpouseDialog","saveSpouse","closeSpousePopup","onSpouseGenderChange","onSpouseLunarBirthdayChange","onSpouseBirthTimeChange","validateName","validatePhone","checkAndClearOldData","success","saveDraft","loadDraft","validateForm","i","applicant","missingFields","confirmText","deceased","nextStep","activityFee","goodsFee","selectedItems","orderData","type","projectName","projectPrice","totalFee","applicantCount","createTime","jointDataManager","url","fail","debugData","debugApplicants","cancelText","forceRefreshData","quickFix"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACqC;;;AAGxF;AACoL;AACpL,gBAAgB,qLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5EA;AAAA;AAAA;AAAA;AAAsrB,CAAgB,spBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACgT1sB;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAEA;AACA;AAAA,eAEA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MAEA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;MACAC;MAEA;MACAC;QACAZ;QACAa;QACAC;MACA;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACAC;MACA;QAAA;MAAA;IACA;IACAC;MACA;QAAA;MAAA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EAEAC;IACAC;IACAA;IACAA;IACAA;IAEA;MACA;MACAA;IACA;IAEAA;IACA;IACAA;EACA;EAEAC;IACAD;IACAA;IACAA;IAEAA;IACA;IACAA;IAEAA;IACA;IACAA;IAEAA;EACA;EAEAE;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAH;gBAAA;gBAEA;gBACAA;;gBAEA;gBACAA;gBAAA;gBAAA,OACA;cAAA;gBACAA;;gBAEA;gBACAA;gBAAA;gBAAA,OACA;cAAA;gBACAA;;gBAEA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBACAA;gBACAI;kBAAA;gBAAA;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBACAJ;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAEAA;cAAA;gBAIA;gBACAA;gBACA;kBACAA;kBACA;kBACAA;gBACA;kBACAA;kBACAA;gBACA;gBAEAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBAEA;gBACAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;gBACAK;kBACAC;kBACAC;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEAC;cAAA;gBAAAC;gBAEA;kBACA;gBACA;kBACA;kBACA,wBACA;oBACAC;oBACA7C;oBACA8C;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;kBACA,GACA;oBACAN;oBACA7C;oBACA8C;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;kBACA,GACA;oBACAN;oBACA7C;oBACA8C;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;kBACA,EACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAjB;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IAEAkB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA9D;kBAAA;kBAAA;gBAAA;gBACA4C;gBACA;gBACA;gBAAA;cAAA;gBAAA;gBAKAA;;gBAEA;gBAAA;gBAAA,OACAS;cAAA;gBAAAU;gBAEAnB;gBAEAoB;gBACA;kBACAA;kBACApB;gBACA;kBACAA;gBACA;;gBAEA;gBAAA,IACAoB;kBAAA;kBAAA;gBAAA;gBACApB;gBACA;gBACA;gBAAA;cAAA;gBAIAA;;gBAEA;gBAAA;gBAAA,OACAS;kBAAArD;gBAAA;cAAA;gBAAAsD;gBAEAV;gBAEA;kBACAA;kBACA;kBACA;oBAAA,uCACAqB;sBACAC;oBAAA;kBAAA,CACA;gBACA;kBACAtB;kBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAuB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAvB;gBACAA;gBAAA;gBAAA,OAEAS;cAAA;gBAAAC;gBAEAV;gBACAA;gBAEA;kBACA;kBACAwB;kBACA;kBACAxB;kBACAA;kBACAA;kBACAA;gBACA;kBACAwB;kBACA;kBACA;kBACAxB;kBACAA;kBACAA;gBACA;gBAEAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;gBACAA;gBACAwB;gBACA;gBACA;gBACAxB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAyB;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAzB;gBAAA;gBAAA,OACAS;cAAA;gBAAAC;gBAEAV;gBAAA,MAEAU;kBAAA;kBAAA;gBAAA;gBACAV;gBAAA,kCACAU;cAAA;gBAEAV;gBAAA,kCACA;cAAA;gBAAA;gBAAA;gBAEAA;gBAAA,kCACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA0B;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA1B;;gBAEA;gBAAA;gBAAA,OACAS;cAAA;gBAAAU;gBACAnB;;gBAEA;gBAAA;gBAAA,OACAS;cAAA;gBAAAkB;gBACA3B;;gBAEA;gBACA4B;gBACA;kBACAA;gBACA;;gBAEA;gBACAC;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA;gBAAA,OAEApB;kBAAArD;gBAAA;cAAA;gBAAA0E;gBACA;kBACAD;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;cAAA;gBAIA;gBACAE;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBAEA1B;kBACAC;kBACA0B;kBACAC;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAjC;gBACAK;kBACAC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA2B;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAlC;;gBAEA;gBAAA;gBAAA,OACAS;cAAA;gBAAA0B;gBACAnC;;gBAEA;gBAAA;gBAAA,OACAS;cAAA;gBAAAkB;gBACA3B;;gBAEA;gBACA+B;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBAEA1B;kBACAC;kBACA0B;kBACAC;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAjC;gBACAK;kBACAC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACA6B;MACApC;MACAA;MAEA;QACAA;QACAK;UACAC;UACAC;QACA;QACA;MACA;MAEA;QACAzC;QACAC;QACAY;QACAX;QACAC;QACAW;MACA;MAEAoB;MACA;MACAA;MAEA;MACAA;IACA;IAEAqC;MACA;MACA;IACA;IAEAC;MACAtC;MACAA;MAEA;MACA;MAEAA;MACAA;MAEA;IACA;IAEAuC;MAAA;MACAvC;MACAA;MACAA;MAEA;QACAK;UACAC;UACAC;QACA;QACA;MACA;MAEA;QACAF;UACAC;UACAC;QACA;QACA;MACA;MAEA;QACAF;UACAC;UACAC;QACA;QACA;MACA;MAEA;QACAF;UACAC;UACAC;QACA;QACA;MACA;MAEA;QACAF;UACAC;UACAC;QACA;QACA;MACA;MAEA;QACAF;UACAC;UACAC;QACA;QACA;MACA;;MAEA;MACAP;;MAEA;MACA;;MAEA;MACA;QACA;MACA;QACA;QACA;MACA;;MAEA;MACAA;MACAA;MACAA;;MAEA;MACA;MAEA;MACA;;MAEA;MACAwC;QACAxC;QACAA;;QAEA;QACAK;UACAC;UACAC;UACAkC;QACA;MACA;MAEAzC;IACA;IAEA0C;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;gBACA9C;gBACAA;gBACAA;gBAEA;gBACA;gBACA;gBACA;;gBAEA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAEAA;gBACA;gBACA;cAAA;gBAGA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA+C;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;IACA;IAEA;IACAC;MACA;QACA5C;UACAC;UACAC;QACA;QACA;MACA;MAEA;QACAzC;QACAE;QACAkF;QACAC;MACA;MACA;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;IACA;IAEAC;MACA;QACAjD;UACAC;UACAC;QACA;QACA;MACA;MAEA;QACAF;UACAC;UACAC;QACA;QACA;MACA;MAEA;MACA;MACA;IACA;IAEAgD;MACA;MACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;IAEA;IACAC;MACA;QACA5D;UACAC;UACAC;QACA;MACA;IACA;IAEA2D;MACA;QACA7D;UACAC;UACAC;QACA;MACA;IACA;IAEA;IACA4D;MACA;QACA;QACA;QACA;UACA;UACA;UACA;;UAEA;UACA;YACAnE;YACA;UACA;UAEAA;UACAK;YACAC;YACA0B;YACAoC;cACA;gBACA;gBACA/D;gBACAA;gBACAA;gBACAL;gBACAK;kBACAC;kBACAC;gBACA;cACA;YACA;UACA;QACA;MACA;QACAP;MACA;IACA;IAEA;IACAqE;MACArE;MACAA;MAEA;QACA3C;QACAI;QACAE;QACAC;QACAC;QACAM;QACAE;QACAG;QACAE;MACA;MAEAsB;MAEA;QACAK;QACAL;;QAEA;QACA;QACAA;QACAA;MACA;QACAA;MACA;IACA;IAEAsE;MACA;QACAtE;QACA;QAEA;QACAA;QAEA;UACAA;UAEA;UACA;UACA;UACA;UACA;YAAAlC;YAAAC;YAAAC;YAAAC;UAAA;UACA;UACA;UACA;UACA;YAAAH;YAAAa;YAAAC;UAAA;UAEA;YACA;UACA;UAEAoB;UACAA;UACAA;UACAA;QACA;UACAA;QACA;MACA;QACAA;MACA;IACA;IAEA;IACAuE;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAvE;gBACAA;gBACAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBACAA;gBACAK;kBACAC;kBACAC;gBACA;gBAAA,kCACA;cAAA;gBAGAiE;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBACAC;gBACAzE;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBAAA,MAEA,4DACA;kBAAA;kBAAA;gBAAA;gBACAA;;gBAEA;gBACA0E;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBAEArE;kBACAC;kBACA0B;kBACAC;kBACA0C;gBACA;gBAAA,kCACA;cAAA;gBA9BAH;gBAAA;gBAAA;cAAA;gBAAA,IAkCA;kBAAA;kBAAA;gBAAA;gBACAnE;kBACAC;kBACAC;gBACA;gBAAA,kCACA;cAAA;gBAAA,MAGA;kBAAA;kBAAA;gBAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACAF;kBACAC;kBACAC;gBACA;gBAAA,kCACA;cAAA;gBAAA,MAGA;kBAAA;kBAAA;gBAAA;gBACAF;kBACAC;kBACAC;gBACA;gBAAA,kCACA;cAAA;gBAGAiE;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBACAI;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACAvE;kBACAC;kBACAC;gBACA;gBAAA,kCACA;cAAA;gBAPAiE;gBAAA;gBAAA;cAAA;gBAYA;gBACAxE;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBACAA;gBAAA;gBAAA,OACA;cAAA;gBAAAlB;gBACAkB;gBAAA,KAEAlB;kBAAA;kBAAA;gBAAA;gBACAkB;gBAAA,MACAlB;kBAAA;kBAAA;gBAAA;gBACAkB;gBACAK;kBACAC;kBACAC;gBACA;gBAAA,kCACA;cAAA;gBAGAP;gBAAA,MACAlB;kBAAA;kBAAA;gBAAA;gBACAkB;gBACAK;kBACAC;kBACAC;gBACA;gBAAA,kCACA;cAAA;gBAGAP;gBAAA,MACAlB;kBAAA;kBAAA;gBAAA;gBACAkB;gBACAK;kBACAC;kBACAC;gBACA;gBAAA,kCACA;cAAA;gBAGAP;gBAAA;gBAAA;cAAA;gBAEAA;cAAA;gBAAA;gBAAA;cAAA;gBAGAA;cAAA;gBAAA,kCAGA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACA6E;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA7E;gBACAA;gBACAA;gBACAA;gBACAA;gBAAA;gBAAA,OAEA;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAIA;gBAEA;kBACA;kBACA8E;kBACAC;kBACAC,oBAEA;kBACA;oBACA;oBACAF;kBACA;oBACA;oBACAA;kBACA;kBAEA;oBACA;sBACA;wBACAC;wBACAC;0BACAlH;0BACA8C;0BACAU;wBACA;sBACA;oBACA;kBACA;;kBAEA;kBACA2D;oBACAC;oBACA9H;oBACA+H;oBACAC;oBACAxH;oBACAO;oBACAd;oBACAQ;oBACAQ;oBACA2G;oBACAtG;oBACAoG;oBACAC;oBACAM;oBACAC;oBACAC;kBACA;;kBAEAvF;;kBAEA;kBACAA;;kBAEA;kBACAwF;;kBAEA;kBACAA;;kBAEA;kBACAnF;oBACAoF;oBACArB;sBACApE;oBACA;oBACA0F;sBACA1F;sBACAK;wBACAC;wBACAC;sBACA;oBACA;kBACA;gBAEA;kBACAP;kBACAK;oBACAC;oBACAC;kBACA;gBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAoF;MACA3F;MACAA;MACAA;MACAA;MACAA;MAEA;MACAA;;MAEA;MACA;MACAA;IACA;IAEA;IACA4F;MAAA;MACA5F;MACAA;MACAA;MAEA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;MACA;;MAEA;MACA;QACA;QACAA;QACAA;MACA;QACAA;MACA;;MAEA;MACA;MACA+B;MAEA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;MACA;MAEA1B;QACAC;QACA0B;QACAC;QACA4D;QACAlB;QACAP;UACA;YACA;UACA;QACA;MACA;IACA;IAEA;IACA0B;MAAA;MACA9F;;MAEA;MACA;;MAEA;MACA;;MAEA;MACAwC;QACAxC;QAEAK;UACAC;UACAC;UACAkC;QACA;MACA;IACA;IAEA;IACAsD;MACA/F;;MAEA;MACA;QACAA;QACA;UACAlC;UACAC;UACAY;UACAX;UACAC;UACAW;QACA;MACA;QACAoB;QACA;QACA;UAAA;YACAlC;YACAC;YACAY;YACAX;YACAC;YACAW;UACA;QAAA;MACA;;MAEA;MACA;;MAEA;MACA;MAEAoB;MAEAK;QACAC;QACA0B;QACAC;QACA0C;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACrhDA;AAAA;AAAA;AAAA;AAAmgC,CAAgB,m7BAAG,EAAC,C;;;;;;;;;;;ACAvhC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/fahui/joint/form.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/fahui/joint/form.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./form.vue?vue&type=template&id=4bb6e490&scoped=true&\"\nvar renderjs\nimport script from \"./form.vue?vue&type=script&lang=js&\"\nexport * from \"./form.vue?vue&type=script&lang=js&\"\nimport style0 from \"./form.vue?vue&type=style&index=0&id=4bb6e490&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4bb6e490\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/fahui/joint/form.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form.vue?vue&type=template&id=4bb6e490&scoped=true&\"","var components\ntry {\n  components = {\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. æ’æŸ¥ç»„ä»¶åç§°æ‹¼å†™æ˜¯å¦æ­£ç¡®\")\n    console.error(\n      \"2. æ’æŸ¥ç»„ä»¶æ˜¯å¦ç¬¦åˆ easycom è§„èŒƒï¼Œæ–‡æ¡£ï¼šhttps://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. è‹¥ç»„ä»¶ä¸ç¬¦åˆ easycom è§„èŒƒï¼Œéœ€æ‰‹åŠ¨å¼•å…¥ï¼Œå¹¶åœ¨ components ä¸­æ³¨å†Œè¯¥ç»„ä»¶\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = !_vm.isLoading ? _vm.applicants.length : null\n  var l0 = !_vm.isLoading\n    ? _vm.__map(_vm.applicants, function (applicant, idx) {\n        var $orig = _vm.__get_orig(applicant)\n        var g1 = _vm.applicants.length\n        return {\n          $orig: $orig,\n          g1: g1,\n        }\n      })\n    : null\n  var g2 = !_vm.isLoading ? _vm.applicants.length : null\n  var l1 =\n    !_vm.isLoading && _vm.isChaoduProject\n      ? _vm.__map(_vm.deceasedList, function (deceased, idx) {\n          var $orig = _vm.__get_orig(deceased)\n          var g3 = _vm.deceasedList.length\n          return {\n            $orig: $orig,\n            g3: g3,\n          }\n        })\n      : null\n  var g4 =\n    !_vm.isLoading && _vm.isChaoduProject ? _vm.deceasedList.length : null\n  var g5 = !_vm.isLoading && true ? _vm.applicants.length : null\n  var g6 = !_vm.isLoading && true ? _vm.deceasedList.length : null\n  var g7 = !_vm.isLoading && true ? _vm.items.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        g2: g2,\n        l1: l1,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n        g7: g7,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"form-bg\">\r\n    <!-- åŠ è½½çŠ¶æ€ -->\r\n    <view v-if=\"isLoading\" class=\"loading-container\">\r\n      <view class=\"loading-spinner\"></view>\r\n      <text class=\"loading-text\">åŠ è½½ä¸­...</text>\r\n    </view>\r\n    \r\n    <view v-else class=\"form-container\">\r\n      <view class=\"form-title\">åˆå›æ³•ä¼šæŠ¥å</view>\r\n      <view class=\"form-help\">\r\n        <text>ğŸ“ è¯·ä»”ç»†å¡«å†™æ‰€æœ‰å¿…å¡«ä¿¡æ¯ï¼Œç¡®ä¿ä¿¡æ¯å‡†ç¡®å®Œæ•´</text>\r\n        <text>ğŸ‘¥ å¯æ·»åŠ æœ€å¤š5ä½æŠ¥åäººï¼Œæ¯äººä¿¡æ¯éœ€å®Œæ•´</text>\r\n        <text>ğŸ’ ä¸åŒæ³•ä¼šç±»å‹æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œè¯·æŒ‰æç¤ºå¡«å†™</text>\r\n        <text>ğŸ’¾ æ•°æ®ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œå¯éšæ—¶è¿”å›ç»§ç»­å¡«å†™</text>\r\n      </view>\r\n\r\n      <!-- æŠ¥åäººä¿¡æ¯ç®¡ç† -->\r\n      <view class=\"section-title\">æŠ¥åäººä¿¡æ¯ <text class=\"section-tip\">ï¼ˆæœ€å¤š5äººï¼Œæ¯äººä¿¡æ¯éœ€å®Œæ•´ï¼‰</text></view>\r\n      <view class=\"section-tip-full\">ç‚¹å‡»\"ç¼–è¾‘\"æŒ‰é’®å¯ä¿®æ”¹æŠ¥åäººä¿¡æ¯</view>\r\n      \r\n      <!-- è°ƒè¯•ä¿¡æ¯æ˜¾ç¤º -->\r\n      <view class=\"debug-info\">\r\n        <text class=\"debug-text\">è°ƒè¯•ä¿¡æ¯ï¼šæŠ¥åäººæ•°é‡ {{ applicants.length }}</text>\r\n        <text class=\"debug-text\">å½“å‰é¡¹ç›®ï¼š{{ currentProject ? currentProject.name : 'æœªé€‰æ‹©' }}</text>\r\n      </view>\r\n      <view class=\"applicant-list\">\r\n        <view v-for=\"(applicant, idx) in applicants\" :key=\"idx\" class=\"applicant-card\">\r\n          <view class=\"applicant-header\">\r\n            <text class=\"applicant-name\">{{ applicant.name || 'æœªå¡«å†™' }}</text>\r\n            <view class=\"applicant-actions\">\r\n              <button class=\"mini-btn\" size=\"mini\" @click=\"openApplicantDialog(idx)\">ç¼–è¾‘</button>\r\n              <button v-if=\"applicants.length > 1\" class=\"mini-btn danger\" size=\"mini\" @click=\"removeApplicant(idx)\">åˆ é™¤</button>\r\n            </view>\r\n          </view>\r\n          <!-- è°ƒè¯•ä¿¡æ¯ -->\r\n          <view class=\"debug-applicant\">\r\n            <text class=\"debug-applicant-text\">è°ƒè¯•ï¼šå§“å=\"{{ applicant.name }}\" æ€§åˆ«=\"{{ applicant.gender }}\" ç”µè¯=\"{{ applicant.phone }}\"</text>\r\n          </view>\r\n          <view class=\"applicant-info-row\">\r\n            <text>æ€§åˆ«ï¼š</text><text class=\"info-value\">{{ applicant.gender || 'æœªé€‰' }}</text>\r\n            <text>ç”µè¯ï¼š</text><text class=\"info-value\">{{ applicant.phone || 'æœªå¡«' }}</text>\r\n          </view>\r\n          <view class=\"applicant-info-row\">\r\n            <text>å†œå†ç”Ÿæ—¥ï¼š</text><text class=\"info-value\">{{ applicant.lunarBirthday || 'æœªé€‰' }}</text>\r\n            <text>å‡ºç”Ÿæ—¶è¾°ï¼š</text><text class=\"info-value\">{{ applicant.birthTime || 'æœªé€‰' }}</text>\r\n          </view>\r\n          <view class=\"applicant-info-row\">\r\n            <text>å¸¸ä½åœ°å€ï¼š</text><text class=\"info-value\">{{ applicant.address || 'æœªå¡«' }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <button class=\"add-btn\" @click=\"addApplicant\" :disabled=\"applicants.length>=5\" size=\"mini\">+ æ·»åŠ æŠ¥åäºº</button>\r\n      \r\n      <!-- è°ƒè¯•æŒ‰é’® -->\r\n      <button class=\"debug-btn\" @click=\"debugApplicants\" size=\"mini\">è°ƒè¯•æŠ¥åäººæ•°æ®</button>\r\n      <button class=\"fix-btn\" @click=\"quickFix\" size=\"mini\">å¿«é€Ÿä¿®å¤æ•°æ®</button>\r\n\r\n      <!-- æŠ¥åäººå¼¹çª— -->\r\n      <uni-popup ref=\"popup\" type=\"center\">\r\n        <view class=\"popup-content\">\r\n          <view class=\"popup-title\">æŠ¥åè€…ä¿¡æ¯</view>\r\n          <view class=\"popup-tip\">å¸¦ * çš„å­—æ®µä¸ºå¿…å¡«é¡¹</view>\r\n          <input v-model=\"editApplicant.name\" placeholder=\"* å§“åï¼ˆå¿…å¡«ï¼‰\" class=\"input\" maxlength=\"20\" @blur=\"validateName\" @input=\"saveDraft\" />\r\n          <picker :range=\"genderOptions\" @change=\"onGenderChange\" :value=\"genderIndex\">\r\n            <view class=\"picker\">\r\n              <text class=\"picker-label\">* æ€§åˆ«ï¼š</text>\r\n              <text class=\"picker-value\">{{ editApplicant.gender || 'è¯·é€‰æ‹©' }}</text>\r\n              <text class=\"picker-arrow\">â–¼</text>\r\n            </view>\r\n          </picker>\r\n                      <input v-model=\"editApplicant.phone\" placeholder=\"* è”ç³»ç”µè¯ï¼ˆå¿…å¡«ï¼‰\" class=\"input\" type=\"tel\" maxlength=\"11\" @blur=\"validatePhone\" @input=\"saveDraft\" />\r\n          <picker mode=\"date\" @change=\"onLunarBirthdayChange\" :value=\"editApplicant.lunarBirthday\">\r\n            <view class=\"picker\">\r\n              <text class=\"picker-label\">* å†œå†ç”Ÿæ—¥ï¼š</text>\r\n              <text class=\"picker-value\">{{ editApplicant.lunarBirthday || 'è¯·é€‰æ‹©' }}</text>\r\n              <text class=\"picker-arrow\">â–¼</text>\r\n            </view>\r\n          </picker>\r\n          <picker :range=\"birthTimeOptions\" @change=\"onBirthTimeChange\" :value=\"birthTimeIndex\">\r\n            <view class=\"picker\">\r\n              <text class=\"picker-label\">* å‡ºç”Ÿæ—¶è¾°ï¼š</text>\r\n              <text class=\"picker-value\">{{ editApplicant.birthTime || 'è¯·é€‰æ‹©' }}</text>\r\n              <text class=\"picker-arrow\">â–¼</text>\r\n            </view>\r\n          </picker>\r\n          <input v-model=\"editApplicant.address\" placeholder=\"* å¸¸ä½åœ°å€ï¼ˆå¿…å¡«ï¼‰\" class=\"input\" @input=\"saveDraft\" />\r\n          <view class=\"popup-btns\">\r\n            <button class=\"popup-btn primary\" @click=\"saveApplicant\">ä¿å­˜</button>\r\n            <button class=\"popup-btn\" @click=\"closePopup\">å–æ¶ˆ</button>\r\n          </view>\r\n        </view>\r\n      </uni-popup>\r\n\r\n      <!-- æ³•ä¼šä¿¡æ¯ -->\r\n      <view class=\"section-title\">æ³•ä¼šé¡¹ç›®ä¿¡æ¯</view>\r\n      <view class=\"card\">\r\n        <picker :range=\"projectNames\" @change=\"onProjectChange\" :value=\"jointProjectIdx\">\r\n          <view class=\"picker\">\r\n            <text class=\"picker-label\">æ³•ä¼šé¡¹ç›®ï¼š</text>\r\n            <text class=\"picker-value\">{{ currentProject ? currentProject.name : 'è¯·é€‰æ‹©' }}</text>\r\n            <text class=\"picker-arrow\">â–¼</text>\r\n          </view>\r\n        </picker>\r\n        <picker v-if=\"hasProjectDates\" :range=\"currentProject.dates\" @change=\"onDateChange\" :value=\"selectedDateIdx\">\r\n          <view class=\"picker\">\r\n            <text class=\"picker-label\">æ³•ä¼šæ—¥æœŸï¼š</text>\r\n            <text class=\"picker-value\">{{ selectedDate || 'è¯·é€‰æ‹©' }}</text>\r\n            <text class=\"picker-arrow\">â–¼</text>\r\n          </view>\r\n        </picker>\r\n        <view v-else class=\"fahui-tip\">æ³•ä¼šæ—¥æœŸï¼š<text class=\"info-value\">é¢„è®¢æˆåŠŸåé“é•¿ä¸æ‚¨è”ç³»ç¡®è®¤</text></view>\r\n      </view>\r\n      \r\n      <!-- é…å¶ä¿¡æ¯æ˜¾ç¤ºï¼Œç´§è·Ÿæ³•ä¼šä¿¡æ¯å¡ç‰‡ä¸‹æ–¹ -->\r\n      <view v-if=\"showSpouseInfo\" style=\"margin-top: 10rpx; margin-bottom: 10rpx;\">\r\n        <view class=\"section-title\" style=\"margin-bottom: 8rpx;\">é…å¶ä¿¡æ¯</view>\r\n        <view class=\"card\" style=\"margin-bottom: 0;\">\r\n          <view class=\"spouse-info\">\r\n            <view class=\"info-row\">\r\n              <text class=\"info-label\">å§“åï¼š</text>\r\n              <text class=\"info-value\">{{ spouse.name }}</text>\r\n            </view>\r\n            <view class=\"info-row\">\r\n              <text class=\"info-label\">æ€§åˆ«ï¼š</text>\r\n              <text class=\"info-value\">{{ spouse.gender }}</text>\r\n            </view>\r\n            <view class=\"info-row\">\r\n              <text class=\"info-label\">å†œå†ç”Ÿæ—¥ï¼š</text>\r\n              <text class=\"info-value\">{{ spouse.lunarBirthday || 'æœªå¡«å†™' }}</text>\r\n            </view>\r\n            <view class=\"info-row\">\r\n              <text class=\"info-label\">å‡ºç”Ÿæ—¶è¾°ï¼š</text>\r\n              <text class=\"info-value\">{{ spouse.birthTime || 'æœªå¡«å†™' }}</text>\r\n            </view>\r\n          </view>\r\n          <button class=\"mini-btn\" size=\"mini\" @click=\"openSpouseDialog\">ä¿®æ”¹é…å¶ä¿¡æ¯</button>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- è¶…åº¦ç‰¹æ®Šè¾“å…¥ï¼Œç´§è·Ÿé…å¶ä¿¡æ¯ä¸‹æ–¹ -->\r\n      <view v-if=\"isChaoduProject\" style=\"margin-top: 10rpx; margin-bottom: 10rpx;\">\r\n        <view class=\"section-title\" style=\"margin-bottom: 8rpx;\">è¶…åº¦ç±»å‹ <text class=\"section-tip\">ï¼ˆå¿…é€‰ï¼‰</text></view>\r\n        <view class=\"card\" style=\"margin-bottom: 0;\">\r\n          <picker :range=\"chaoduTypes\" @change=\"onChaoduTypeChange\" :value=\"chaoduTypeIndex\">\r\n            <view class=\"picker\">\r\n              <text class=\"picker-label\">è¶…åº¦ç±»å‹ï¼š</text>\r\n              <text class=\"picker-value\">{{ chaoduType || 'è¯·é€‰æ‹©' }}</text>\r\n              <text class=\"picker-arrow\">â–¼</text>\r\n            </view>\r\n          </picker>\r\n        </view>\r\n        <view class=\"section-title\" style=\"margin-bottom: 8rpx;\">å·²æ•…äº²äººä¿¡æ¯ <text class=\"section-tip\">ï¼ˆè‡³å°‘1äººï¼Œæœ€å¤š5äººï¼‰</text></view>\r\n        <view class=\"section-tip-full\">ç‚¹å‡»\"ç¼–è¾‘\"æŒ‰é’®å¯ä¿®æ”¹å·²æ•…äº²äººä¿¡æ¯</view>\r\n        <view class=\"deceased-list\">\r\n          <view v-for=\"(deceased, idx) in deceasedList\" :key=\"idx\" class=\"deceased-card\">\r\n            <view class=\"deceased-header\">\r\n              <text class=\"deceased-name\">{{ deceased.name || 'æœªå¡«å†™' }}</text>\r\n              <view class=\"deceased-actions\">\r\n                <button class=\"mini-btn\" size=\"mini\" @click=\"openDeceasedDialog(idx)\">ç¼–è¾‘</button>\r\n                <button v-if=\"deceasedList.length>1\" class=\"mini-btn danger\" size=\"mini\" @click=\"removeDeceased(idx)\">åˆ é™¤</button>\r\n              </view>\r\n            </view>\r\n            <view class=\"deceased-info-row\">\r\n              <text>å‡ºç”Ÿå†œå†ï¼š</text><text class=\"info-value\">{{ deceased.lunarBirthday || 'æœªé€‰' }}</text>\r\n              <text>å»ä¸–å†œå†ï¼š</text><text class=\"info-value\">{{ deceased.deathDate || 'æœªé€‰' }}</text>\r\n            </view>\r\n            <view class=\"deceased-info-row\">\r\n              <text>å…³ç³»ï¼š</text><text class=\"info-value\">{{ deceased.relation || 'æœªé€‰' }}</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <button v-if=\"deceasedList.length < 5\" class=\"add-btn\" @click=\"addDeceased\">\r\n          <text class=\"add-icon\">+</text>\r\n          <text class=\"add-text\">æ·»åŠ å·²æ•…äº²äºº</text>\r\n        </button>\r\n      </view>\r\n\r\n      <!-- é…å¶ä¿¡æ¯å¼¹çª— -->\r\n      <uni-popup ref=\"spousePopup\" type=\"center\">\r\n        <view class=\"popup-content\">\r\n          <view class=\"popup-title\">é…å¶ä¿¡æ¯</view>\r\n          <view class=\"popup-tip\">ä»¥ä¸‹ä¿¡æ¯ä¸ºé€‰å¡«é¡¹ï¼Œå¯æ ¹æ®éœ€è¦å¡«å†™</view>\r\n          <input v-model=\"editSpouse.name\" placeholder=\"å§“åï¼ˆé€‰å¡«ï¼‰\" class=\"input\" maxlength=\"20\" @input=\"saveDraft\" />\r\n                      <picker :range=\"genderOptions\" @change=\"onSpouseGenderChange\" :value=\"spouseGenderIndex\">\r\n            <view class=\"picker\">\r\n              <text class=\"picker-label\">æ€§åˆ«ï¼š</text>\r\n              <text class=\"picker-value\">{{ editSpouse.gender || 'è¯·é€‰æ‹©' }}</text>\r\n              <text class=\"picker-arrow\">â–¼</text>\r\n            </view>\r\n          </picker>\r\n          <picker mode=\"date\" @change=\"onSpouseLunarBirthdayChange\" :value=\"editSpouse.lunarBirthday\">\r\n            <view class=\"picker\">\r\n              <text class=\"picker-label\">å†œå†ç”Ÿæ—¥ï¼š</text>\r\n              <text class=\"picker-value\">{{ editSpouse.lunarBirthday || 'è¯·é€‰æ‹©' }}</text>\r\n              <text class=\"picker-arrow\">â–¼</text>\r\n            </view>\r\n          </picker>\r\n                      <picker :range=\"birthTimeOptions\" @change=\"onSpouseBirthTimeChange\" :value=\"spouseBirthTimeIndex\">\r\n            <view class=\"picker\">\r\n              <text class=\"picker-label\">å‡ºç”Ÿæ—¶è¾°ï¼š</text>\r\n              <text class=\"picker-value\">{{ editSpouse.birthTime || 'è¯·é€‰æ‹©' }}</text>\r\n              <text class=\"picker-arrow\">â–¼</text>\r\n            </view>\r\n          </picker>\r\n          <view class=\"popup-btns\">\r\n            <button class=\"popup-btn primary\" @click=\"saveSpouse\">ä¿å­˜</button>\r\n            <button class=\"popup-btn\" @click=\"closeSpousePopup\">å–æ¶ˆ</button>\r\n          </view>\r\n        </view>\r\n      </uni-popup>\r\n\r\n      <!-- å·²æ•…äº²äººä¿¡æ¯å¼¹çª— -->\r\n      <uni-popup ref=\"deceasedPopup\" type=\"center\">\r\n        <view class=\"popup-content\">\r\n          <view class=\"popup-title\">å·²æ•…äº²äººä¿¡æ¯</view>\r\n          <view class=\"popup-tip\">å¸¦ * çš„å­—æ®µä¸ºå¿…å¡«é¡¹ï¼Œå»ºè®®å¡«å†™å‡ºç”Ÿå’Œå»ä¸–æ—¥æœŸ</view>\r\n          <input v-model=\"editDeceased.name\" placeholder=\"* å§“åï¼ˆå¿…å¡«ï¼‰\" class=\"input\" maxlength=\"20\" @input=\"saveDraft\" />\r\n          <picker mode=\"date\" @change=\"onDeceasedLunarBirthdayChange\" :value=\"editDeceased.lunarBirthday\">\r\n            <view class=\"picker\">\r\n              <text class=\"picker-label\">å‡ºç”Ÿå†œå†ï¼š</text>\r\n              <text class=\"picker-value\">{{ editDeceased.lunarBirthday || 'è¯·é€‰æ‹©' }}</text>\r\n              <text class=\"picker-arrow\">â–¼</text>\r\n            </view>\r\n          </picker>\r\n          <picker mode=\"date\" @change=\"onDeceasedDeathDateChange\" :value=\"editDeceased.deathDate\">\r\n            <view class=\"picker\">\r\n              <text class=\"picker-label\">å»ä¸–å†œå†ï¼š</text>\r\n              <text class=\"picker-value\">{{ editDeceased.deathDate || 'è¯·é€‰æ‹©' }}</text>\r\n              <text class=\"picker-arrow\">â–¼</text>\r\n            </view>\r\n          </picker>\r\n                      <picker :range=\"deceasedRelationOptions\" @change=\"onDeceasedRelationChange\" :value=\"deceasedRelationIndex\">\r\n            <view class=\"picker\">\r\n              <text class=\"picker-label\">* å…³ç³»ï¼š</text>\r\n              <text class=\"picker-value\">{{ editDeceased.relation || 'è¯·é€‰æ‹©' }}</text>\r\n              <text class=\"picker-arrow\">â–¼</text>\r\n            </view>\r\n          </picker>\r\n          <view class=\"popup-btns\">\r\n            <button class=\"popup-btn primary\" @click=\"saveDeceased\">ä¿å­˜</button>\r\n            <button class=\"popup-btn\" @click=\"closeDeceasedPopup\">å–æ¶ˆ</button>\r\n          </view>\r\n        </view>\r\n      </uni-popup>\r\n\r\n      <!-- ä»£åŠç‰©å“ï¼ˆå¯é€‰ï¼‰ -->\r\n      <view class=\"section-title\" v-if=\"showItems\">ä»£åŠç‰©å“ <text class=\"section-tip\">ï¼ˆå¯é€‰ï¼‰</text></view>\r\n      <view v-if=\"showItems\" class=\"card\">\r\n        <view v-for=\"(item, idx) in items\" :key=\"idx\" class=\"item-row\">\r\n          <text>{{ item.name }}ï¼ˆï¿¥{{ item.price }}ï¼‰</text>\r\n          <input type=\"number\" v-model.number=\"item.count\" min=\"0\" class=\"input item-input\" @input=\"saveDraft\" />\r\n        </view>\r\n      </view>\r\n\r\n      <!-- æ”¶ä»¶ä¿¡æ¯ -->\r\n      <view class=\"section-title\" v-if=\"showReceiver\">\r\n        æ”¶ä»¶ä¿¡æ¯ \r\n        <text class=\"section-tip\" v-if=\"!receiverConfig || (!receiverConfig.nameRequired && !receiverConfig.phoneRequired && !receiverConfig.addressRequired)\">ï¼ˆå¯é€‰ï¼‰</text>\r\n        <text class=\"section-tip\" v-else>ï¼ˆå¿…å¡«é¡¹å·²æ ‡è®°*ï¼‰</text>\r\n      </view>\r\n      <view v-if=\"showReceiver\" class=\"card\">\r\n        <view class=\"input-group\">\r\n          <text class=\"input-label\" v-if=\"receiverConfig && receiverConfig.nameRequired\">æ”¶ä»¶äººå§“å *</text>\r\n          <text class=\"input-label\" v-else>æ”¶ä»¶äººå§“å</text>\r\n          <input v-model=\"receiver.name\" placeholder=\"è¯·è¾“å…¥æ”¶ä»¶äººå§“å\" class=\"input\" @input=\"saveDraft\" />\r\n        </view>\r\n        <view class=\"input-group\">\r\n          <text class=\"input-label\" v-if=\"receiverConfig && receiverConfig.phoneRequired\">è”ç³»ç”µè¯ *</text>\r\n          <text class=\"input-label\" v-else>è”ç³»ç”µè¯</text>\r\n                      <input v-model=\"receiver.phone\" placeholder=\"è¯·è¾“å…¥è”ç³»ç”µè¯\" class=\"input\" type=\"tel\" maxlength=\"11\" @input=\"saveDraft\" />\r\n        </view>\r\n        <view class=\"input-group\">\r\n          <text class=\"input-label\" v-if=\"receiverConfig && receiverConfig.addressRequired\">æ”¶ä»¶åœ°å€ *</text>\r\n          <text class=\"input-label\" v-else>æ”¶ä»¶åœ°å€</text>\r\n          <textarea v-model=\"receiver.address\" placeholder=\"è¯·è¾“å…¥è¯¦ç»†æ”¶ä»¶åœ°å€\" class=\"textarea\" @input=\"saveDraft\" />\r\n        </view>\r\n      </view>\r\n\r\n      <button class=\"form-btn\" type=\"primary\" @click=\"nextStep\" :disabled=\"isSubmitting\">\r\n        <view v-if=\"isSubmitting\" class=\"btn-loading\">\r\n          <view class=\"btn-spinner\"></view>\r\n          <text>æäº¤ä¸­...</text>\r\n        </view>\r\n        <text v-else>ä¸‹ä¸€æ­¥</text>\r\n      </button>\r\n      \r\n      <!-- è°ƒè¯•ä¿¡æ¯ï¼ˆå¼€å‘æ—¶å¯æ˜¾ç¤ºï¼‰ -->\r\n      <view v-if=\"true\" class=\"debug-info\">\r\n        <text>æŠ¥åäººæ•°ï¼š{{ applicants.length }}</text>\r\n        <text>å·²æ•…äº²äººæ•°ï¼š{{ deceasedList.length }}</text>\r\n        <text>ä»£åŠç‰©å“æ•°ï¼š{{ items.length }}</text>\r\n        <text>æ”¶ä»¶ä¿¡æ¯ï¼š{{ showReceiver ? 'æ˜¾ç¤º' : 'éšè—' }}</text>\r\n        <text>ä»£åŠç‰©å“æ¨¡å—ï¼š{{ showItems ? 'æ˜¾ç¤º' : 'éšè—' }}</text>\r\n        <button @click=\"checkModuleConfig\" class=\"debug-btn\">æ£€æŸ¥ä»£åŠç‰©å“é…ç½®</button>\r\n        <button @click=\"checkReceiverConfig\" class=\"debug-btn\">æ£€æŸ¥æ”¶ä»¶ä¿¡æ¯é…ç½®</button>\r\n        <button @click=\"debugData\" class=\"debug-btn\" style=\"background: #ff6b6b; color: white;\">ç”Ÿæˆæµ‹è¯•æ•°æ®</button>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport uniPopup from '@/components/uni-popup/uni-popup.vue'\r\nimport jointDataManager from '@/utils/jointDataManager.js'\r\n\r\n// å¯¼å…¥äº‘å¯¹è±¡\r\nconst jointManagement = uniCloud.importObject('joint-management')\r\n\r\nexport default {\r\n  components: {\r\n    uniPopup\r\n  },\r\n  data() {\r\n    return {\r\n      isLoading: true,\r\n      isSubmitting: false,\r\n      projectId: '',\r\n      \r\n      // æŠ¥åäººä¿¡æ¯\r\n      applicants: [],\r\n      editApplicant: {},\r\n      editIndex: -1,\r\n      \r\n      // æ³•ä¼šé¡¹ç›®ä¿¡æ¯\r\n      jointProjects: [],\r\n      jointProjectIdx: -1,\r\n      currentProject: null,\r\n      selectedDateIdx: -1,\r\n      selectedDate: '',\r\n      \r\n      // å§»ç¼˜å’Œåˆæ³•ä¼šç‰¹æ®Šä¿¡æ¯\r\n      spouse: {\r\n        name: '',\r\n        gender: '',\r\n        lunarBirthday: '',\r\n        birthTime: ''\r\n      },\r\n      editSpouse: {},\r\n      \r\n      // è¶…åº¦æ³•ä¼šç‰¹æ®Šä¿¡æ¯\r\n      chaoduType: '',\r\n      chaoduTypes: ['è¶…åº¦äº¡çµ', 'è¶…åº¦å©´çµ', 'è¶…åº¦å†¤äº²å€ºä¸»', 'è¶…åº¦å†ä»£å®—äº²'],\r\n      deceasedList: [],\r\n      editDeceased: {},\r\n      editDeceasedIndex: -1,\r\n      \r\n      // ä»£åŠç‰©å“\r\n      items: [],\r\n      showItems: false,\r\n      \r\n      // æ”¶ä»¶ä¿¡æ¯\r\n      receiver: {\r\n        name: '',\r\n        phone: '',\r\n        address: ''\r\n      },\r\n      showReceiver: false,\r\n      receiverConfig: null,\r\n      \r\n      // é€‰é¡¹æ•°æ®\r\n      genderOptions: ['ç”·', 'å¥³'],\r\n      birthTimeOptions: ['å­æ—¶(23:00-01:00)', 'ä¸‘æ—¶(01:00-03:00)', 'å¯…æ—¶(03:00-05:00)', 'å¯æ—¶(05:00-07:00)', 'è¾°æ—¶(07:00-09:00)', 'å·³æ—¶(09:00-11:00)', 'åˆæ—¶(11:00-13:00)', 'æœªæ—¶(13:00-15:00)', 'ç”³æ—¶(15:00-17:00)', 'é…‰æ—¶(17:00-19:00)', 'æˆŒæ—¶(19:00-21:00)', 'äº¥æ—¶(21:00-23:00)'],\r\n      deceasedRelationOptions: ['å…ˆæ›¾ç¥–çˆ¶', 'å…ˆæ›¾ç¥–æ¯', 'å…ˆç¥–çˆ¶', 'å…ˆç¥–æ¯', 'å¤–ç¥–çˆ¶', 'å¤–ç¥–æ¯', 'å…ˆçˆ¶', 'å…ˆæ¯', 'å²³çˆ¶', 'å²³æ¯', 'å…ˆå¤«', 'å…ˆå¦»', 'æ•…çˆ±å­', 'æ•…çˆ±å¥³', 'å¥½å‹', 'æ©å¸ˆ', 'å…¶ä»–']\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    hasSelectedItems() {\r\n      return this.items.some(item => item.count > 0)\r\n    },\r\n    projectNames() {\r\n      return this.jointProjects.map(p => p.name)\r\n    },\r\n    genderIndex() {\r\n      return this.genderOptions.indexOf(this.editApplicant.gender)\r\n    },\r\n    birthTimeIndex() {\r\n      return this.birthTimeOptions.indexOf(this.editApplicant.birthTime)\r\n    },\r\n    chaoduTypeIndex() {\r\n      return this.chaoduTypes.indexOf(this.chaoduType)\r\n    },\r\n    spouseGenderIndex() {\r\n      return this.genderOptions.indexOf(this.editSpouse.gender)\r\n    },\r\n    spouseBirthTimeIndex() {\r\n      return this.birthTimeOptions.indexOf(this.editSpouse.birthTime)\r\n    },\r\n    deceasedRelationIndex() {\r\n      return this.deceasedRelationOptions.indexOf(this.editDeceased.relation)\r\n    },\r\n    hasProjectDates() {\r\n      return this.currentProject && this.currentProject.dates && this.currentProject.dates.length > 0\r\n    },\r\n    showSpouseInfo() {\r\n      return this.currentProject && this.currentProject.category === 'å§»ç¼˜å’Œåˆ' && this.spouse.name\r\n    },\r\n    isYinyuanProject() {\r\n      return this.currentProject && this.currentProject.category === 'å§»ç¼˜å’Œåˆ'\r\n    },\r\n    isChaoduProject() {\r\n      return this.currentProject && this.currentProject.category === 'è¶…åº¦æ³•ä¼š'\r\n    }\r\n  },\r\n  \r\n  onLoad(options) {\r\n    console.log('ğŸ” é¡µé¢åŠ è½½è°ƒè¯•: ========== é¡µé¢å¼€å§‹åŠ è½½ ==========')\r\n    console.log('ğŸ” é¡µé¢åŠ è½½è°ƒè¯•: options:', options)\r\n    console.log('ğŸ” é¡µé¢åŠ è½½è°ƒè¯•: åˆå§‹ showReceiver =', this.showReceiver)\r\n    console.log('ğŸ” é¡µé¢åŠ è½½è°ƒè¯•: åˆå§‹ applicants =', this.applicants)\r\n    \r\n    if (options.projectId) {\r\n      this.projectId = options.projectId\r\n      console.log('ğŸ” é¡µé¢åŠ è½½è°ƒè¯•: è®¾ç½® projectId =', this.projectId)\r\n    }\r\n    \r\n    console.log('ğŸ” é¡µé¢åŠ è½½è°ƒè¯•: å¼€å§‹è°ƒç”¨ loadData()')\r\n    this.loadData()\r\n    console.log('ğŸ” é¡µé¢åŠ è½½è°ƒè¯•: loadData() è°ƒç”¨å®Œæˆ')\r\n  },\r\n  \r\n  onShow() {\r\n    console.log('ğŸ” é¡µé¢æ˜¾ç¤ºè°ƒè¯•: ========== é¡µé¢æ˜¾ç¤º ==========')\r\n    console.log('ğŸ” é¡µé¢æ˜¾ç¤ºè°ƒè¯•: å½“å‰ showReceiver =', this.showReceiver)\r\n    console.log('ğŸ” é¡µé¢æ˜¾ç¤ºè°ƒè¯•: å½“å‰ applicants =', this.applicants)\r\n    \r\n    console.log('ğŸ” é¡µé¢æ˜¾ç¤ºè°ƒè¯•: å¼€å§‹è°ƒç”¨ loadDraft()')\r\n    this.loadDraft()\r\n    console.log('ğŸ” é¡µé¢æ˜¾ç¤ºè°ƒè¯•: loadDraft() è°ƒç”¨å®Œæˆ')\r\n    \r\n    console.log('ğŸ” é¡µé¢æ˜¾ç¤ºè°ƒè¯•: å¼€å§‹è°ƒç”¨ checkAndClearOldData()')\r\n    this.checkAndClearOldData()\r\n    console.log('ğŸ” é¡µé¢æ˜¾ç¤ºè°ƒè¯•: checkAndClearOldData() è°ƒç”¨å®Œæˆ')\r\n    \r\n    console.log('ğŸ” é¡µé¢æ˜¾ç¤ºè°ƒè¯•: é¡µé¢æ˜¾ç¤ºå®Œæˆï¼Œæœ€ç»ˆ applicants =', this.applicants)\r\n  },\r\n  \r\n  methods: {\r\n    async loadData() {\r\n      console.log('ğŸ” loadDataè°ƒè¯•: ========== å¼€å§‹åŠ è½½æ•°æ® ==========')\r\n      try {\r\n        this.isLoading = true\r\n        console.log('ğŸ” loadDataè°ƒè¯•: è®¾ç½® isLoading = true')\r\n        \r\n        // åŠ è½½åˆå›æ³•ä¼šé¡¹ç›®\r\n        console.log('ğŸ” loadDataè°ƒè¯•: å¼€å§‹åŠ è½½åˆå›æ³•ä¼šé¡¹ç›®')\r\n        await this.loadJointProjects()\r\n        console.log('ğŸ” loadDataè°ƒè¯•: åˆå›æ³•ä¼šé¡¹ç›®åŠ è½½å®Œæˆï¼Œé¡¹ç›®æ•°é‡:', this.jointProjects.length)\r\n        \r\n        // åŠ è½½æ”¶ä»¶ä¿¡æ¯é…ç½®\r\n        console.log('ğŸ” loadDataè°ƒè¯•: å¼€å§‹åŠ è½½æ”¶ä»¶ä¿¡æ¯é…ç½®...')\r\n        await this.loadReceiverConfig()\r\n        console.log('ğŸ” loadDataè°ƒè¯•: æ”¶ä»¶ä¿¡æ¯é…ç½®åŠ è½½å®Œæˆï¼ŒshowReceiver =', this.showReceiver)\r\n        \r\n        // å¦‚æœæœ‰projectIdï¼Œè‡ªåŠ¨é€‰æ‹©å¯¹åº”é¡¹ç›®\r\n        if (this.projectId) {\r\n          console.log('ğŸ” loadDataè°ƒè¯•: æœ‰projectIdï¼Œå¼€å§‹è‡ªåŠ¨é€‰æ‹©é¡¹ç›®:', this.projectId)\r\n          const index = this.jointProjects.findIndex(p => p._id === this.projectId)\r\n          if (index !== -1) {\r\n            this.jointProjectIdx = index\r\n            this.currentProject = this.jointProjects[index]\r\n            console.log('ğŸ” loadDataè°ƒè¯•: è‡ªåŠ¨é€‰æ‹©é¡¹ç›®æˆåŠŸ:', this.currentProject.name, 'é¡¹ç›®ID:', this.currentProject._id)\r\n            // åŠ è½½é€‰ä¸­é¡¹ç›®çš„ä»£åŠç‰©å“\r\n            await this.loadItemsConfig(this.currentProject._id)\r\n          } else {\r\n            console.log('ğŸ” loadDataè°ƒè¯•: æœªæ‰¾åˆ°å¯¹åº”çš„é¡¹ç›®')\r\n          }\r\n        }\r\n        \r\n        // åˆå§‹åŒ–æŠ¥åäºº\r\n        console.log('ğŸ” loadDataè°ƒè¯•: æ£€æŸ¥æŠ¥åäººåˆå§‹åŒ–ï¼Œå½“å‰applicantsé•¿åº¦:', this.applicants.length)\r\n        if (this.applicants.length === 0) {\r\n          console.log('ğŸ” loadDataè°ƒè¯•: æ²¡æœ‰æŠ¥åäººï¼Œæ·»åŠ é»˜è®¤æŠ¥åäºº')\r\n          this.addApplicant()\r\n          console.log('ğŸ” loadDataè°ƒè¯•: æ·»åŠ é»˜è®¤æŠ¥åäººå®Œæˆï¼Œå½“å‰applicants:', this.applicants)\r\n        } else {\r\n          console.log('ğŸ” loadDataè°ƒè¯•: å·²æœ‰æŠ¥åäººï¼Œæ•°é‡:', this.applicants.length)\r\n          console.log('ğŸ” loadDataè°ƒè¯•: ç°æœ‰æŠ¥åäººè¯¦æƒ…:', this.applicants)\r\n        }\r\n        \r\n        console.log('ğŸ” loadDataè°ƒè¯•: ========== æ•°æ®åŠ è½½å®Œæˆ ==========')\r\n        console.log('ğŸ” loadDataè°ƒè¯•: å½“å‰é¡¹ç›®æ•°é‡:', this.jointProjects.length)\r\n        console.log('ğŸ” loadDataè°ƒè¯•: å½“å‰é€‰ä¸­é¡¹ç›®:', this.currentProject?.name || 'æ— ')\r\n        console.log('ğŸ” loadDataè°ƒè¯•: ä»£åŠç‰©å“æ˜¾ç¤ºçŠ¶æ€:', this.showItems)\r\n        console.log('ğŸ” loadDataè°ƒè¯•: æ”¶ä»¶ä¿¡æ¯æ˜¾ç¤ºçŠ¶æ€:', this.showReceiver)\r\n        console.log('ğŸ” loadDataè°ƒè¯•: æ”¶ä»¶ä¿¡æ¯é…ç½®å¯¹è±¡:', this.receiverConfig)\r\n        console.log('ğŸ” loadDataè°ƒè¯•: æ”¶ä»¶äººä¿¡æ¯:', this.receiver)\r\n        console.log('ğŸ” loadDataè°ƒè¯•: æœ€ç»ˆapplicantsçŠ¶æ€:', this.applicants)\r\n        console.log('ğŸ” loadDataè°ƒè¯•: applicantsé•¿åº¦:', this.applicants.length)\r\n        \r\n        this.isLoading = false\r\n        console.log('ğŸ” loadDataè°ƒè¯•: è®¾ç½® isLoading = false')\r\n      } catch (error) {\r\n        console.error('åŠ è½½æ•°æ®å¤±è´¥:', error)\r\n        uni.showToast({\r\n          title: 'åŠ è½½æ•°æ®å¤±è´¥',\r\n          icon: 'none'\r\n        })\r\n        this.isLoading = false\r\n      }\r\n    },\r\n    \r\n    async loadJointProjects() {\r\n      try {\r\n        const result = await jointManagement.getProjects()\r\n        \r\n        if (result.success && result.data && result.data.length > 0) {\r\n          this.jointProjects = result.data\r\n        } else {\r\n          // ä½¿ç”¨é»˜è®¤æ•°æ®\r\n          this.jointProjects = [\r\n            { \r\n              _id: 'joint_pingan', \r\n              name: 'å¹³å®‰åˆå›', \r\n              price: 200, \r\n              description: 'ç¥ˆæ±‚å¹³å®‰å‰ç¥¥ï¼Œæ¶ˆç¾å…éš¾',\r\n              category: 'å¹³å®‰ç¥ˆç¦',\r\n              deadline: '2025-12-31',\r\n              dates: ['2025-08-01', '2025-08-15', '2025-09-01'],\r\n              maxApplicants: 100\r\n            },\r\n            { \r\n              _id: 'joint_yinyuan', \r\n              name: 'å§»ç¼˜åˆå›', \r\n              price: 300, \r\n              description: 'ç¥ˆæ±‚å§»ç¼˜ç¾æ»¡ï¼Œæ„Ÿæƒ…å’Œç¦',\r\n              category: 'å§»ç¼˜å’Œåˆ',\r\n              deadline: '2025-12-31',\r\n              dates: ['2025-08-10', '2025-09-10'],\r\n              maxApplicants: 50\r\n            },\r\n            { \r\n              _id: 'joint_chaodu', \r\n              name: 'è¶…åº¦åˆå›', \r\n              price: 400, \r\n              description: 'è¶…åº¦äº¡çµï¼Œç¥ˆæ±‚å¾€ç”Ÿå‡€åœŸ',\r\n              category: 'è¶…åº¦æ³•ä¼š',\r\n              deadline: '2025-12-31',\r\n              dates: ['2025-08-18', '2025-08-30', '2025-09-18'],\r\n              maxApplicants: 80\r\n            }\r\n          ]\r\n        }\r\n      } catch (error) {\r\n        console.error('åŠ è½½åˆå›æ³•ä¼šé¡¹ç›®å¤±è´¥:', error)\r\n        throw error\r\n      }\r\n    },\r\n    \r\n    async loadItemsConfig(projectId) {\r\n      if (!projectId) {\r\n        console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: é¡¹ç›®IDä¸ºç©ºï¼Œç¦ç”¨ä»£åŠç‰©å“æ¨¡å—')\r\n        this.showItems = false\r\n        this.items = []\r\n        return\r\n      }\r\n      \r\n      try {\r\n        console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: å¼€å§‹æ£€æŸ¥æ¨¡å—å¯ç”¨çŠ¶æ€ï¼Œé¡¹ç›®ID:', projectId)\r\n        \r\n        // é¦–å…ˆæ£€æŸ¥æ¨¡å—æ˜¯å¦å¯ç”¨\r\n        const moduleResult = await jointManagement.getGoodsConfig()\r\n        \r\n        console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: æ¨¡å—é…ç½®äº‘å‡½æ•°è¿”å›ç»“æœ:', moduleResult)\r\n        \r\n        let moduleEnabled = false\r\n        if (moduleResult.success && moduleResult.data) {\r\n          moduleEnabled = moduleResult.data.enabled || false\r\n          console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: ä»æ•°æ®åº“è·å–çš„å¯ç”¨çŠ¶æ€:', moduleEnabled)\r\n        } else {\r\n          console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: æ•°æ®åº“ä¸­æ²¡æœ‰é…ç½®æ•°æ®ï¼Œé»˜è®¤ç¦ç”¨')\r\n        }\r\n        \r\n        // å¦‚æœæ¨¡å—æœªå¯ç”¨ï¼Œç›´æ¥è¿”å›\r\n        if (!moduleEnabled) {\r\n          console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: æ¨¡å—å·²ç¦ç”¨ï¼Œéšè—ä»£åŠç‰©å“åŒºåŸŸ')\r\n          this.showItems = false\r\n          this.items = []\r\n          return\r\n        }\r\n        \r\n        console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: æ¨¡å—å·²å¯ç”¨ï¼Œå¼€å§‹åŠ è½½é¡¹ç›®ç‰©å“')\r\n        \r\n        // æ¨¡å—å¯ç”¨åï¼Œæ£€æŸ¥é¡¹ç›®æ˜¯å¦æœ‰ç‰©å“\r\n        const result = await jointManagement.getGoods({ projectId: projectId })\r\n        \r\n        console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: é¡¹ç›®ç‰©å“äº‘å‡½æ•°è¿”å›ç»“æœ:', result)\r\n        \r\n        if (result.data && result.data.length > 0) {\r\n          console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: é¡¹ç›®æœ‰ç‰©å“ï¼Œæ˜¾ç¤ºä»£åŠç‰©å“åŒºåŸŸï¼Œç‰©å“æ•°é‡:', result.data.length)\r\n          this.showItems = true\r\n          this.items = result.data.map(item => ({\r\n            ...item,\r\n            count: 0\r\n          }))\r\n        } else {\r\n          console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: é¡¹ç›®æ²¡æœ‰ç‰©å“ï¼Œéšè—ä»£åŠç‰©å“åŒºåŸŸ')\r\n          this.showItems = false\r\n          this.items = []\r\n        }\r\n      } catch (error) {\r\n        console.error('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: åŠ è½½ä»£åŠç‰©å“é…ç½®å¤±è´¥:', error)\r\n        this.showItems = false\r\n        this.items = []\r\n      }\r\n    },\r\n    \r\n    async loadReceiverConfig() {\r\n      try {\r\n        console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: å¼€å§‹åŠ è½½æ”¶ä»¶ä¿¡æ¯é…ç½®...')\r\n        console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: è°ƒç”¨å‰ showReceiver =', this.showReceiver)\r\n        \r\n        const result = await jointManagement.getReceiverConfig()\r\n        \r\n        console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: äº‘å‡½æ•°è¿”å›ç»“æœ:', result)\r\n        console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: result.data =', result.data)\r\n        \r\n        if (result.success && result.data) {\r\n          this.receiverConfig = result.data\r\n          const oldShowReceiver = this.showReceiver\r\n          this.showReceiver = result.data.enabled || false\r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: é…ç½®åŠ è½½æˆåŠŸ')\r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: enabled =', result.data.enabled)\r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: showReceiver ä»', oldShowReceiver, 'å˜ä¸º', this.showReceiver)\r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: å®Œæ•´é…ç½®å¯¹è±¡:', this.receiverConfig)\r\n        } else {\r\n          const oldShowReceiver = this.showReceiver\r\n          this.receiverConfig = null\r\n          this.showReceiver = false\r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: é…ç½®ä¸ºç©ºæˆ–æ— æ•ˆ')\r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: showReceiver ä»', oldShowReceiver, 'å˜ä¸º', this.showReceiver)\r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: receiverConfig è®¾ç½®ä¸º null')\r\n        }\r\n        \r\n        console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œæœ€ç»ˆ showReceiver =', this.showReceiver)\r\n      } catch (error) {\r\n        console.error('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: åŠ è½½æ”¶ä»¶ä¿¡æ¯é…ç½®å¤±è´¥:', error)\r\n        console.error('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: é”™è¯¯è¯¦æƒ…:', error.message || error)\r\n        const oldShowReceiver = this.showReceiver\r\n        this.receiverConfig = null\r\n        this.showReceiver = false\r\n        console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: å¼‚å¸¸å¤„ç†ï¼ŒshowReceiver ä»', oldShowReceiver, 'å˜ä¸º', this.showReceiver)\r\n      }\r\n    },\r\n    \r\n    async getReceiverConfig() {\r\n      try {\r\n        console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: getReceiverConfig è¢«è°ƒç”¨')\r\n        const result = await jointManagement.getReceiverConfig()\r\n        \r\n        console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: getReceiverConfig äº‘å‡½æ•°è¿”å›:', result)\r\n        \r\n        if (result.success && result.data) {\r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: getReceiverConfig è¿”å›é…ç½®:', result.data)\r\n          return result.data\r\n        }\r\n        console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: getReceiverConfig è¿”å› null')\r\n        return null\r\n      } catch (error) {\r\n        console.error('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: getReceiverConfig è°ƒç”¨å¤±è´¥:', error)\r\n        return null\r\n      }\r\n    },\r\n    \r\n    async checkModuleConfig() {\r\n      try {\r\n        console.log('=== æ£€æŸ¥ä»£åŠç‰©å“æ¨¡å—é…ç½® ===')\r\n        \r\n        // æ£€æŸ¥æ¨¡å—é…ç½®\r\n        const moduleResult = await jointManagement.getGoodsConfig()\r\n        console.log('æ¨¡å—é…ç½®ç»“æœ:', moduleResult)\r\n        \r\n        // æ£€æŸ¥æ•°æ®åº“é…ç½®\r\n        const checkResult = await jointManagement.getGoodsConfig()\r\n        console.log('æ•°æ®åº“æ£€æŸ¥ç»“æœ:', checkResult)\r\n        \r\n        // æ£€æŸ¥å½“å‰é¡¹ç›®ä¿¡æ¯\r\n        let projectInfo = 'æ— '\r\n        if (this.currentProject) {\r\n          projectInfo = `${this.currentProject.name} (${this.currentProject._id})`\r\n        }\r\n        \r\n        // æ£€æŸ¥é¡¹ç›®ç‰©å“\r\n        let projectItems = 'æ— '\r\n        if (this.currentProject && this.currentProject._id) {\r\n          try {\r\n            const itemsResult = await jointManagement.getGoods({ projectId: this.currentProject._id })\r\n            if (itemsResult.success && itemsResult.data) {\r\n              projectItems = `${itemsResult.data.length}ä¸ªç‰©å“`\r\n            }\r\n          } catch (error) {\r\n            projectItems = 'æŸ¥è¯¢å¤±è´¥'\r\n          }\r\n        }\r\n        \r\n        // æ˜¾ç¤ºç»“æœ\r\n        let message = 'ä»£åŠç‰©å“æ¨¡å—é…ç½®æ£€æŸ¥ç»“æœï¼š\\n\\n'\r\n        message += `å½“å‰é¡¹ç›®: ${projectInfo}\\n`\r\n        message += `é¡¹ç›®åˆ†ç±»: ${this.currentProject?.category || 'æ— '}\\n`\r\n        message += `æ¨¡å—å¯ç”¨çŠ¶æ€: ${moduleResult.data?.[0]?.enabled ? 'å¯ç”¨' : 'ç¦ç”¨'}\\n`\r\n        message += `æ•°æ®åº“é…ç½®å­˜åœ¨: ${checkResult.total > 0 ? 'æ˜¯' : 'å¦'}\\n`\r\n        message += `é¡¹ç›®ç‰©å“æ•°é‡: ${projectItems}\\n`\r\n        message += `å½“å‰æ˜¾ç¤ºçŠ¶æ€: ${this.showItems ? 'æ˜¾ç¤º' : 'éšè—'}\\n`\r\n        message += `ç‰©å“åˆ—è¡¨é•¿åº¦: ${this.items.length}`\r\n        \r\n        uni.showModal({\r\n          title: 'ä»£åŠç‰©å“æ¨¡å—é…ç½®æ£€æŸ¥',\r\n          content: message,\r\n          showCancel: false\r\n        })\r\n        \r\n      } catch (error) {\r\n        console.error('æ£€æŸ¥æ¨¡å—é…ç½®å¤±è´¥:', error)\r\n                uni.showToast({\r\n          title: 'æ£€æŸ¥å¤±è´¥',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n    \r\n    async checkReceiverConfig() {\r\n      try {\r\n        console.log('=== æ£€æŸ¥æ”¶ä»¶ä¿¡æ¯æ¨¡å—é…ç½® ===')\r\n        \r\n        // æ£€æŸ¥æ”¶ä»¶ä¿¡æ¯é…ç½®\r\n        const receiverResult = await jointManagement.getReceiverConfig()\r\n        console.log('æ”¶ä»¶ä¿¡æ¯é…ç½®ç»“æœ:', receiverResult)\r\n        \r\n        // æ£€æŸ¥æ•°æ®åº“é…ç½®\r\n        const checkResult = await jointManagement.getReceiverConfig()\r\n        console.log('æ•°æ®åº“æ£€æŸ¥ç»“æœ:', checkResult)\r\n        \r\n        // æ£€æŸ¥å½“å‰çŠ¶æ€\r\n        let message = 'æ”¶ä»¶ä¿¡æ¯æ¨¡å—é…ç½®æ£€æŸ¥ç»“æœï¼š\\n\\n'\r\n        message += `é…ç½®å¯ç”¨çŠ¶æ€: ${receiverResult.data?.[0]?.enabled ? 'å¯ç”¨' : 'ç¦ç”¨'}\\n`\r\n        message += `å§“åå¿…å¡«: ${receiverResult.data?.[0]?.nameRequired ? 'æ˜¯' : 'å¦'}\\n`\r\n        message += `ç”µè¯å¿…å¡«: ${receiverResult.data?.[0]?.phoneRequired ? 'æ˜¯' : 'å¦'}\\n`\r\n        message += `åœ°å€å¿…å¡«: ${receiverResult.data?.[0]?.addressRequired ? 'æ˜¯' : 'å¦'}\\n`\r\n        message += `æ•°æ®åº“é…ç½®å­˜åœ¨: ${checkResult.total > 0 ? 'æ˜¯' : 'å¦'}\\n`\r\n        message += `é…ç½®è®°å½•æ•°é‡: ${checkResult.total || 0}\\n`\r\n        message += `æ”¶ä»¶ä¿¡æ¯æ•°é‡: 0\\n`\r\n        message += `å½“å‰æ˜¾ç¤ºçŠ¶æ€: ${this.showReceiver ? 'æ˜¾ç¤º' : 'éšè—'}\\n`\r\n        message += `é…ç½®å¯¹è±¡: ${this.receiverConfig ? 'å­˜åœ¨' : 'null'}\\n`\r\n        message += `æ”¶ä»¶äººå§“å: ${this.receiver.name || 'æœªå¡«å†™'}\\n`\r\n        message += `è”ç³»ç”µè¯: ${this.receiver.phone || 'æœªå¡«å†™'}\\n`\r\n        message += `æ”¶ä»¶åœ°å€: ${this.receiver.address || 'æœªå¡«å†™'}`\r\n        \r\n        uni.showModal({\r\n          title: 'æ”¶ä»¶ä¿¡æ¯æ¨¡å—é…ç½®æ£€æŸ¥',\r\n          content: message,\r\n          showCancel: false\r\n        })\r\n        \r\n      } catch (error) {\r\n        console.error('æ£€æŸ¥æ”¶ä»¶ä¿¡æ¯é…ç½®å¤±è´¥:', error)\r\n        uni.showToast({\r\n          title: 'æ£€æŸ¥å¤±è´¥',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n    \r\n    // æŠ¥åäººç®¡ç†\r\n    addApplicant() {\r\n      console.log('ğŸ” addApplicantè°ƒè¯•: ========== æ·»åŠ æŠ¥åäºº ==========')\r\n      console.log('ğŸ” addApplicantè°ƒè¯•: å½“å‰applicantsé•¿åº¦:', this.applicants.length)\r\n      \r\n      if (this.applicants.length >= 5) {\r\n        console.log('ğŸ” addApplicantè°ƒè¯•: å·²è¾¾åˆ°æœ€å¤§æ•°é‡é™åˆ¶')\r\n        uni.showToast({\r\n          title: 'æœ€å¤šåªèƒ½æ·»åŠ 5ä½æŠ¥åäºº',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      const newApplicant = {\r\n        name: '',\r\n        gender: '',\r\n        phone: '',\r\n        lunarBirthday: '',\r\n        birthTime: '',\r\n        address: ''\r\n      }\r\n      \r\n      console.log('ğŸ” addApplicantè°ƒè¯•: å‡†å¤‡æ·»åŠ æ–°æŠ¥åäºº:', newApplicant)\r\n      this.applicants.push(newApplicant)\r\n      console.log('ğŸ” addApplicantè°ƒè¯•: æ·»åŠ å®Œæˆï¼Œå½“å‰applicants:', this.applicants)\r\n      \r\n      this.saveDraft()\r\n      console.log('ğŸ” addApplicantè°ƒè¯•: ä¿å­˜è‰ç¨¿å®Œæˆ')\r\n    },\r\n    \r\n    removeApplicant(index) {\r\n      this.applicants.splice(index, 1)\r\n      this.saveDraft()\r\n    },\r\n    \r\n    openApplicantDialog(index) {\r\n      console.log('ğŸ” æ‰“å¼€æŠ¥åäººå¼¹çª—è°ƒè¯•: index =', index)\r\n      console.log('ğŸ” æ‰“å¼€æŠ¥åäººå¼¹çª—è°ƒè¯•: applicants[', index, '] =', this.applicants[index])\r\n      \r\n      this.editIndex = index\r\n      this.editApplicant = { ...this.applicants[index] }\r\n      \r\n      console.log('ğŸ” æ‰“å¼€æŠ¥åäººå¼¹çª—è°ƒè¯•: editIndex =', this.editIndex)\r\n      console.log('ğŸ” æ‰“å¼€æŠ¥åäººå¼¹çª—è°ƒè¯•: editApplicant =', this.editApplicant)\r\n      \r\n      this.$refs.popup.open()\r\n    },\r\n    \r\n    saveApplicant() {\r\n      console.log('ğŸ” ä¿å­˜æŠ¥åäººè°ƒè¯•: å¼€å§‹ä¿å­˜æŠ¥åäººä¿¡æ¯')\r\n      console.log('ğŸ” ä¿å­˜æŠ¥åäººè°ƒè¯•: editIndex =', this.editIndex)\r\n      console.log('ğŸ” ä¿å­˜æŠ¥åäººè°ƒè¯•: editApplicant =', this.editApplicant)\r\n      \r\n      if (!this.editApplicant.name) {\r\n        uni.showToast({\r\n          title: 'è¯·è¾“å…¥å§“å',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      if (!this.editApplicant.gender) {\r\n        uni.showToast({\r\n          title: 'è¯·é€‰æ‹©æ€§åˆ«',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      if (!this.editApplicant.phone) {\r\n        uni.showToast({\r\n          title: 'è¯·è¾“å…¥è”ç³»ç”µè¯',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      if (!this.editApplicant.lunarBirthday) {\r\n        uni.showToast({\r\n          title: 'è¯·é€‰æ‹©å†œå†ç”Ÿæ—¥',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      if (!this.editApplicant.birthTime) {\r\n        uni.showToast({\r\n          title: 'è¯·é€‰æ‹©å‡ºç”Ÿæ—¶è¾°',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      if (!this.editApplicant.address) {\r\n        uni.showToast({\r\n          title: 'è¯·è¾“å…¥å¸¸ä½åœ°å€',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      // ä¿å­˜å‰æ£€æŸ¥\r\n      console.log('ğŸ” ä¿å­˜æŠ¥åäººè°ƒè¯•: ä¿å­˜å‰çš„applicants =', this.applicants)\r\n      \r\n      // ç¡®ä¿æ•°æ®æ­£ç¡®ä¿å­˜ - ä½¿ç”¨Vue.setç¡®ä¿å“åº”å¼æ›´æ–°\r\n      const savedApplicant = { ...this.editApplicant }\r\n      \r\n      // ä½¿ç”¨Vue.setç¡®ä¿å“åº”å¼æ›´æ–°\r\n      if (this.$set) {\r\n        this.$set(this.applicants, this.editIndex, savedApplicant)\r\n      } else {\r\n        // å¦‚æœ$setä¸å¯ç”¨ï¼Œä½¿ç”¨æ•°ç»„æ–¹æ³•\r\n        this.applicants.splice(this.editIndex, 1, savedApplicant)\r\n      }\r\n      \r\n      // ä¿å­˜åæ£€æŸ¥\r\n      console.log('ğŸ” ä¿å­˜æŠ¥åäººè°ƒè¯•: ä¿å­˜åçš„applicants =', this.applicants)\r\n      console.log('ğŸ” ä¿å­˜æŠ¥åäººè°ƒè¯•: ä¿å­˜åçš„applicants[', this.editIndex, '] =', this.applicants[this.editIndex])\r\n      console.log('ğŸ” ä¿å­˜æŠ¥åäººè°ƒè¯•: ä¿å­˜çš„æ•°æ® =', savedApplicant)\r\n      \r\n      // å¼ºåˆ¶è§¦å‘å“åº”å¼æ›´æ–°\r\n      this.$forceUpdate()\r\n      \r\n      this.closePopup()\r\n      this.saveDraft()\r\n      \r\n      // å†æ¬¡éªŒè¯ä¿å­˜ç»“æœ\r\n      setTimeout(() => {\r\n        console.log('ğŸ” ä¿å­˜æŠ¥åäººè°ƒè¯•: å»¶è¿ŸéªŒè¯ - applicants =', this.applicants)\r\n        console.log('ğŸ” ä¿å­˜æŠ¥åäººè°ƒè¯•: å»¶è¿ŸéªŒè¯ - applicants[', this.editIndex, '] =', this.applicants[this.editIndex])\r\n        \r\n        // æ˜¾ç¤ºæˆåŠŸæç¤º\r\n        uni.showToast({\r\n          title: 'æŠ¥åäººä¿¡æ¯ä¿å­˜æˆåŠŸ',\r\n          icon: 'success',\r\n          duration: 2000\r\n        })\r\n      }, 100)\r\n      \r\n      console.log('ğŸ” ä¿å­˜æŠ¥åäººè°ƒè¯•: ä¿å­˜å®Œæˆï¼Œå½“å‰applicants =', this.applicants)\r\n    },\r\n    \r\n    closePopup() {\r\n      this.$refs.popup.close()\r\n      this.editIndex = -1\r\n      this.editApplicant = {}\r\n    },\r\n    \r\n    // é€‰æ‹©å™¨äº‹ä»¶\r\n    onGenderChange(e) {\r\n      this.editApplicant.gender = this.genderOptions[e.detail.value]\r\n    },\r\n    \r\n    onLunarBirthdayChange(e) {\r\n      this.editApplicant.lunarBirthday = e.detail.value\r\n    },\r\n    \r\n    onBirthTimeChange(e) {\r\n      this.editApplicant.birthTime = this.birthTimeOptions[e.detail.value]\r\n    },\r\n    \r\n    async onProjectChange(e) {\r\n      this.jointProjectIdx = e.detail.value\r\n      this.currentProject = this.jointProjects[e.detail.value]\r\n      console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: ç”¨æˆ·é€‰æ‹©é¡¹ç›®:', this.currentProject.name, 'é¡¹ç›®ID:', this.currentProject._id, 'é¡¹ç›®åˆ†ç±»:', this.currentProject.category)\r\n      console.log('ğŸ” å§»ç¼˜å’Œåˆæ³•ä¼šè°ƒè¯•: é€‰æ‹©é¡¹ç›®åï¼ŒcurrentProject:', this.currentProject)\r\n      console.log('ğŸ” å§»ç¼˜å’Œåˆæ³•ä¼šè°ƒè¯•: é¡¹ç›®åˆ†ç±»æ£€æŸ¥:', this.currentProject.category === 'å§»ç¼˜å’Œåˆ')\r\n      \r\n      this.selectedDateIdx = -1\r\n      this.selectedDate = ''\r\n      this.chaoduType = ''\r\n      this.deceasedList = []\r\n      \r\n      // åŠ è½½é€‰ä¸­é¡¹ç›®çš„ä»£åŠç‰©å“\r\n      if (this.currentProject && this.currentProject._id) {\r\n        console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: å¼€å§‹åŠ è½½æ–°é¡¹ç›®çš„ä»£åŠç‰©å“é…ç½®')\r\n        await this.loadItemsConfig(this.currentProject._id)\r\n      } else {\r\n        console.log('ğŸ” ä»£åŠç‰©å“è°ƒè¯•: é¡¹ç›®IDæ— æ•ˆï¼Œç¦ç”¨ä»£åŠç‰©å“æ¨¡å—')\r\n        this.showItems = false\r\n        this.items = []\r\n      }\r\n      \r\n      this.saveDraft()\r\n    },\r\n    \r\n    onDateChange(e) {\r\n      this.selectedDateIdx = e.detail.value\r\n      this.selectedDate = this.currentProject.dates[e.detail.value]\r\n      this.saveDraft()\r\n    },\r\n    \r\n    onChaoduTypeChange(e) {\r\n      this.chaoduType = this.chaoduTypes[e.detail.value]\r\n      this.saveDraft()\r\n    },\r\n    \r\n    // è¶…åº¦æ³•ä¼šç‰¹æ®ŠåŠŸèƒ½\r\n    addDeceased() {\r\n      if (this.deceasedList.length >= 5) {\r\n        uni.showToast({\r\n          title: 'æœ€å¤šåªèƒ½æ·»åŠ 5ä½å·²æ•…äº²äºº',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      this.deceasedList.push({\r\n        name: '',\r\n        lunarBirthday: '',\r\n        deathDate: '',\r\n        relation: ''\r\n      })\r\n      this.saveDraft()\r\n    },\r\n    \r\n    removeDeceased(index) {\r\n      this.deceasedList.splice(index, 1)\r\n      this.saveDraft()\r\n    },\r\n    \r\n    openDeceasedDialog(index) {\r\n      this.editDeceasedIndex = index\r\n      this.editDeceased = { ...this.deceasedList[index] }\r\n      this.$refs.deceasedPopup.open()\r\n    },\r\n    \r\n    saveDeceased() {\r\n      if (!this.editDeceased.name) {\r\n        uni.showToast({\r\n          title: 'è¯·è¾“å…¥å§“å',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      if (!this.editDeceased.relation) {\r\n        uni.showToast({\r\n          title: 'è¯·é€‰æ‹©å…³ç³»',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      this.deceasedList[this.editDeceasedIndex] = { ...this.editDeceased }\r\n      this.closeDeceasedPopup()\r\n      this.saveDraft()\r\n    },\r\n    \r\n    closeDeceasedPopup() {\r\n      this.$refs.deceasedPopup.close()\r\n      this.editDeceasedIndex = -1\r\n      this.editDeceased = {}\r\n    },\r\n    \r\n    onDeceasedLunarBirthdayChange(e) {\r\n      this.editDeceased.lunarBirthday = e.detail.value\r\n    },\r\n    \r\n    onDeceasedDeathDateChange(e) {\r\n      this.editDeceased.deathDate = e.detail.value\r\n    },\r\n    \r\n    onDeceasedRelationChange(e) {\r\n      this.editDeceased.relation = this.deceasedRelationOptions[e.detail.value]\r\n    },\r\n    \r\n    // é…å¶ä¿¡æ¯ç›¸å…³æ–¹æ³•\r\n    openSpouseDialog() {\r\n      this.editSpouse = { ...this.spouse }\r\n      this.$refs.spousePopup.open()\r\n    },\r\n    \r\n    saveSpouse() {\r\n      this.spouse = { ...this.editSpouse }\r\n      this.closeSpousePopup()\r\n      this.saveDraft()\r\n    },\r\n    \r\n    closeSpousePopup() {\r\n      this.$refs.spousePopup.close()\r\n      this.editSpouse = {}\r\n    },\r\n    \r\n    onSpouseGenderChange(e) {\r\n      this.editSpouse.gender = this.genderOptions[e.detail.value]\r\n    },\r\n    \r\n    onSpouseLunarBirthdayChange(e) {\r\n      this.editSpouse.lunarBirthday = e.detail.value\r\n    },\r\n    \r\n    onSpouseBirthTimeChange(e) {\r\n      this.editSpouse.birthTime = this.birthTimeOptions[e.detail.value]\r\n    },\r\n    \r\n    // éªŒè¯æ–¹æ³•\r\n    validateName() {\r\n      if (this.editApplicant.name && this.editApplicant.name.length < 2) {\r\n        uni.showToast({\r\n          title: 'å§“åè‡³å°‘2ä¸ªå­—ç¬¦',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n    \r\n    validatePhone() {\r\n      if (this.editApplicant.phone && !/^1[3-9]\\d{9}$/.test(this.editApplicant.phone)) {\r\n        uni.showToast({\r\n          title: 'è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n    \r\n    // æ£€æŸ¥å¹¶æ¸…é™¤æ—§æ•°æ®\r\n    checkAndClearOldData() {\r\n      try {\r\n        // æ£€æŸ¥æ˜¯å¦æœ‰æ—§çš„è®¢å•æ•°æ®\r\n        const oldOrderData = uni.getStorageSync('joint_fahui_order')\r\n        if (oldOrderData) {\r\n          // æ£€æŸ¥æ•°æ®æ˜¯å¦æ¥è‡ªå½“å‰ä¼šè¯ï¼ˆé¿å…æ¸…é™¤åˆšå¡«å†™çš„æ•°æ®ï¼‰\r\n          const currentTime = new Date().getTime()\r\n          const dataTime = oldOrderData.createTime || 0\r\n          \r\n          // å¦‚æœæ•°æ®æ˜¯5åˆ†é’Ÿå†…çš„ï¼Œä¸æç¤ºæ¸…é™¤\r\n          if (currentTime - dataTime < 5 * 60 * 1000) {\r\n            console.log('ğŸ” æ£€æµ‹åˆ°æœ€è¿‘çš„è®¢å•æ•°æ®ï¼Œä¸æç¤ºæ¸…é™¤')\r\n            return\r\n          }\r\n          \r\n          console.log('ğŸ” å‘ç°æ—§çš„è®¢å•æ•°æ®ï¼Œè¯¢é—®æ˜¯å¦æ¸…é™¤')\r\n          uni.showModal({\r\n            title: 'æç¤º',\r\n            content: 'æ£€æµ‹åˆ°ä¹‹å‰çš„æŠ¥åæ•°æ®ï¼Œæ˜¯å¦æ¸…é™¤é‡æ–°å¡«å†™ï¼Ÿ',\r\n            success: (res) => {\r\n              if (res.confirm) {\r\n                // æ¸…é™¤æ—§æ•°æ®\r\n                uni.removeStorageSync('joint_fahui_order')\r\n                uni.removeStorageSync('joint_fahui_confirm')\r\n                uni.removeStorageSync('joint_fahui_order_id')\r\n                console.log('âœ… æ—§æ•°æ®å·²æ¸…é™¤')\r\n                uni.showToast({\r\n                  title: 'æ•°æ®å·²æ¸…é™¤ï¼Œè¯·é‡æ–°å¡«å†™',\r\n                  icon: 'success'\r\n                })\r\n              }\r\n            }\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.error('æ£€æŸ¥æ—§æ•°æ®å¤±è´¥:', error)\r\n      }\r\n    },\r\n    \r\n    // æ•°æ®æŒä¹…åŒ–\r\n    saveDraft() {\r\n      console.log('ğŸ” ä¿å­˜è‰ç¨¿è°ƒè¯•: å¼€å§‹ä¿å­˜è‰ç¨¿')\r\n      console.log('ğŸ” ä¿å­˜è‰ç¨¿è°ƒè¯•: applicants =', this.applicants)\r\n      \r\n      const draft = {\r\n        applicants: this.applicants,\r\n        jointProjectIdx: this.jointProjectIdx,\r\n        selectedDateIdx: this.selectedDateIdx,\r\n        selectedDate: this.selectedDate,\r\n        spouse: this.spouse,\r\n        chaoduType: this.chaoduType,\r\n        deceasedList: this.deceasedList,\r\n        items: this.items,\r\n        receiver: this.receiver\r\n      }\r\n      \r\n      console.log('ğŸ” ä¿å­˜è‰ç¨¿è°ƒè¯•: å‡†å¤‡ä¿å­˜çš„è‰ç¨¿æ•°æ® =', draft)\r\n      \r\n      try {\r\n        uni.setStorageSync('joint_fahui_draft', draft)\r\n        console.log('ğŸ” ä¿å­˜è‰ç¨¿è°ƒè¯•: è‰ç¨¿ä¿å­˜æˆåŠŸ')\r\n        \r\n        // éªŒè¯ä¿å­˜ç»“æœ\r\n        const savedDraft = uni.getStorageSync('joint_fahui_draft')\r\n        console.log('ğŸ” ä¿å­˜è‰ç¨¿è°ƒè¯•: éªŒè¯ä¿å­˜ç»“æœ =', savedDraft)\r\n        console.log('ğŸ” ä¿å­˜è‰ç¨¿è°ƒè¯•: éªŒè¯ä¿å­˜çš„applicants =', savedDraft?.applicants)\r\n      } catch (error) {\r\n        console.error('ğŸ” ä¿å­˜è‰ç¨¿è°ƒè¯•: ä¿å­˜è‰ç¨¿å¤±è´¥:', error)\r\n      }\r\n    },\r\n    \r\n    loadDraft() {\r\n      try {\r\n        console.log('ğŸ” åŠ è½½è‰ç¨¿è°ƒè¯•: å¼€å§‹åŠ è½½è‰ç¨¿...')\r\n        const oldShowReceiver = this.showReceiver\r\n        \r\n        const draft = uni.getStorageSync('joint_fahui_draft')\r\n        console.log('ğŸ” åŠ è½½è‰ç¨¿è°ƒè¯•: ä»å­˜å‚¨ä¸­è·å–çš„è‰ç¨¿æ•°æ® =', draft)\r\n        \r\n        if (draft) {\r\n          console.log('ğŸ” åŠ è½½è‰ç¨¿è°ƒè¯•: è‰ç¨¿ä¸­çš„applicants =', draft.applicants)\r\n          \r\n          this.applicants = draft.applicants || []\r\n          this.jointProjectIdx = draft.jointProjectIdx || -1\r\n          this.selectedDateIdx = draft.selectedDateIdx || -1\r\n          this.selectedDate = draft.selectedDate || ''\r\n          this.spouse = draft.spouse || { name: '', gender: '', lunarBirthday: '', birthTime: '' }\r\n          this.chaoduType = draft.chaoduType || ''\r\n          this.deceasedList = draft.deceasedList || []\r\n          this.items = draft.items || []\r\n          this.receiver = draft.receiver || { name: '', phone: '', address: '' }\r\n          \r\n          if (this.jointProjectIdx !== -1 && this.jointProjects.length > 0) {\r\n            this.currentProject = this.jointProjects[this.jointProjectIdx]\r\n          }\r\n          \r\n          console.log('ğŸ” åŠ è½½è‰ç¨¿è°ƒè¯•: è‰ç¨¿åŠ è½½å®Œæˆ')\r\n          console.log('ğŸ” åŠ è½½è‰ç¨¿è°ƒè¯•: åŠ è½½åçš„applicants =', this.applicants)\r\n          console.log('ğŸ” åŠ è½½è‰ç¨¿è°ƒè¯•: è‰ç¨¿ä¸­çš„æ”¶ä»¶äººä¿¡æ¯:', this.receiver)\r\n          console.log('ğŸ” åŠ è½½è‰ç¨¿è°ƒè¯•: showReceiver åœ¨è‰ç¨¿åŠ è½½å‰å:', oldShowReceiver, '->', this.showReceiver)\r\n        } else {\r\n          console.log('ğŸ” åŠ è½½è‰ç¨¿è°ƒè¯•: æ²¡æœ‰æ‰¾åˆ°è‰ç¨¿æ•°æ®')\r\n        }\r\n      } catch (error) {\r\n        console.error('ğŸ” åŠ è½½è‰ç¨¿è°ƒè¯•: åŠ è½½è‰ç¨¿å¤±è´¥:', error)\r\n      }\r\n    },\r\n    \r\n    // è¡¨å•éªŒè¯\r\n    async validateForm() {\r\n      console.log('ğŸ” è¡¨å•éªŒè¯è°ƒè¯•: å¼€å§‹éªŒè¯è¡¨å•')\r\n      console.log('ğŸ” è¡¨å•éªŒè¯è°ƒè¯•: applicants =', this.applicants)\r\n      console.log('ğŸ” è¡¨å•éªŒè¯è°ƒè¯•: applicants.length =', this.applicants.length)\r\n      \r\n      if (this.applicants.length === 0) {\r\n        console.log('ğŸ” è¡¨å•éªŒè¯è°ƒè¯•: æ²¡æœ‰æŠ¥åäºº')\r\n        uni.showToast({\r\n          title: 'è¯·è‡³å°‘æ·»åŠ ä¸€ä½æŠ¥åäºº',\r\n          icon: 'none'\r\n        })\r\n        return false\r\n      }\r\n      \r\n      for (let i = 0; i < this.applicants.length; i++) {\r\n        const applicant = this.applicants[i]\r\n        console.log(`ğŸ” è¡¨å•éªŒè¯è°ƒè¯•: éªŒè¯ç¬¬${i + 1}ä½æŠ¥åäºº:`, applicant)\r\n        console.log(`ğŸ” è¡¨å•éªŒè¯è°ƒè¯•: ç¬¬${i + 1}ä½æŠ¥åäººå­—æ®µæ£€æŸ¥:`)\r\n        console.log(`  - name: \"${applicant.name}\" (${!!applicant.name})`)\r\n        console.log(`  - gender: \"${applicant.gender}\" (${!!applicant.gender})`)\r\n        console.log(`  - phone: \"${applicant.phone}\" (${!!applicant.phone})`)\r\n        console.log(`  - lunarBirthday: \"${applicant.lunarBirthday}\" (${!!applicant.lunarBirthday})`)\r\n        console.log(`  - birthTime: \"${applicant.birthTime}\" (${!!applicant.birthTime})`)\r\n        console.log(`  - address: \"${applicant.address}\" (${!!applicant.address})`)\r\n        \r\n        if (!applicant.name || !applicant.gender || !applicant.phone || \r\n            !applicant.lunarBirthday || !applicant.birthTime || !applicant.address) {\r\n          console.log(`ğŸ” è¡¨å•éªŒè¯è°ƒè¯•: ç¬¬${i + 1}ä½æŠ¥åäººä¿¡æ¯ä¸å®Œæ•´`)\r\n          \r\n          // æä¾›æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯\r\n          let missingFields = []\r\n          if (!applicant.name) missingFields.push('å§“å')\r\n          if (!applicant.gender) missingFields.push('æ€§åˆ«')\r\n          if (!applicant.phone) missingFields.push('ç”µè¯')\r\n          if (!applicant.lunarBirthday) missingFields.push('å†œå†ç”Ÿæ—¥')\r\n          if (!applicant.birthTime) missingFields.push('å‡ºç”Ÿæ—¶è¾°')\r\n          if (!applicant.address) missingFields.push('åœ°å€')\r\n          \r\n          uni.showModal({\r\n            title: 'ä¿¡æ¯ä¸å®Œæ•´',\r\n            content: `ç¬¬${i + 1}ä½æŠ¥åäººç¼ºå°‘ä»¥ä¸‹ä¿¡æ¯ï¼š\\n${missingFields.join('ã€')}`,\r\n            showCancel: false,\r\n            confirmText: 'çŸ¥é“äº†'\r\n          })\r\n          return false\r\n        }\r\n      }\r\n      \r\n      if (!this.currentProject) {\r\n        uni.showToast({\r\n          title: 'è¯·é€‰æ‹©æ³•ä¼šé¡¹ç›®',\r\n          icon: 'none'\r\n        })\r\n        return false\r\n      }\r\n      \r\n      if (this.currentProject.category === 'è¶…åº¦æ³•ä¼š') {\r\n        if (!this.chaoduType) {\r\n          uni.showToast({\r\n            title: 'è¯·é€‰æ‹©è¶…åº¦ç±»å‹',\r\n            icon: 'none'\r\n          })\r\n          return false\r\n        }\r\n        \r\n        if (this.deceasedList.length === 0) {\r\n          uni.showToast({\r\n            title: 'è¯·è‡³å°‘æ·»åŠ ä¸€ä½å·²æ•…äº²äºº',\r\n            icon: 'none'\r\n          })\r\n          return false\r\n        }\r\n        \r\n        for (let i = 0; i < this.deceasedList.length; i++) {\r\n          const deceased = this.deceasedList[i]\r\n          if (!deceased.name || !deceased.relation) {\r\n            uni.showToast({\r\n              title: `ç¬¬${i + 1}ä½å·²æ•…äº²äººä¿¡æ¯ä¸å®Œæ•´`,\r\n              icon: 'none'\r\n            })\r\n            return false\r\n          }\r\n        }\r\n      }\r\n      \r\n      // æ”¶ä»¶ä¿¡æ¯éªŒè¯\r\n      console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: å¼€å§‹éªŒè¯æ”¶ä»¶ä¿¡æ¯ï¼ŒshowReceiver =', this.showReceiver)\r\n      if (this.showReceiver) {\r\n        console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: æ”¶ä»¶ä¿¡æ¯æ¨¡å—å·²å¯ç”¨ï¼Œå¼€å§‹éªŒè¯')\r\n        const receiverConfig = await this.getReceiverConfig()\r\n        console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: è·å–åˆ°çš„é…ç½®:', receiverConfig)\r\n        \r\n        if (receiverConfig) {\r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: éªŒè¯æ”¶ä»¶äººå§“åï¼Œå¿…å¡«:', receiverConfig.nameRequired, 'å€¼:', this.receiver.name)\r\n          if (receiverConfig.nameRequired && !this.receiver.name.trim()) {\r\n            console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: æ”¶ä»¶äººå§“åä¸ºç©ºï¼ŒéªŒè¯å¤±è´¥')\r\n            uni.showToast({\r\n              title: 'è¯·å¡«å†™æ”¶ä»¶äººå§“å',\r\n              icon: 'none'\r\n            })\r\n            return false\r\n          }\r\n          \r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: éªŒè¯æ”¶ä»¶äººç”µè¯ï¼Œå¿…å¡«:', receiverConfig.phoneRequired, 'å€¼:', this.receiver.phone)\r\n          if (receiverConfig.phoneRequired && !this.receiver.phone.trim()) {\r\n            console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: æ”¶ä»¶äººç”µè¯ä¸ºç©ºï¼ŒéªŒè¯å¤±è´¥')\r\n            uni.showToast({\r\n              title: 'è¯·å¡«å†™æ”¶ä»¶äººç”µè¯',\r\n              icon: 'none'\r\n            })\r\n            return false\r\n          }\r\n          \r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: éªŒè¯æ”¶ä»¶åœ°å€ï¼Œå¿…å¡«:', receiverConfig.addressRequired, 'å€¼:', this.receiver.address)\r\n          if (receiverConfig.addressRequired && !this.receiver.address.trim()) {\r\n            console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: æ”¶ä»¶åœ°å€ä¸ºç©ºï¼ŒéªŒè¯å¤±è´¥')\r\n            uni.showToast({\r\n              title: 'è¯·å¡«å†™æ”¶ä»¶åœ°å€',\r\n              icon: 'none'\r\n            })\r\n            return false\r\n          }\r\n          \r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: æ”¶ä»¶ä¿¡æ¯éªŒè¯é€šè¿‡')\r\n        } else {\r\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: æœªè·å–åˆ°æ”¶ä»¶ä¿¡æ¯é…ç½®ï¼Œè·³è¿‡éªŒè¯')\r\n        }\r\n      } else {\r\n        console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯è°ƒè¯•: æ”¶ä»¶ä¿¡æ¯æ¨¡å—æœªå¯ç”¨ï¼Œè·³è¿‡éªŒè¯')\r\n      }\r\n      \r\n      return true\r\n    },\r\n    \r\n    // ä¸‹ä¸€æ­¥\r\n    async nextStep() {\r\n      console.log('ğŸ” nextStepè°ƒè¯•: ========== å¼€å§‹æäº¤è¡¨å• ==========')\r\n      console.log('ğŸ” nextStepè°ƒè¯•: å½“å‰é¡¹ç›®:', this.currentProject)\r\n      console.log('ğŸ” nextStepè°ƒè¯•: æŠ¥åäººä¿¡æ¯:', this.applicants)\r\n      console.log('ğŸ” nextStepè°ƒè¯•: æŠ¥åäººæ•°é‡:', this.applicants.length)\r\n      console.log('ğŸ” nextStepè°ƒè¯•: é¡µé¢è·¯å¾„:', '/pages/fahui/joint/form')\r\n      \r\n      if (!(await this.validateForm())) {\r\n        return\r\n      }\r\n      \r\n      this.isSubmitting = true\r\n      \r\n      try {\r\n        // è®¡ç®—è´¹ç”¨\r\n        let activityFee = 0\r\n        let goodsFee = 0\r\n        const selectedItems = []\r\n        \r\n        // æ ¹æ®é¡¹ç›®åˆ†ç±»è®¡ç®—è´¹ç”¨\r\n        if (this.currentProject.category === 'è¶…åº¦æ³•ä¼š') {\r\n          // è¶…åº¦æ³•ä¼šæŒ‰å·²æ•…äº²äººäººæ•°æ”¶è´¹\r\n          activityFee = this.currentProject.price * this.deceasedList.length\r\n        } else {\r\n          // å…¶ä»–æ³•ä¼šæŒ‰æŠ¥åäººäººæ•°æ”¶è´¹\r\n          activityFee = this.currentProject.price * this.applicants.length\r\n        }\r\n        \r\n        if (this.showItems) {\r\n          this.items.forEach(item => {\r\n            if (item.count > 0) {\r\n              goodsFee += item.price * item.count\r\n              selectedItems.push({\r\n                name: item.name,\r\n                price: item.price,\r\n                count: item.count\r\n              })\r\n            }\r\n          })\r\n        }\r\n        \r\n        // å‡†å¤‡è®¢å•æ•°æ®\r\n        const orderData = {\r\n          type: 'joint_fahui',\r\n          projectId: this.currentProject._id,\r\n          projectName: this.currentProject.name,\r\n          projectPrice: this.currentProject.price,\r\n          selectedDate: this.selectedDate,\r\n          chaoduType: this.chaoduType,\r\n          applicants: this.applicants,\r\n          spouse: this.currentProject.category === 'å§»ç¼˜å’Œåˆ' ? this.spouse : null,\r\n          deceasedList: this.deceasedList,\r\n          selectedItems: selectedItems,\r\n          receiver: this.showReceiver ? this.receiver : null,\r\n          activityFee: activityFee,\r\n          goodsFee: goodsFee,\r\n          totalFee: activityFee + goodsFee,\r\n          applicantCount: this.currentProject.category === 'è¶…åº¦æ³•ä¼š' ? this.deceasedList.length : this.applicants.length,\r\n          createTime: new Date().getTime() // æ·»åŠ åˆ›å»ºæ—¶é—´æˆ³\r\n        }\r\n        \r\n        console.log('ğŸ” è°ƒè¯•ä¿¡æ¯ - è¡¨å•é¡µé¢æ„å»ºçš„è®¢å•æ•°æ®:', orderData)\r\n        \r\n        // è·³è½¬åˆ°ç¡®è®¤é¡µé¢ï¼Œå¹¶ä¼ é€’æ•°æ®\r\n        console.log('ğŸ“‹ å‡†å¤‡ä¼ é€’çš„è®¢å•æ•°æ®:', orderData)\r\n        \r\n        // ä¿å­˜è®¢å•æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨\r\n        jointDataManager.saveOrderData(orderData)\r\n        \r\n        // æ¸…é™¤è‰ç¨¿\r\n        jointDataManager.clearDraftData()\r\n        \r\n        // è·³è½¬åˆ°ç¡®è®¤é¡µé¢\r\n        uni.navigateTo({\r\n          url: '/pages/fahui/joint/confirm',\r\n          success: () => {\r\n            console.log('âœ… è·³è½¬åˆ°ç¡®è®¤é¡µé¢æˆåŠŸï¼Œæ•°æ®å·²ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨')\r\n          },\r\n          fail: (err) => {\r\n            console.error('âŒ è·³è½¬åˆ°ç¡®è®¤é¡µé¢å¤±è´¥:', err)\r\n            uni.showToast({\r\n              title: 'é¡µé¢è·³è½¬å¤±è´¥',\r\n              icon: 'none'\r\n            })\r\n          }\r\n        })\r\n        \r\n      } catch (error) {\r\n        console.error('æäº¤å¤±è´¥:', error)\r\n        uni.showToast({\r\n          title: 'æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n          icon: 'none'\r\n        })\r\n      } finally {\r\n        this.isSubmitting = false\r\n      }\r\n    },\r\n    \r\n    // è°ƒè¯•æ•°æ®æ–¹æ³•\r\n    debugData() {\r\n      console.log('ğŸ” è°ƒè¯• - å½“å‰è¡¨å•æ•°æ®:')\r\n      console.log('  - æŠ¥åäºº:', this.applicants)\r\n      console.log('  - å½“å‰é¡¹ç›®:', this.currentProject)\r\n      console.log('  - ä»£åŠç‰©å“:', this.items)\r\n      console.log('  - æ”¶ä»¶ä¿¡æ¯:', this.receiver)\r\n      \r\n      const debugInfo = jointDataManager.getDebugInfo()\r\n      console.log('  - æ•°æ®ç®¡ç†å™¨è°ƒè¯•ä¿¡æ¯:', debugInfo)\r\n      \r\n      // ç”Ÿæˆæµ‹è¯•æ•°æ®å¹¶ä¿å­˜\r\n      const testData = jointDataManager.generateTestData()\r\n      console.log('âœ… æµ‹è¯•æ•°æ®å·²ç”Ÿæˆ:', testData)\r\n    },\r\n    \r\n    // è°ƒè¯•æŠ¥åäººæ•°æ®\r\n    debugApplicants() {\r\n      console.log('ğŸ” è°ƒè¯•æŠ¥åäººæ•°æ®:')\r\n      console.log('  - applicantsæ•°ç»„:', this.applicants)\r\n      console.log('  - applicantsé•¿åº¦:', this.applicants.length)\r\n      \r\n      this.applicants.forEach((applicant, index) => {\r\n        console.log(`  - æŠ¥åäºº${index + 1}:`, applicant)\r\n        console.log(`    - name: \"${applicant.name}\" (${!!applicant.name})`)\r\n        console.log(`    - gender: \"${applicant.gender}\" (${!!applicant.gender})`)\r\n        console.log(`    - phone: \"${applicant.phone}\" (${!!applicant.phone})`)\r\n        console.log(`    - lunarBirthday: \"${applicant.lunarBirthday}\" (${!!applicant.lunarBirthday})`)\r\n        console.log(`    - birthTime: \"${applicant.birthTime}\" (${!!applicant.birthTime})`)\r\n        console.log(`    - address: \"${applicant.address}\" (${!!applicant.address})`)\r\n      })\r\n      \r\n      // æ£€æŸ¥æœ¬åœ°å­˜å‚¨\r\n      try {\r\n        const draft = uni.getStorageSync('joint_fahui_draft')\r\n        console.log('  - æœ¬åœ°å­˜å‚¨çš„è‰ç¨¿æ•°æ®:', draft)\r\n        console.log('  - æœ¬åœ°å­˜å‚¨çš„applicants:', draft?.applicants)\r\n      } catch (error) {\r\n        console.error('  - è¯»å–æœ¬åœ°å­˜å‚¨å¤±è´¥:', error)\r\n      }\r\n      \r\n      // æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ç»™ç”¨æˆ·\r\n      let message = `æŠ¥åäººæ•°æ®è°ƒè¯•ä¿¡æ¯ï¼š\\n\\n`\r\n      message += `å½“å‰æŠ¥åäººæ•°é‡: ${this.applicants.length}\\n\\n`\r\n      \r\n      this.applicants.forEach((applicant, index) => {\r\n        message += `æŠ¥åäºº${index + 1}:\\n`\r\n        message += `  å§“å: ${applicant.name || 'æœªå¡«å†™'}\\n`\r\n        message += `  æ€§åˆ«: ${applicant.gender || 'æœªé€‰æ‹©'}\\n`\r\n        message += `  ç”µè¯: ${applicant.phone || 'æœªå¡«å†™'}\\n`\r\n        message += `  å†œå†ç”Ÿæ—¥: ${applicant.lunarBirthday || 'æœªé€‰æ‹©'}\\n`\r\n        message += `  å‡ºç”Ÿæ—¶è¾°: ${applicant.birthTime || 'æœªé€‰æ‹©'}\\n`\r\n        message += `  åœ°å€: ${applicant.address || 'æœªå¡«å†™'}\\n\\n`\r\n      })\r\n      \r\n      uni.showModal({\r\n        title: 'æŠ¥åäººæ•°æ®è°ƒè¯•',\r\n        content: message,\r\n        showCancel: true,\r\n        cancelText: 'çŸ¥é“äº†',\r\n        confirmText: 'å¼ºåˆ¶åˆ·æ–°æ•°æ®',\r\n        success: (res) => {\r\n          if (res.confirm) {\r\n            this.forceRefreshData()\r\n          }\r\n        }\r\n      })\r\n    },\r\n    \r\n    // å¼ºåˆ¶åˆ·æ–°æ•°æ®\r\n    forceRefreshData() {\r\n      console.log('ğŸ” å¼ºåˆ¶åˆ·æ–°æ•°æ®: å¼€å§‹åˆ·æ–°')\r\n      \r\n      // é‡æ–°åŠ è½½è‰ç¨¿æ•°æ®\r\n      this.loadDraft()\r\n      \r\n      // å¼ºåˆ¶æ›´æ–°è§†å›¾\r\n      this.$forceUpdate()\r\n      \r\n      // æ˜¾ç¤ºåˆ·æ–°ç»“æœ\r\n      setTimeout(() => {\r\n        console.log('ğŸ” å¼ºåˆ¶åˆ·æ–°æ•°æ®: åˆ·æ–°åçš„applicants =', this.applicants)\r\n        \r\n        uni.showToast({\r\n          title: 'æ•°æ®å·²åˆ·æ–°',\r\n          icon: 'success',\r\n          duration: 2000\r\n        })\r\n      }, 500)\r\n    },\r\n    \r\n    // å¿«é€Ÿä¿®å¤æ•°æ®\r\n    quickFix() {\r\n      console.log('ğŸ” å¿«é€Ÿä¿®å¤: å¼€å§‹ä¿®å¤æ•°æ®')\r\n      \r\n      // æ£€æŸ¥å¹¶ä¿®å¤applicantsæ•°ç»„\r\n      if (!this.applicants || this.applicants.length === 0) {\r\n        console.log('ğŸ” å¿«é€Ÿä¿®å¤: applicantsä¸ºç©ºï¼Œé‡æ–°åˆå§‹åŒ–')\r\n        this.applicants = [{\r\n          name: '',\r\n          gender: '',\r\n          phone: '',\r\n          lunarBirthday: '',\r\n          birthTime: '',\r\n          address: ''\r\n        }]\r\n      } else {\r\n        console.log('ğŸ” å¿«é€Ÿä¿®å¤: æ£€æŸ¥ç°æœ‰æŠ¥åäººæ•°æ®')\r\n        // ç¡®ä¿æ¯ä¸ªæŠ¥åäººéƒ½æœ‰å®Œæ•´çš„å­—æ®µ\r\n        this.applicants = this.applicants.map(applicant => ({\r\n          name: applicant.name || '',\r\n          gender: applicant.gender || '',\r\n          phone: applicant.phone || '',\r\n          lunarBirthday: applicant.lunarBirthday || '',\r\n          birthTime: applicant.birthTime || '',\r\n          address: applicant.address || ''\r\n        }))\r\n      }\r\n      \r\n      // å¼ºåˆ¶æ›´æ–°\r\n      this.$forceUpdate()\r\n      \r\n      // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨\r\n      this.saveDraft()\r\n      \r\n      console.log('ğŸ” å¿«é€Ÿä¿®å¤: ä¿®å¤å®Œæˆï¼Œå½“å‰applicants =', this.applicants)\r\n      \r\n      uni.showModal({\r\n        title: 'å¿«é€Ÿä¿®å¤å®Œæˆ',\r\n        content: 'æ•°æ®å·²ä¿®å¤ï¼Œè¯·é‡æ–°å¡«å†™æŠ¥åäººä¿¡æ¯å¹¶ä¿å­˜ã€‚',\r\n        showCancel: false,\r\n        confirmText: 'çŸ¥é“äº†'\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.form-bg {\r\n  min-height: 100vh;\r\n  background: linear-gradient(180deg, #e0eaff 0%, #f8f8f8 100%);\r\n  padding-bottom: 120rpx;\r\n}\r\n\r\n.loading-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100vh;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  border: 6rpx solid #f3f3f3;\r\n  border-top: 6rpx solid #667eea;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.loading-text {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n}\r\n\r\n.form-container {\r\n  padding: 24rpx;\r\n}\r\n\r\n.form-title {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  text-align: center;\r\n  margin-bottom: 24rpx;\r\n}\r\n\r\n.form-help {\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 24rpx;\r\n  margin-bottom: 24rpx;\r\n  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.08);\r\n}\r\n\r\n.form-help text {\r\n  display: block;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  line-height: 1.6;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.section-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin: 32rpx 0 16rpx 0;\r\n}\r\n\r\n.section-tip {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  font-weight: normal;\r\n}\r\n\r\n.section-tip-full {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.debug-info {\r\n  background: #fff3cd;\r\n  border: 1rpx solid #ffeaa7;\r\n  border-radius: 8rpx;\r\n  padding: 16rpx;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.debug-text {\r\n  display: block;\r\n  font-size: 24rpx;\r\n  color: #856404;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.applicant-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16rpx;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.applicant-card {\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 24rpx;\r\n  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.08);\r\n}\r\n\r\n.debug-applicant {\r\n  background: #e3f2fd;\r\n  border: 1rpx solid #bbdefb;\r\n  border-radius: 4rpx;\r\n  padding: 8rpx;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.debug-applicant-text {\r\n  font-size: 20rpx;\r\n  color: #1976d2;\r\n  word-break: break-all;\r\n}\r\n\r\n.applicant-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.applicant-name {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.applicant-actions {\r\n  display: flex;\r\n  gap: 12rpx;\r\n}\r\n\r\n.mini-btn {\r\n  font-size: 20rpx;\r\n  padding: 8rpx 16rpx;\r\n  border-radius: 20rpx;\r\n  background: #667eea;\r\n  color: #fff;\r\n  border: none;\r\n}\r\n\r\n.mini-btn.danger {\r\n  background: #ff6b35;\r\n}\r\n\r\n.applicant-info-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.info-value {\r\n  color: #333;\r\n  font-weight: bold;\r\n}\r\n\r\n.add-btn {\r\n  background: #667eea;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 50rpx;\r\n  padding: 16rpx 32rpx;\r\n  font-size: 24rpx;\r\n  margin: 0 auto;\r\n  display: block;\r\n}\r\n\r\n.debug-btn {\r\n  background: #ff6b6b;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 50rpx;\r\n  padding: 16rpx 32rpx;\r\n  font-size: 24rpx;\r\n  margin: 10rpx auto 0;\r\n  display: block;\r\n}\r\n\r\n.fix-btn {\r\n  background: #28a745;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 50rpx;\r\n  padding: 16rpx 32rpx;\r\n  font-size: 24rpx;\r\n  margin: 10rpx auto 0;\r\n  display: block;\r\n}\r\n\r\n.card {\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 24rpx;\r\n  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.08);\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.picker {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20rpx 0;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.picker-label {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  margin-right: 16rpx;\r\n  min-width: 160rpx;\r\n}\r\n\r\n.picker-value {\r\n  flex: 1;\r\n  font-size: 28rpx;\r\n  color: #666;\r\n}\r\n\r\n.picker-arrow {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-left: 16rpx;\r\n}\r\n\r\n.fahui-tip {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n  margin-top: 16rpx;\r\n}\r\n\r\n.special-tip {\r\n  background: #fff3cd;\r\n  border: 1rpx solid #ffeaa7;\r\n  border-radius: 12rpx;\r\n  padding: 16rpx;\r\n  margin-bottom: 16rpx;\r\n  text-align: center;\r\n}\r\n\r\n.special-tip text {\r\n  font-size: 24rpx;\r\n  color: #856404;\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.deceased-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16rpx;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.deceased-card {\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 24rpx;\r\n  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.08);\r\n}\r\n\r\n.deceased-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.deceased-name {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.deceased-actions {\r\n  display: flex;\r\n  gap: 12rpx;\r\n}\r\n\r\n.deceased-info-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.add-icon {\r\n  font-size: 28rpx;\r\n  margin-right: 8rpx;\r\n}\r\n\r\n.add-text {\r\n  font-size: 24rpx;\r\n}\r\n\r\n.item-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 16rpx 0;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.item-row:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.item-row text {\r\n  font-size: 26rpx;\r\n  color: #333;\r\n}\r\n\r\n.item-input {\r\n  width: 120rpx;\r\n  text-align: center;\r\n  border: 1rpx solid #ddd;\r\n  border-radius: 8rpx;\r\n  padding: 8rpx;\r\n}\r\n\r\n.input {\r\n  width: 100%;\r\n  padding: 20rpx;\r\n  border: 1rpx solid #ddd;\r\n  border-radius: 12rpx;\r\n  font-size: 28rpx;\r\n  margin-bottom: 16rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.form-btn {\r\n  position: fixed;\r\n  bottom: 40rpx;\r\n  left: 24rpx;\r\n  right: 24rpx;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 50rpx;\r\n  padding: 24rpx;\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  box-shadow: 0 8rpx 32rpx rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.btn-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.btn-spinner {\r\n  width: 32rpx;\r\n  height: 32rpx;\r\n  border: 4rpx solid rgba(255,255,255,0.3);\r\n  border-top: 4rpx solid #fff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-right: 12rpx;\r\n}\r\n\r\n.popup-content {\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 32rpx;\r\n  width: 600rpx;\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.popup-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  text-align: center;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.popup-tip {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  text-align: center;\r\n  margin-bottom: 24rpx;\r\n}\r\n\r\n.popup-btns {\r\n  display: flex;\r\n  gap: 16rpx;\r\n  margin-top: 24rpx;\r\n}\r\n\r\n.popup-btn {\r\n  flex: 1;\r\n  padding: 20rpx;\r\n  border-radius: 12rpx;\r\n  font-size: 28rpx;\r\n  border: 1rpx solid #ddd;\r\n  background: #fff;\r\n  color: #666;\r\n}\r\n\r\n.popup-btn.primary {\r\n  background: #667eea;\r\n  color: #fff;\r\n  border-color: #667eea;\r\n}\r\n\r\n.debug-info {\r\n  background: #f8f9fa;\r\n  border-radius: 12rpx;\r\n  padding: 16rpx;\r\n  margin-top: 24rpx;\r\n}\r\n\r\n.debug-info text {\r\n  display: block;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.debug-btn {\r\n  margin-top: 10rpx;\r\n  background: #667eea;\r\n  color: #fff;\r\n  border: none;\r\n  padding: 10rpx 20rpx;\r\n  border-radius: 6rpx;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.spouse-info {\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.info-row {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.info-label {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  width: 160rpx;\r\n}\r\n\r\n.info-value {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  flex: 1;\r\n}\r\n\r\n.input-group {\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.input-label {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  font-weight: bold;\r\n  display: block;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.textarea {\r\n  width: 100%;\r\n  min-height: 120rpx;\r\n  padding: 20rpx;\r\n  border: 1rpx solid #ddd;\r\n  border-radius: 12rpx;\r\n  font-size: 28rpx;\r\n  background: #fff;\r\n  box-sizing: border-box;\r\n  resize: none;\r\n}\r\n</style> ","import mod from \"-!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form.vue?vue&type=style&index=0&id=4bb6e490&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form.vue?vue&type=style&index=0&id=4bb6e490&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1754022380791\n      var cssReload = require(\"C:/Users/qub/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}