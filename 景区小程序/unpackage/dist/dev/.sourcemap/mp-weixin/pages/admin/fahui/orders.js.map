{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/qub/Documents/HBuilderProjects/123/æ™¯åŒºå°ç¨‹åº/pages/admin/fahui/orders.vue?4a5e","webpack:///C:/Users/qub/Documents/HBuilderProjects/123/æ™¯åŒºå°ç¨‹åº/pages/admin/fahui/orders.vue?f4ad","webpack:///C:/Users/qub/Documents/HBuilderProjects/123/æ™¯åŒºå°ç¨‹åº/pages/admin/fahui/orders.vue?7d22","webpack:///C:/Users/qub/Documents/HBuilderProjects/123/æ™¯åŒºå°ç¨‹åº/pages/admin/fahui/orders.vue?e051","uni-app:///pages/admin/fahui/orders.vue","webpack:///C:/Users/qub/Documents/HBuilderProjects/123/æ™¯åŒºå°ç¨‹åº/pages/admin/fahui/orders.vue?0c26","webpack:///C:/Users/qub/Documents/HBuilderProjects/123/æ™¯åŒºå°ç¨‹åº/pages/admin/fahui/orders.vue?f2cf"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","uniPopup","data","fahuiType","orders","loading","statusIndex","typeIndex","statusOptions","typeOptions","showDetailIndex","showRemarkIndex","selectedOrder","currentOrderForRemark","remarkContent","inlineFahuiDate","inlineRemarkContent","fahuiDate","operator","remarkOperator","currentOrderForDate","receiverEnabled","showFahuiDatePopup","fahuiDateInput","showRemarkModal","onLoad","computed","filteredOrders","filtered","methods","goBack","uni","loadOrders","title","jointManagement","result","fahuiManagement","type","icon","console","onStatusChange","onTypeChange","getStatusClass","getStatusText","getPaymentMethodText","formatDate","viewDetail","hideDetailModal","changeStatus","duration","newStatus","orderId","status","_id","deleteOrder","content","success","res","addRemark","saveRemark","remark","orderIndex","createTime","hideRemarkModal","getReceiverConfig","onReceiverSwitchChange","value","enabled","nameRequired","phoneRequired","addressRequired","exportOrders","o","a","document","URL","openFahuiDateDialog","confirmFahuiDate","toggleDetail","toggleRemark","confirmInlineFahuiDate","saveInlineRemark","testReceiverConfig","hideFahuiDateModal"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACqC;;;AAG1F;AACoL;AACpL,gBAAgB,qLAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9JA;AAAA;AAAA;AAAA;AAAwrB,CAAgB,wpBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwT5sB;AACA;AACA;AAAA,eAEA;EACAC;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACA;IACA;MACA;IACA;IACA;IACA;EACA;EAEAC;IACAC;MACA;;MAEA;MACA;QACA;QACAC;UAAA;QAAA;MACA;;MAEA;MACA;QACA;QACAA;UAAA;QAAA;MACA;MAEA;IACA;EACA;EAEAC;IACAC;MACAC;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAD;kBAAAE;gBAAA;gBAAA,MAGA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEAC;cAAA;gBAAAC;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAGAC;kBAAAC;gBAAA;cAAA;gBAAAF;cAAA;gBAGA;kBACA;gBACA;kBACAJ;oBAAAE;oBAAAK;kBAAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAC;gBACAR;kBACAE;kBACAK;gBACA;cAAA;gBAAA;gBAEAP;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAS;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;UACA;MAAA;IAEA;IAEA;IACAC;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACA;IACA;IAEA;IACAC;MACA;QACA;QACA;QACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACAP;MACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAQ;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAT;gBACAA;gBACAA;;gBAEA;gBACAR;kBACAE;kBACAK;kBACAW;gBACA;gBAEAC;gBACAX;gBAAA;gBAGAR;kBAAAE;gBAAA;gBAAA,MAGA;kBAAA;kBAAA;gBAAA;gBACA;gBACAM;gBAAA;gBAAA,OACAL;kBACAiB;kBACAC;kBACAlC;gBACA;cAAA;gBAJAiB;gBAAA;gBAAA;cAAA;gBAMA;gBACAI;gBAAA;gBAAA,OACAH;kBACAiB;kBACAD;kBACAlC;gBACA;cAAA;gBAJAiB;cAAA;gBAOAI;gBAAA,KAEAJ;kBAAA;kBAAA;gBAAA;gBACAJ;kBACAE;kBACAK;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA,MAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAC;gBACAR;kBACAE;kBACAK;kBACAW;gBACA;cAAA;gBAAA;gBAEAlB;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAuB;MAAA;MACAvB;QACAE;QACAsB;QACAC;UAAA;YAAA;YAAA;cAAA;gBAAA;kBAAA;oBAAA,KACAC;sBAAA;sBAAA;oBAAA;oBAAA;oBAEA1B;sBAAAE;oBAAA;oBAAA,MAGA;sBAAA;sBAAA;oBAAA;oBAAA;oBAAA,OAEAC;sBAAAmB;oBAAA;kBAAA;oBAAAlB;oBAAA;oBAAA;kBAAA;oBAAA;oBAAA,OAGAC;sBAAAiB;oBAAA;kBAAA;oBAAAlB;kBAAA;oBAAA,KAGAA;sBAAA;sBAAA;oBAAA;oBACAJ;sBACAE;sBACAK;oBACA;oBACA;oBAAA;oBAAA;kBAAA;oBAAA,MAEA;kBAAA;oBAAA;oBAAA;kBAAA;oBAAA;oBAAA;oBAGAC;oBACAR;sBACAE;sBACAK;oBACA;kBAAA;oBAAA;oBAEAP;oBAAA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CAGA;UAAA;YAAA;UAAA;UAAA;QAAA;MACA;IACA;IAEA;IACA2B;MACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACA5B;kBACAE;kBACAK;gBACA;gBAAA;cAAA;gBAAA,IAGA;kBAAA;kBAAA;gBAAA;gBACAP;kBACAE;kBACAK;gBACA;gBAAA;cAAA;gBAAA;gBAIAsB;kBACAL;kBACArC;gBACA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEAgB;kBACAiB;kBACAI;kBACArC;gBACA;cAAA;gBAJAiB;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAOAC;kBACAe;kBACAS;kBACA1C;gBACA;cAAA;gBAJAiB;cAAA;gBAAA,IAMAA;kBAAA;kBAAA;gBAAA;gBAAA,MACA;cAAA;gBAEA;gBACA0B;kBAAA;gBAAA;gBACA;kBACA;oBACA;kBACA;kBACA;oBAAAC;kBAAA;gBACA;gBACA;gBACA/B;kBACAE;kBACAK;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAC;gBACAR;kBACAE;kBACAK;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAyB;MACA;MACA;MACA;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAzB;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBACA;gBACAA;gBAAA;gBAAA,OACAL;cAAA;gBAAAC;gBAAA;gBAAA;cAAA;gBAEA;gBACAI;gBAAA;gBAAA,OACAH;cAAA;gBAAAD;cAAA;gBAEAI;gBACA;kBACA;kBACAA;gBACA;kBACA;kBACAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA0B;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBACA3B;gBAAA;gBAAA,MAIA;kBAAA;kBAAA;gBAAA;gBACA;gBACAA;gBAAA;gBAAA,OACAL;kBACAiC;kBACAC;kBACAC;kBACAC;gBACA;cAAA;gBALAnC;gBAAA;gBAAA;cAAA;gBAOA;gBACAI;gBAAA;gBAAA,OACAH;kBACA+B;gBACA;cAAA;gBAFAhC;cAAA;gBAKAI;gBAEA;kBACA;kBACAR;oBAAAE;oBAAAK;kBAAA;kBACAC;gBACA;kBACAA;kBACAR;oBAAAE;oBAAAK;kBAAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAC;gBACAR;kBAAAE;kBAAAK;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAiC;MAAA;MACA;MACA,eACA,uLACA;MACA;QAAA,QACAC,oBACAA,2CACAA,4DACAA,kEACAA;UAAA;QAAA,mBACAA;UAAA;QAAA,mBACAA,gDACAA,kDACAA,oBACAA;UAAA;QAAA,mBACAA;UAAA;QAAA,mBACAA,sDACAA,wDACAA,4DACAA,6BACA,8CACAA,+CACAA,qDACAA,mBACAA,mBACAA,uDACA,gCACAA,8GACAA;UAAA;QAAA,kBACA;MAAA;MACA;MACA;QAAA;UAAA;QAAA;MAAA;MACA;MACA;QAAAnC;MAAA;MACA;MACA;MACAoC;MACAA;MACAC;MACAD;MACAC;MACAC;MACA5C;QAAAE;QAAAK;MAAA;IACA;IACAsC;MACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAEA9C;kBAAAE;gBAAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEAC;kBACAiB;kBACAC;kBACAnC;kBACAC;gBACA;cAAA;gBALAiB;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAQAC;kBACAiB;kBACAD;kBACAnC;kBACAC;gBACA;cAAA;gBALAiB;cAAA;gBAAA,KAOAA;kBAAA;kBAAA;gBAAA;gBACAJ;kBAAAE;kBAAAK;gBAAA;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA,MAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAP;kBAAAE;kBAAAK;gBAAA;cAAA;gBAAA;gBAEAP;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA+C;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAEAjD;kBAAAE;gBAAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEAC;kBACAiB;kBACAC;kBACAnC;kBACAC;gBACA;cAAA;gBALAiB;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAQAC;kBACAiB;kBACAD;kBACAnC;kBACAC;gBACA;cAAA;gBALAiB;cAAA;gBAAA,KAOAA;kBAAA;kBAAA;gBAAA;gBACAJ;kBAAAE;kBAAAK;gBAAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA,MAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAP;kBAAAE;kBAAAK;gBAAA;cAAA;gBAAA;gBAEAP;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAkD;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACAlD;kBAAAE;kBAAAK;gBAAA;gBAAA;cAAA;gBAAA,IAGA;kBAAA;kBAAA;gBAAA;gBACAP;kBAAAE;kBAAAK;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,MAKA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEAJ;kBACAiB;kBACAI;kBACArC;gBACA;cAAA;gBAJAiB;gBAAA;gBAAA;cAAA;gBAMA;gBACAyB;kBAAAL;gBAAA;gBAAA;gBAAA,OACAnB;kBACAe;kBACAS;kBACA1C;gBACA;cAAA;gBAJAiB;cAAA;gBAOA;kBACA;kBACA;kBACAJ;oBAAAE;oBAAAK;kBAAA;gBACA;kBACAP;oBAAAE;oBAAAK;kBAAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAC;gBACAR;kBAAAE;kBAAAK;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA4C;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAnD;kBAAAE;gBAAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBACA;gBACAM;gBAAA;gBAAA,OACAL;cAAA;gBAAAC;gBACAI;gBACA;kBACAR;oBAAAE;oBAAAK;kBAAA;gBACA;kBACAP;oBAAAE;oBAAAK;kBAAA;gBACA;gBAAA;gBAAA;cAAA;gBAEA;gBACAC;gBAAA;gBAAA,OACAH;cAAA;gBAAAD;gBACAI;gBACA;kBACAR;oBAAAE;oBAAAK;kBAAA;gBACA;kBACAP;oBAAAE;oBAAAK;kBAAA;gBACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAC;gBACAR;kBAAAE;kBAAAK;gBAAA;cAAA;gBAAA;gBAEAP;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAoD;MACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACh7BA;AAAA;AAAA;AAAA;AAAqgC,CAAgB,q7BAAG,EAAC,C;;;;;;;;;;;ACAzhC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/admin/fahui/orders.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/admin/fahui/orders.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./orders.vue?vue&type=template&id=6f9cf068&scoped=true&\"\nvar renderjs\nimport script from \"./orders.vue?vue&type=script&lang=js&\"\nexport * from \"./orders.vue?vue&type=script&lang=js&\"\nimport style0 from \"./orders.vue?vue&type=style&index=0&id=6f9cf068&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f9cf068\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/admin/fahui/orders.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orders.vue?vue&type=template&id=6f9cf068&scoped=true&\"","var components\ntry {\n  components = {\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. æ’æŸ¥ç»„ä»¶åç§°æ‹¼å†™æ˜¯å¦æ­£ç¡®\")\n    console.error(\n      \"2. æ’æŸ¥ç»„ä»¶æ˜¯å¦ç¬¦åˆ easycom è§„èŒƒï¼Œæ–‡æ¡£ï¼šhttps://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. è‹¥ç»„ä»¶ä¸ç¬¦åˆ easycom è§„èŒƒï¼Œéœ€æ‰‹åŠ¨å¼•å…¥ï¼Œå¹¶åœ¨ components ä¸­æ³¨å†Œè¯¥ç»„ä»¶\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.filteredOrders, function (order, index) {\n    var $orig = _vm.__get_orig(order)\n    var m0 = _vm.getStatusText(order.status)\n    var g0 =\n      order.participantName ||\n      (order.applicants &&\n        order.applicants\n          .map(function (a) {\n            return a.name\n          })\n          .join(\"ã€\")) ||\n      \"-\"\n    var m1 = _vm.getStatusText(order.status)\n    var m2 = order.payTime ? _vm.formatDate(order.payTime) : null\n    var g1 = order.goods && order.goods.length\n    var g2 = g1\n      ? order.goods\n          .map(function (g) {\n            return g.name + \"Ã—\" + g.qty\n          })\n          .join(\"ï¼Œ\")\n      : null\n    var m3 =\n      _vm.showDetailIndex === index && order.payTime\n        ? _vm.formatDate(order.payTime)\n        : null\n    var m4 =\n      _vm.showDetailIndex === index ? _vm.getStatusText(order.status) : null\n    var g3 =\n      _vm.showRemarkIndex === index\n        ? order.adminRemarks && order.adminRemarks.length\n        : null\n    var l0 =\n      _vm.showRemarkIndex === index && g3\n        ? _vm.__map(order.adminRemarks, function (r, i) {\n            var $orig = _vm.__get_orig(r)\n            var m5 = _vm.formatDate(r.createTime)\n            return {\n              $orig: $orig,\n              m5: m5,\n            }\n          })\n        : null\n    return {\n      $orig: $orig,\n      m0: m0,\n      g0: g0,\n      m1: m1,\n      m2: m2,\n      g1: g1,\n      g2: g2,\n      m3: m3,\n      m4: m4,\n      g3: g3,\n      l0: l0,\n    }\n  })\n  var m6 = _vm.selectedOrder\n    ? _vm.formatDate(_vm.selectedOrder.createTime)\n    : null\n  var m7 = _vm.selectedOrder ? _vm.formatDate(_vm.selectedOrder.payTime) : null\n  var m8 = _vm.selectedOrder\n    ? _vm.getStatusText(_vm.selectedOrder.status)\n    : null\n  var g4 = _vm.selectedOrder\n    ? _vm.selectedOrder.applicants && _vm.selectedOrder.applicants.length\n    : null\n  var g5 = _vm.selectedOrder\n    ? _vm.selectedOrder.deceasedList && _vm.selectedOrder.deceasedList.length\n    : null\n  var g6 = _vm.selectedOrder\n    ? _vm.selectedOrder.goods && _vm.selectedOrder.goods.length\n    : null\n  var g7 = _vm.selectedOrder\n    ? _vm.selectedOrder.adminRemarks &&\n      _vm.selectedOrder.adminRemarks.length > 0\n    : null\n  var l2 =\n    _vm.selectedOrder && g7\n      ? _vm.__map(_vm.selectedOrder.adminRemarks, function (remark, index) {\n          var $orig = _vm.__get_orig(remark)\n          var m9 = _vm.formatDate(remark.createTime)\n          return {\n            $orig: $orig,\n            m9: m9,\n          }\n        })\n      : null\n  var g8 = _vm.selectedOrder\n    ? _vm.selectedOrder.logs && _vm.selectedOrder.logs.length\n    : null\n  var l3 =\n    _vm.selectedOrder && g8\n      ? _vm.__map(_vm.selectedOrder.logs, function (log, idx) {\n          var $orig = _vm.__get_orig(log)\n          var m10 = _vm.formatDate(log.time)\n          return {\n            $orig: $orig,\n            m10: m10,\n          }\n        })\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.showFahuiDatePopup = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1,\n        m6: m6,\n        m7: m7,\n        m8: m8,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n        g7: g7,\n        l2: l2,\n        g8: g8,\n        l3: l3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orders.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orders.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"admin-container\">\n    <view class=\"header\">\n      <view class=\"back-btn\" @click=\"goBack\">\n        <text class=\"back-icon\">â†</text>\n        <text class=\"back-text\">è¿”å›</text>\n      </view>\n      <view class=\"title\">{{ fahuiType === 'joint' ? 'åˆå›æ³•ä¼š' : 'ä¸“åœºæ³•ä¼š' }}è®¢å•ç®¡ç†</view>\n      <view class=\"refresh-btn\" @click=\"loadOrders\">\n        <text class=\"refresh-icon\">ğŸ”„</text>\n        <text class=\"refresh-text\">åˆ·æ–°</text>\n      </view>\n      <button class=\"export-btn\" @click=\"exportOrders\">å¯¼å‡ºè®¢å•</button>\n    </view>\n\n    <!-- æ”¶ä»¶ä¿¡æ¯æ¨¡å—çŠ¶æ€æ  -->\n    <view class=\"module-status-bar\">\n      <text>æ”¶ä»¶ä¿¡æ¯æ¨¡å—ï¼š</text>\n      <text :style=\"{color: receiverEnabled ? '#52c41a' : '#ff4d4f'}\">\n        {{ receiverEnabled ? 'å·²å¯ç”¨' : 'æœªå¯ç”¨' }}\n      </text>\n      <switch :checked=\"receiverEnabled\" @change=\"onReceiverSwitchChange\" style=\"margin-left: 24rpx;\" />\n      <button class=\"set-btn\" @click=\"testReceiverConfig\">æµ‹è¯•é…ç½®</button>\n    </view>\n\n    <!-- ç­›é€‰æ  -->\n    <view class=\"filter-bar\">\n      <view class=\"filter-item\">\n        <text class=\"filter-label\">çŠ¶æ€ï¼š</text>\n        <picker @change=\"onStatusChange\" :value=\"statusIndex\" :range=\"statusOptions\">\n          <view class=\"picker-text\">{{ statusOptions[statusIndex] }}</view>\n        </picker>\n      </view>\n      <view class=\"filter-item\">\n        <text class=\"filter-label\">ç±»å‹ï¼š</text>\n        <picker @change=\"onTypeChange\" :value=\"typeIndex\" :range=\"typeOptions\">\n          <view class=\"picker-text\">{{ typeOptions[typeIndex] }}</view>\n        </picker>\n      </view>\n    </view>\n\n    <!-- è®¢å•åˆ—è¡¨ -->\n    <view class=\"order-list\">\n      <view v-for=\"(order, index) in filteredOrders\" :key=\"order._id\" class=\"order-item\">\n        <view class=\"order-header\">\n          <view class=\"order-id\">è®¢å•å·ï¼š{{ order.orderNo || order._id }}</view>\n          <view class=\"order-status\" :class=\"order.status === 'å¾…ç¡®è®¤' ? 'status-pending' : order.status === 'å·²ç¡®è®¤' ? 'status-confirmed' : order.status === 'å·²å–æ¶ˆ' ? 'status-cancelled' : 'status-default'\">\n            {{ getStatusText(order.status) }}\n          </view>\n        </view>\n        \n        <view class=\"order-content\">\n          <view class=\"order-info\">\n            <view class=\"info-row\">\n              <text class=\"info-label\">æ³•ä¼šåç§°ï¼š</text>\n              <text class=\"info-value\">{{ order.fahuiName || (order.fahuiProject && order.fahuiProject.name) || '-' }}</text>\n            </view>\n            <view class=\"info-row\">\n              <text class=\"info-label\">æŠ¥åäººï¼š</text>\n              <text class=\"info-value\">{{ order.participantName || (order.applicants && order.applicants.map(a=>a.name).join('ã€')) || '-' }}</text>\n            </view>\n            <view class=\"info-row\">\n              <text class=\"info-label\">é‡‘é¢ï¼š</text>\n              <text class=\"info-value price\">Â¥{{ order.amount || order.totalFee || 0 }}</text>\n            </view>\n            <view class=\"info-row\">\n              <text class=\"info-label\">çŠ¶æ€ï¼š</text>\n              <text class=\"info-value\">{{ getStatusText(order.status) }}</text>\n            </view>\n            <view class=\"info-row\">\n              <text class=\"info-label\">æ”¯ä»˜æ—¶é—´ï¼š</text>\n              <text class=\"info-value\">{{ order.payTime ? formatDate(order.payTime) : '-' }}</text>\n            </view>\n            <view class=\"info-row\" v-if=\"order.spouse && order.spouse.name\">\n              <text class=\"info-label\">é…å¶ï¼š</text>\n              <text class=\"info-value\">{{ order.spouse.name }}</text>\n            </view>\n            <view class=\"info-row\" v-if=\"order.chaoduType\">\n              <text class=\"info-label\">è¶…åº¦ç±»å‹ï¼š</text>\n              <text class=\"info-value\">{{ order.chaoduType }}</text>\n            </view>\n            <view class=\"info-row\" v-if=\"order.goods && order.goods.length\">\n              <text class=\"info-label\">ä»£åŠç‰©å“ï¼š</text>\n              <text class=\"info-value\">{{ order.goods.map(g => g.name + 'Ã—' + g.qty).join('ï¼Œ') }}</text>\n            </view>\n            <view class=\"info-row\" v-if=\"order.receiver && order.receiver.name\">\n              <text class=\"info-label\">æ”¶ä»¶äººï¼š</text>\n              <text class=\"info-value\">{{ order.receiver.name }}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"order-actions\">\n          <button class=\"action-btn detail-btn\" @click=\"viewDetail(order)\">è¯¦æƒ…</button>\n          <button class=\"action-btn status-btn\" @click=\"changeStatus(order)\" v-if=\"order.status === 'å¾…ç¡®è®¤'\">\n            ç¡®è®¤\n          </button>\n          <button class=\"action-btn confirm-date-btn\" v-if=\"order.status === 'å¾…ç¡®è®¤'\" @click=\"openFahuiDateDialog(order)\">ä¸“åœºæ—¥æœŸç¡®è®¤</button>\n          <button class=\"action-btn remark-btn\" @click=\"addRemark(order)\">å¤‡æ³¨</button>\n          <button class=\"action-btn delete-btn\" @click=\"deleteOrder(order._id)\">åˆ é™¤</button>\n        </view>\n        \n        <!-- ä¸“åœºæ³•ä¼šæ—¥æœŸç¡®è®¤å¼¹çª— -->\n        <uni-popup ref=\"fahuiDateModal\" type=\"center\">\n          <view class=\"modal-content\">\n            <view class=\"modal-header\">\n              <text class=\"modal-title\">ä¸“åœºæ³•ä¼šæ—¥æœŸç¡®è®¤</text>\n              <text class=\"modal-close\" @click=\"hideFahuiDateModal\">Ã—</text>\n            </view>\n            \n            <view class=\"modal-body\">\n              <view class=\"form-group\">\n                <text class=\"form-label\">ä¸“åœºæ³•ä¼šå…·ä½“æ—¥æœŸ *</text>\n                <input v-model=\"fahuiDate\" type=\"date\" class=\"form-input\" required />\n              </view>\n              \n              <view class=\"form-group\">\n                <text class=\"form-label\">æ“ä½œäºº</text>\n                <input v-model=\"operator\" class=\"form-input\" placeholder=\"è¯·è¾“å…¥æ“ä½œäººå§“å\" />\n              </view>\n              \n              <view class=\"modal-footer\">\n                <button class=\"modal-btn cancel-btn\" @click=\"hideFahuiDateModal\">å–æ¶ˆ</button>\n                <button class=\"modal-btn confirm-btn\" @click=\"confirmFahuiDate\">ç¡®è®¤æ­¤ä¸“åœºæ³•ä¼šå·²ç¡®è®¤</button>\n              </view>\n            </view>\n          </view>\n        </uni-popup>\n        \n\n        <!-- è¯¦æƒ…å†…è”åŒº -->\n        <view v-if=\"showDetailIndex === index\" class=\"inline-detail\">\n          <view class=\"detail-section\">\n            <view class=\"detail-title\">è®¢å•è¯¦æƒ…</view>\n            <view class=\"detail-item\"><text class=\"detail-label\">æ³•ä¼šåç§°ï¼š</text><text class=\"detail-value\">{{ order.fahuiName || (order.fahuiProject && order.fahuiProject.name) || '-' }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">æ³•ä¼šé¡¹ç›®ï¼š</text><text class=\"detail-value\">{{ order.fahuiProject && order.fahuiProject.name ? order.fahuiProject.name : '-' }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">æ”¯ä»˜æ—¶é—´ï¼š</text><text class=\"detail-value\">{{ order.payTime ? formatDate(order.payTime) : '-' }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">é‡‘é¢ï¼š</text><text class=\"detail-value\">Â¥{{ order.amount || order.totalFee || 0 }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">çŠ¶æ€ï¼š</text><text class=\"detail-value\">{{ getStatusText(order.status) }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">ä¸“åœºæ³•ä¼šæ—¥æœŸï¼š</text>\n              <input v-model=\"inlineFahuiDate\" type=\"date\" class=\"form-input\" style=\"width:200rpx;display:inline-block;\" />\n              <button class=\"modal-btn confirm-btn\" style=\"margin-left:16rpx;\" @click=\"confirmInlineFahuiDate(order)\">ç¡®è®¤</button>\n            </view>\n            <!-- å¯è¡¥å……æ›´å¤šå­—æ®µ -->\n          </view>\n        </view>\n        <!-- å¤‡æ³¨å†…è”åŒº -->\n        <view v-if=\"showRemarkIndex === index\" class=\"inline-remark\">\n          <view class=\"detail-title\">å¤‡æ³¨</view>\n          <textarea v-model=\"inlineRemarkContent\" class=\"form-textarea\" placeholder=\"è¯·è¾“å…¥å¤‡æ³¨å†…å®¹\" maxlength=\"200\" />\n          <button class=\"modal-btn confirm-btn\" @click=\"saveInlineRemark(order)\">ä¿å­˜å¤‡æ³¨</button>\n          <view v-if=\"order.adminRemarks && order.adminRemarks.length\">\n            <view class=\"detail-title\">å†å²å¤‡æ³¨</view>\n            <view v-for=\"(r, i) in order.adminRemarks\" :key=\"'remark-' + i\" class=\"remark-item\">\n              <view class=\"remark-content\">{{ r.content }}</view>\n              <view class=\"remark-info\"><text class=\"remark-author\">{{ r.author }}</text><text class=\"remark-time\">{{ formatDate(r.createTime) }}</text></view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- è®¢å•è¯¦æƒ…å¼¹çª— -->\n    <uni-popup ref=\"detailModal\" type=\"center\">\n      <view class=\"modal-content\">\n        <view class=\"modal-header\">\n          <text class=\"modal-title\">è®¢å•è¯¦æƒ…</text>\n          <text class=\"modal-close\" @click=\"hideDetailModal\">Ã—</text>\n        </view>\n        \n        <view class=\"modal-body\" v-if=\"selectedOrder\">\n          <view class=\"detail-section\">\n            <view class=\"detail-title\">åŸºæœ¬ä¿¡æ¯</view>\n            <view class=\"detail-item\"><text class=\"detail-label\">è®¢å•å·ï¼š</text><text class=\"detail-value\">{{ selectedOrder.orderNo || selectedOrder._id }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">æ³•ä¼šåç§°ï¼š</text><text class=\"detail-value\">{{ selectedOrder.fahuiName || (selectedOrder.fahuiProject && selectedOrder.fahuiProject.name) || '-' }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">æ³•ä¼šé¡¹ç›®ï¼š</text><text class=\"detail-value\">{{ selectedOrder.fahuiProject && selectedOrder.fahuiProject.name ? selectedOrder.fahuiProject.name : '-' }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">æŠ¥åæ—¶é—´ï¼š</text><text class=\"detail-value\">{{ formatDate(selectedOrder.createTime) }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">æ”¯ä»˜æ—¶é—´ï¼š</text><text class=\"detail-value\">{{ formatDate(selectedOrder.payTime) }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">æ”¯ä»˜æ–¹å¼ï¼š</text><text class=\"detail-value\">{{ selectedOrder.paymentMethod || '-' }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">é‡‘é¢ï¼š</text><text class=\"detail-value\">Â¥{{ selectedOrder.amount || selectedOrder.totalFee || 0 }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">çŠ¶æ€ï¼š</text><text class=\"detail-value\">{{ getStatusText(selectedOrder.status) }}</text></view>\n            <view class=\"detail-item\" v-if=\"selectedOrder.remark\"><text class=\"detail-label\">å¤‡æ³¨ï¼š</text><text class=\"detail-value\">{{ selectedOrder.remark }}</text></view>\n          </view>\n          <view class=\"detail-section\" v-if=\"selectedOrder.applicants && selectedOrder.applicants.length\">\n            <view class=\"detail-title\">æŠ¥åäººä¿¡æ¯</view>\n            <view v-for=\"(applicant, idx) in selectedOrder.applicants\" :key=\"'applicant-' + idx\" class=\"applicant-detail\">\n              <view class=\"detail-item\"><text class=\"detail-label\">å§“åï¼š</text><text class=\"detail-value\">{{ applicant.name }}</text></view>\n              <view class=\"detail-item\"><text class=\"detail-label\">æ€§åˆ«ï¼š</text><text class=\"detail-value\">{{ applicant.gender }}</text></view>\n              <view class=\"detail-item\"><text class=\"detail-label\">ç”µè¯ï¼š</text><text class=\"detail-value\">{{ applicant.phone }}</text></view>\n              <view class=\"detail-item\"><text class=\"detail-label\">å†œå†ç”Ÿæ—¥ï¼š</text><text class=\"detail-value\">{{ applicant.lunarBirthday }}</text></view>\n              <view class=\"detail-item\"><text class=\"detail-label\">å‡ºç”Ÿæ—¶è¾°ï¼š</text><text class=\"detail-value\">{{ applicant.birthTime }}</text></view>\n              <view class=\"detail-item\"><text class=\"detail-label\">å¸¸ä½åœ°å€ï¼š</text><text class=\"detail-value\">{{ applicant.address }}</text></view>\n              <view style=\"height:12rpx;\"></view>\n            </view>\n          </view>\n          <view class=\"detail-section\" v-if=\"selectedOrder.spouse && selectedOrder.spouse.name\">\n            <view class=\"detail-title\">é…å¶ä¿¡æ¯</view>\n            <view class=\"detail-item\"><text class=\"detail-label\">å§“åï¼š</text><text class=\"detail-value\">{{ selectedOrder.spouse.name }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">æ€§åˆ«ï¼š</text><text class=\"detail-value\">{{ selectedOrder.spouse.gender }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">ç”µè¯ï¼š</text><text class=\"detail-value\">{{ selectedOrder.spouse.phone }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">å†œå†ç”Ÿæ—¥ï¼š</text><text class=\"detail-value\">{{ selectedOrder.spouse.lunarBirthday }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">å‡ºç”Ÿæ—¶è¾°ï¼š</text><text class=\"detail-value\">{{ selectedOrder.spouse.birthTime }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">å¸¸ä½åœ°å€ï¼š</text><text class=\"detail-value\">{{ selectedOrder.spouse.address }}</text></view>\n          </view>\n          <view class=\"detail-section\" v-if=\"selectedOrder.chaoduType\">\n            <view class=\"detail-title\">è¶…åº¦ä¿¡æ¯</view>\n            <view class=\"detail-item\"><text class=\"detail-label\">è¶…åº¦ç±»å‹ï¼š</text><text class=\"detail-value\">{{ selectedOrder.chaoduType }}</text></view>\n          </view>\n          <view class=\"detail-section\" v-if=\"selectedOrder.deceasedList && selectedOrder.deceasedList.length\">\n            <view class=\"detail-title\">å·²æ•…äº²äººä¿¡æ¯</view>\n            <view v-for=\"(d, i) in selectedOrder.deceasedList\" :key=\"'deceased-' + i\" class=\"applicant-detail\">\n              <view class=\"detail-item\"><text class=\"detail-label\">å§“åï¼š</text><text class=\"detail-value\">{{ d.name }}</text></view>\n              <view class=\"detail-item\"><text class=\"detail-label\">å…³ç³»ï¼š</text><text class=\"detail-value\">{{ d.relation }}</text></view>\n              <view class=\"detail-item\"><text class=\"detail-label\">å‡ºç”Ÿå†œå†ï¼š</text><text class=\"detail-value\">{{ d.lunarBirthday }}</text></view>\n              <view class=\"detail-item\"><text class=\"detail-label\">å»ä¸–å†œå†ï¼š</text><text class=\"detail-value\">{{ d.deathDate }}</text></view>\n            </view>\n          </view>\n          <view class=\"detail-section\" v-if=\"selectedOrder.goods && selectedOrder.goods.length\">\n            <view class=\"detail-title\">ä»£åŠç‰©å“</view>\n            <view v-for=\"(g, i) in selectedOrder.goods\" :key=\"'goods-' + i\" class=\"applicant-detail\">\n              <view class=\"detail-item\"><text class=\"detail-label\">ç‰©å“åç§°ï¼š</text><text class=\"detail-value\">{{ g.name }}</text></view>\n              <view class=\"detail-item\"><text class=\"detail-label\">æ•°é‡ï¼š</text><text class=\"detail-value\">{{ g.qty }}</text></view>\n              <view class=\"detail-item\"><text class=\"detail-label\">å•ä»·ï¼š</text><text class=\"detail-value\">Â¥{{ g.price }}</text></view>\n            </view>\n          </view>\n          <view class=\"detail-section\" v-if=\"selectedOrder.receiver && selectedOrder.receiver.name\">\n            <view class=\"detail-title\">æ”¶ä»¶ä¿¡æ¯</view>\n            <view class=\"detail-item\"><text class=\"detail-label\">æ”¶ä»¶äººï¼š</text><text class=\"detail-value\">{{ selectedOrder.receiver.name }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">è”ç³»ç”µè¯ï¼š</text><text class=\"detail-value\">{{ selectedOrder.receiver.phone }}</text></view>\n            <view class=\"detail-item\"><text class=\"detail-label\">æ”¶ä»¶åœ°å€ï¼š</text><text class=\"detail-value\">{{ selectedOrder.receiver.address }}</text></view>\n          </view>\n          \n          <view class=\"detail-section\" v-if=\"selectedOrder.adminRemarks && selectedOrder.adminRemarks.length > 0\">\n            <view class=\"detail-title\">ç®¡ç†å¤‡æ³¨</view>\n            <view v-for=\"(remark, index) in selectedOrder.adminRemarks\" :key=\"'remark-' + index\" class=\"remark-item\">\n              <view class=\"remark-content\">{{ remark.content }}</view>\n              <view class=\"remark-info\">\n                <text class=\"remark-author\">{{ remark.author }}</text>\n                <text class=\"remark-time\">{{ formatDate(remark.createTime) }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"detail-section\" v-if=\"selectedOrder.logs && selectedOrder.logs.length\">\n            <view class=\"detail-title\">æ“ä½œæ—¥å¿—</view>\n            <view v-for=\"(log, idx) in selectedOrder.logs\" :key=\"'log-' + idx\" class=\"remark-item\">\n              <view class=\"remark-content\">{{ log.action }}</view>\n              <view class=\"remark-info\">\n                <text class=\"remark-author\">{{ log.operator }}</text>\n                <text class=\"remark-time\">{{ formatDate(log.time) }}</text>\n              </view>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"modal-footer\">\n          <button class=\"modal-btn confirm-btn\" @click=\"hideDetailModal\">å…³é—­</button>\n        </view>\n      </view>\n    </uni-popup>\n\n    <!-- å¤‡æ³¨å¼¹çª— -->\n    <uni-popup :show=\"showRemarkModal\" type=\"center\" @close=\"hideRemarkModal\">\n      <view class=\"modal-content\">\n        <view class=\"modal-header\">\n          <text class=\"modal-title\">æ·»åŠ å¤‡æ³¨</text>\n          <text class=\"modal-close\" @click=\"hideRemarkModal\">Ã—</text>\n        </view>\n        \n        <view class=\"modal-body\">\n          <view class=\"form-group\">\n            <text class=\"form-label\">å¤‡æ³¨å†…å®¹ *</text>\n            <textarea v-model=\"remarkContent\" placeholder=\"è¯·è¾“å…¥å¤‡æ³¨å†…å®¹\" class=\"form-textarea\" maxlength=\"500\" />\n          </view>\n          \n          <view class=\"form-group\">\n            <text class=\"form-label\">æ“ä½œäºº</text>\n            <input v-model=\"remarkOperator\" class=\"form-input\" placeholder=\"è¯·è¾“å…¥æ“ä½œäººå§“å\" />\n          </view>\n        </view>\n        \n        <view class=\"modal-footer\">\n          <button class=\"modal-btn\" @click=\"hideRemarkModal\">å–æ¶ˆ</button>\n          <button class=\"modal-btn confirm-btn\" @click=\"saveRemark\">ä¿å­˜</button>\n        </view>\n      </view>\n    </uni-popup>\n\n    <!-- ä¸“åœºæ³•ä¼šæ—¥æœŸç¡®è®¤å¼¹çª— -->\n    <uni-popup ref=\"fahuiDatePopup\" v-model=\"showFahuiDatePopup\" type=\"center\">\n      <view class=\"modal-content\">\n        <view class=\"modal-header\">\n          <text class=\"modal-title\">ä¸“åœºæ³•ä¼šæ—¥æœŸç¡®è®¤</text>\n          <text class=\"modal-close\" @click=\"showFahuiDatePopup=false\">Ã—</text>\n        </view>\n        <view class=\"modal-body\">\n          <view class=\"form-group\">\n            <text class=\"form-label\">ä¸“åœºæ³•ä¼šæ—¥æœŸ</text>\n            <input v-model=\"fahuiDateInput\" type=\"date\" class=\"form-input\" />\n          </view>\n        </view>\n        <view class=\"modal-footer\">\n          <button class=\"modal-btn confirm-btn\" :disabled=\"!fahuiDateInput\" @click=\"confirmFahuiDate\">ç¡®è®¤</button>\n        </view>\n      </view>\n    </uni-popup>\n  </view>\n</template>\n\n<script>\nimport uniPopup from '@/components/uni-popup/uni-popup.vue'\n\n// å¯¼å…¥äº‘å¯¹è±¡\nconst fahuiManagement = uniCloud.importObject('fahui-management')\nconst jointManagement = uniCloud.importObject('joint-management')\n\nexport default {\n  components: { uniPopup },\n  data() {\n    return {\n      fahuiType: 'special',\n      orders: [],\n      loading: false,\n      statusIndex: 0,\n      typeIndex: 0,\n      statusOptions: ['å…¨éƒ¨', 'å¾…ç¡®è®¤', 'å·²ç¡®è®¤', 'å·²å–æ¶ˆ'],\n      typeOptions: ['å…¨éƒ¨', 'ä¸“åœºæ³•ä¼š', 'åˆå›æ³•ä¼š'],\n      showDetailIndex: -1,\n      showRemarkIndex: -1,\n      selectedOrder: null,\n      currentOrderForRemark: null,\n      remarkContent: '',\n      inlineFahuiDate: '',\n      inlineRemarkContent: '',\n      fahuiDate: '', // æ–°å¢ä¸“åœºæ³•ä¼šæ—¥æœŸè¾“å…¥æ¡†\n      operator: '', // æ–°å¢æ“ä½œäººè¾“å…¥æ¡†\n      remarkOperator: '', // æ–°å¢å¤‡æ³¨æ“ä½œäººè¾“å…¥æ¡†\n      currentOrderForDate: null, // æ–°å¢å½“å‰æ“ä½œçš„è®¢å•\n      // æ·»åŠ ç¼ºå¤±çš„å“åº”å¼å±æ€§\n      receiverEnabled: false,\n      showFahuiDatePopup: false,\n      fahuiDateInput: '',\n      showRemarkModal: false,\n    }\n  },\n  \n  onLoad(options) {\n    // è·å–æ³•ä¼šç±»å‹å‚æ•°\n    if (options.type) {\n      this.fahuiType = options.type;\n    }\n    this.loadOrders()\n    this.getReceiverConfig()\n  },\n  \n  computed: {\n    filteredOrders() {\n      let filtered = [...this.orders]\n      \n      // æŒ‰çŠ¶æ€ç­›é€‰\n      if (this.statusIndex > 0) {\n        const status = this.statusOptions[this.statusIndex]\n        filtered = filtered.filter(item => item.status === status)\n      }\n      \n      // æŒ‰ç±»å‹ç­›é€‰\n      if (this.typeIndex > 0) {\n        const type = this.typeOptions[this.typeIndex]\n        filtered = filtered.filter(item => item.fahuiType === type)\n      }\n      \n      return filtered\n    }\n  },\n  \n  methods: {\n    goBack() {\n      uni.navigateBack()\n    },\n    \n    // åŠ è½½è®¢å•åˆ—è¡¨\n    async loadOrders() {\n      try {\n        uni.showLoading({ title: 'åŠ è½½ä¸­...' })\n        \n        let result\n        if (this.fahuiType === 'joint') {\n          // åˆå›æ³•ä¼šè®¢å•\n          result = await jointManagement.getOrders()\n        } else {\n          // ä¸“åœºæ³•ä¼šè®¢å•\n          result = await fahuiManagement.getOrders({ type: this.fahuiType })\n        }\n        \n        if (result.success) {\n          this.orders = result.data || []\n        } else {\n          uni.showToast({ title: result.message || 'åŠ è½½å¤±è´¥', icon: 'none' })\n        }\n      } catch (error) {\n        console.error('åŠ è½½è®¢å•å¤±è´¥ï¼š', error)\n        uni.showToast({\n          title: 'åŠ è½½å¤±è´¥',\n          icon: 'none'\n        })\n      } finally {\n        uni.hideLoading()\n      }\n    },\n    \n    // çŠ¶æ€ç­›é€‰å˜åŒ–\n    onStatusChange(e) {\n      this.statusIndex = e.detail.value\n    },\n    \n    // ç±»å‹ç­›é€‰å˜åŒ–\n    onTypeChange(e) {\n      this.typeIndex = e.detail.value\n    },\n    \n    // è·å–çŠ¶æ€æ ·å¼\n    getStatusClass(status) {\n      switch (status) {\n        case 'å¾…ç¡®è®¤':\n          return 'status-pending'\n        case 'å·²ç¡®è®¤':\n          return 'status-confirmed'\n        case 'å·²å–æ¶ˆ':\n          return 'status-cancelled'\n        default:\n          return 'status-default'\n      }\n    },\n    \n    // è·å–çŠ¶æ€æ–‡æœ¬\n    getStatusText(status) {\n      // çŠ¶æ€æ˜ å°„\n      const statusMap = {\n        'paid': 'å·²æ”¯ä»˜',\n        'pending': 'å¾…ç¡®è®¤',\n        'confirmed': 'å·²ç¡®è®¤',\n        'cancelled': 'å·²å–æ¶ˆ',\n        'å¾…ç¡®è®¤': 'å¾…ç¡®è®¤',\n        'å·²ç¡®è®¤': 'å·²ç¡®è®¤',\n        'å·²å–æ¶ˆ': 'å·²å–æ¶ˆ',\n        'å·²æ”¯ä»˜': 'å·²æ”¯ä»˜',\n        'å¾…æ”¯ä»˜': 'å¾…æ”¯ä»˜'\n      }\n      return statusMap[status] || status || 'æœªçŸ¥'\n    },\n    \n    // è·å–æ”¯ä»˜æ–¹å¼æ–‡æœ¬\n    getPaymentMethodText(method) {\n      const methodMap = {\n        'wechat': 'å¾®ä¿¡æ”¯ä»˜',\n        'alipay': 'æ”¯ä»˜å®',\n        'bank': 'é“¶è¡Œè½¬è´¦'\n      }\n      return methodMap[method] || method || 'æœªçŸ¥'\n    },\n    \n    // æ ¼å¼åŒ–æ—¥æœŸ\n    formatDate(date) {\n      if (!date) return ''\n      const d = new Date(date)\n      return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')} ${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`\n    },\n    \n    // æŸ¥çœ‹è¯¦æƒ…\n    viewDetail(order) {\n      this.selectedOrder = order\n      this.fahuiDateInput = order.fahuiDate || ''\n      console.log('detailModal ref:', this.$refs.detailModal)\n      if (this.$refs.detailModal && typeof this.$refs.detailModal.open === 'function') {\n        this.$refs.detailModal.open('center')\n      } else if (this.$refs.detailModal && typeof this.$refs.detailModal.show === 'function') {\n        this.$refs.detailModal.show()\n      }\n    },\n    \n    // éšè—è¯¦æƒ…å¼¹çª—\n    hideDetailModal() {\n      this.$refs.detailModal.close()\n      this.selectedOrder = null\n    },\n    \n    // æ›´æ”¹çŠ¶æ€\n    async changeStatus(order) {\n      console.log('ğŸ” ç¡®è®¤æŒ‰é’®è¢«ç‚¹å‡»ï¼Œè®¢å•ä¿¡æ¯:', order)\n      console.log('ğŸ” å½“å‰è®¢å•çŠ¶æ€:', order.status)\n      console.log('ğŸ” æ³•ä¼šç±»å‹:', this.fahuiType)\n      \n      // å…ˆæ˜¾ç¤ºä¸€ä¸ªæµ‹è¯•æç¤º\n      uni.showToast({\n        title: 'æŒ‰é’®ç‚¹å‡»æˆåŠŸ',\n        icon: 'success',\n        duration: 1000\n      })\n      \n      const newStatus = order.status === 'å¾…ç¡®è®¤' ? 'å·²ç¡®è®¤' : 'å¾…ç¡®è®¤'\n      console.log('ğŸ” æ–°çŠ¶æ€:', newStatus)\n      \n      try {\n        uni.showLoading({ title: 'æ›´æ–°ä¸­...' })\n        \n        let result\n        if (this.fahuiType === 'joint') {\n          // åˆå›æ³•ä¼šè®¢å•\n          console.log('ğŸ” è°ƒç”¨åˆå›æ³•ä¼šæ›´æ–°æ–¹æ³•')\n          result = await jointManagement.updateOrderStatus({\n            orderId: order._id,\n            status: newStatus,\n            operator: 'ç®¡ç†å‘˜'\n          })\n        } else {\n          // ä¸“åœºæ³•ä¼šè®¢å•\n          console.log('ğŸ” è°ƒç”¨ä¸“åœºæ³•ä¼šæ›´æ–°æ–¹æ³•ï¼Œè®¢å•ID:', order._id)\n          result = await fahuiManagement.updateOrderStatus({\n            _id: order._id,\n            status: newStatus,\n            operator: 'ç®¡ç†å‘˜'\n          })\n        }\n        \n        console.log('ğŸ” æ›´æ–°ç»“æœ:', result)\n        \n        if (result.success) {\n          uni.showToast({\n            title: 'çŠ¶æ€æ›´æ–°æˆåŠŸ',\n            icon: 'success'\n          })\n          this.loadOrders()\n        } else {\n          throw new Error(result.message || 'æ›´æ–°å¤±è´¥')\n        }\n      } catch (error) {\n        console.error('ğŸ” æ›´æ–°çŠ¶æ€å¤±è´¥ï¼š', error)\n        uni.showToast({\n          title: 'æ›´æ–°å¤±è´¥: ' + (error.message || error),\n          icon: 'none',\n          duration: 3000\n        })\n      } finally {\n        uni.hideLoading()\n      }\n    },\n    \n    // åˆ é™¤è®¢å•\n    deleteOrder(id) {\n      uni.showModal({\n        title: 'ç¡®è®¤åˆ é™¤',\n        content: 'ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè®¢å•å—ï¼Ÿ',\n        success: async (res) => {\n          if (res.confirm) {\n            try {\n              uni.showLoading({ title: 'åˆ é™¤ä¸­...' })\n              \n              let result\n              if (this.fahuiType === 'joint') {\n                // åˆå›æ³•ä¼šè®¢å•\n                result = await jointManagement.deleteOrder({ _id: id })\n              } else {\n                // ä¸“åœºæ³•ä¼šè®¢å•\n                result = await fahuiManagement.deleteOrder({ _id: id })\n              }\n              \n              if (result.success) {\n                uni.showToast({\n                  title: 'åˆ é™¤æˆåŠŸ',\n                  icon: 'success'\n                })\n                this.loadOrders()\n              } else {\n                throw new Error(result.message || 'åˆ é™¤å¤±è´¥')\n              }\n            } catch (error) {\n              console.error('åˆ é™¤å¤±è´¥ï¼š', error)\n              uni.showToast({\n                title: 'åˆ é™¤å¤±è´¥',\n                icon: 'none'\n              })\n            } finally {\n              uni.hideLoading()\n            }\n          }\n        }\n      })\n    },\n    \n    // æ·»åŠ å¤‡æ³¨\n    addRemark(order) {\n      this.currentOrderForRemark = order\n      this.remarkContent = ''\n      this.remarkOperator = '' // é‡ç½®å¤‡æ³¨æ“ä½œäºº\n      this.showRemarkModal = true\n    },\n    \n    // ä¿å­˜å¤‡æ³¨\n    async saveRemark() {\n      if (!this.remarkContent.trim()) {\n        uni.showToast({\n          title: 'è¯·è¾“å…¥å¤‡æ³¨å†…å®¹',\n          icon: 'none'\n        })\n        return\n      }\n      if (!this.remarkOperator.trim()) {\n        uni.showToast({\n          title: 'è¯·è¾“å…¥æ“ä½œäººå§“å',\n          icon: 'none'\n        })\n        return\n      }\n      try {\n        const remark = {\n          content: this.remarkContent,\n          operator: this.remarkOperator\n        }\n        let result\n        if (this.fahuiType === 'joint') {\n          // åˆå›æ³•ä¼šè®¢å•\n          result = await jointManagement.addOrderRemark({\n            orderId: this.currentOrderForRemark._id,\n            content: this.remarkContent,\n            operator: this.remarkOperator\n          })\n        } else {\n          // ä¸“åœºæ³•ä¼šè®¢å•\n          result = await fahuiManagement.addOrderRemark({\n            orderId: this.currentOrderForRemark._id,\n            remark: remark,\n            operator: this.remarkOperator\n          })\n        }\n        if (!result.success) {\n          throw new Error(result.message || 'æ·»åŠ å¤‡æ³¨å¤±è´¥')\n        }\n        // æ›´æ–°æœ¬åœ°æ•°æ®\n        const orderIndex = this.orders.findIndex(o => o._id === this.currentOrderForRemark._id)\n        if (orderIndex !== -1) {\n          if (!this.orders[orderIndex].adminRemarks) {\n            this.orders[orderIndex].adminRemarks = []\n          }\n          this.orders[orderIndex].adminRemarks.push({ ...remark, createTime: new Date() })\n        }\n        this.hideRemarkModal()\n        uni.showToast({\n          title: 'å¤‡æ³¨æ·»åŠ æˆåŠŸ',\n          icon: 'success'\n        })\n      } catch (error) {\n        console.error('æ·»åŠ å¤‡æ³¨å¤±è´¥ï¼š', error)\n        uni.showToast({\n          title: 'æ·»åŠ å¤‡æ³¨å¤±è´¥',\n          icon: 'none'\n        })\n      }\n    },\n    \n    // éšè—å¤‡æ³¨å¼¹çª—\n    hideRemarkModal() {\n      this.showRemarkModal = false\n      this.currentOrderForRemark = null\n      this.remarkContent = ''\n      this.remarkOperator = '' // é‡ç½®å¤‡æ³¨æ“ä½œäºº\n    },\n\n    async getReceiverConfig() {\n      try {\n        console.log('ğŸ” å¼€å§‹è·å–æ”¶ä»¶ä¿¡æ¯é…ç½®ï¼Œæ³•ä¼šç±»å‹:', this.fahuiType)\n        let result\n        if (this.fahuiType === 'joint') {\n          // åˆå›æ³•ä¼šæ”¶ä»¶ä¿¡æ¯é…ç½®\n          console.log('ğŸ” è°ƒç”¨åˆå›æ³•ä¼šæ”¶ä»¶é…ç½®')\n          result = await jointManagement.getReceiverConfig()\n        } else {\n          // ä¸“åœºæ³•ä¼šæ”¶ä»¶ä¿¡æ¯é…ç½®\n          console.log('ğŸ” è°ƒç”¨ä¸“åœºæ³•ä¼šæ”¶ä»¶é…ç½®')\n          result = await fahuiManagement.getReceiverConfig()\n        }\n        console.log('ğŸ” getReceiverConfig è¿”å›:', result)\n        if (result.success) {\n          this.receiverEnabled = !!result.data?.enabled\n          console.log('ğŸ” è®¾ç½®æ”¶ä»¶ä¿¡æ¯çŠ¶æ€ä¸º:', this.receiverEnabled)\n        } else {\n          this.receiverEnabled = false\n          console.log('ğŸ” è·å–é…ç½®å¤±è´¥ï¼Œè®¾ç½®ä¸ºé»˜è®¤çŠ¶æ€:', this.receiverEnabled)\n        }\n      } catch (e) {\n        console.error('ğŸ” è·å–æ”¶ä»¶ä¿¡æ¯é…ç½®å¼‚å¸¸:', e)\n        this.receiverEnabled = false\n      }\n    },\n    async onReceiverSwitchChange(e) {\n      const value = e.detail.value\n      console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯å¼€å…³å˜åŒ–ï¼Œæ–°å€¼:', value, 'æ³•ä¼šç±»å‹:', this.fahuiType)\n      \n      try {\n        let result\n        if (this.fahuiType === 'joint') {\n          // åˆå›æ³•ä¼šæ”¶ä»¶ä¿¡æ¯é…ç½®\n          console.log('ğŸ” æ›´æ–°åˆå›æ³•ä¼šæ”¶ä»¶é…ç½®')\n          result = await jointManagement.updateReceiverConfig({ \n            enabled: value,\n            nameRequired: true,\n            phoneRequired: true,\n            addressRequired: true\n          })\n        } else {\n          // ä¸“åœºæ³•ä¼šæ”¶ä»¶ä¿¡æ¯é…ç½®\n          console.log('ğŸ” æ›´æ–°ä¸“åœºæ³•ä¼šæ”¶ä»¶é…ç½®')\n          result = await fahuiManagement.updateReceiverConfig({ \n            enabled: value \n          })\n        }\n        \n        console.log('ğŸ” æ›´æ–°æ”¶ä»¶é…ç½®ç»“æœ:', result)\n        \n        if (result.success) {\n          this.receiverEnabled = value\n          uni.showToast({ title: value ? 'å·²å¯ç”¨' : 'å·²å…³é—­', icon: 'success' })\n          console.log('ğŸ” æ”¶ä»¶ä¿¡æ¯çŠ¶æ€æ›´æ–°æˆåŠŸ:', this.receiverEnabled)\n        } else {\n          console.error('ğŸ” æ›´æ–°æ”¶ä»¶é…ç½®å¤±è´¥:', result.message)\n          uni.showToast({ title: result.message || 'è®¾ç½®å¤±è´¥', icon: 'none' })\n        }\n      } catch (e) {\n        console.error('ğŸ” æ”¶ä»¶ä¿¡æ¯æ¨¡å—è®¾ç½®å¤±è´¥:', e)\n        uni.showToast({ title: 'è®¾ç½®å¤±è´¥', icon: 'none' })\n      }\n    },\n    exportOrders() {\n      // å¯¼å‡ºå½“å‰ç­›é€‰ç»“æœä¸ºCSV\n      const headers = [\n        'è®¢å•å·','æ³•ä¼šç±»å‹','æ³•ä¼šåç§°','æ³•ä¼šé¡¹ç›®','æŠ¥åäºº','æŠ¥åäººç”µè¯','é…å¶','é…å¶ç”µè¯','è¶…åº¦ç±»å‹','å·²æ•…äº²äºº','ä»£åŠç‰©å“','æ”¶ä»¶äºº','æ”¶ä»¶äººç”µè¯','æ”¶ä»¶åœ°å€','é‡‘é¢','æ”¯ä»˜æ–¹å¼','æ”¯ä»˜æ—¶é—´','æŠ¥åæ—¶é—´','ä¸“åœºæ³•ä¼šæ—¥æœŸ','ç¡®è®¤äºº','ç¡®è®¤æ—¶é—´','çŠ¶æ€','å¤‡æ³¨','æ“ä½œæ—¥å¿—'\n      ]\n      const rows = this.filteredOrders.map(o => [\n        o.orderNo || o._id,\n        o.fahuiType === 'joint' ? 'åˆå›æ³•ä¼š' : 'ä¸“åœºæ³•ä¼š',\n        o.fahuiName || (o.fahuiProject && o.fahuiProject.name) || '',\n        o.fahuiProject && o.fahuiProject.name ? o.fahuiProject.name : '',\n        (o.applicants && o.applicants.length) ? o.applicants.map(a => a.name).join('ï¼›') : '',\n        (o.applicants && o.applicants.length) ? o.applicants.map(a => a.phone).join('ï¼›') : '',\n        o.spouse && o.spouse.name ? o.spouse.name : '',\n        o.spouse && o.spouse.phone ? o.spouse.phone : '',\n        o.chaoduType || '',\n        (o.deceasedList && o.deceasedList.length) ? o.deceasedList.map(d => `${d.name}/${d.relation}`).join('ï¼›') : '',\n        (o.goods && o.goods.length) ? o.goods.map(g => `${g.name}Ã—${g.qty}`).join('ï¼›') : '',\n        o.receiver && o.receiver.name ? o.receiver.name : '',\n        o.receiver && o.receiver.phone ? o.receiver.phone : '',\n        o.receiver && o.receiver.address ? o.receiver.address : '',\n        o.amount || o.totalFee || 0,\n        this.getPaymentMethodText(o.paymentMethod),\n        o.payTime ? this.formatDate(o.payTime) : '',\n        o.createTime ? this.formatDate(o.createTime) : '',\n        o.fahuiDate || '',\n        o.confirmBy || '',\n        o.confirmTime ? this.formatDate(o.confirmTime) : '',\n        this.getStatusText(o.status),\n        (o.adminRemarks && o.adminRemarks.length) ? o.adminRemarks[o.adminRemarks.length-1].content : (o.remark || ''),\n        (o.logs && o.logs.length) ? o.logs.map(l => `${this.formatDate(l.time)}-${l.operator}-${l.action}`).join('ï¼›') : ''\n      ])\n      // åŠ  BOM å…¼å®¹ Excel\n      const csv = '\\uFEFF' + [headers, ...rows].map(row => row.map(v => `\"${(v||'').toString().replace(/\"/g,'\"\"')}\"`).join(',')).join('\\n')\n      // åˆ›å»ºä¸‹è½½\n      const blob = new Blob([csv], { type: 'text/csv' })\n      const url = URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = 'fahui_orders.csv'\n      document.body.appendChild(a)\n      a.click()\n      document.body.removeChild(a)\n      URL.revokeObjectURL(url)\n      uni.showToast({ title: 'å¯¼å‡ºæˆåŠŸ', icon: 'success' })\n    },\n    openFahuiDateDialog(order) {\n      this.currentOrderForDate = order\n      this.fahuiDateInput = order.fahuiDate || ''\n      this.showFahuiDatePopup = true\n    },\n    async confirmFahuiDate() {\n      if (!this.currentOrderForDate || !this.fahuiDateInput) return\n      try {\n        uni.showLoading({ title: 'ç¡®è®¤ä¸­...' })\n        let result\n        if (this.fahuiType === 'joint') {\n          // åˆå›æ³•ä¼šè®¢å•\n          result = await jointManagement.updateOrderStatus({\n            orderId: this.currentOrderForDate._id,\n            status: 'å·²ç¡®è®¤',\n            fahuiDate: this.fahuiDateInput,\n            operator: 'ç®¡ç†å‘˜'\n          })\n        } else {\n          // ä¸“åœºæ³•ä¼šè®¢å•\n          result = await fahuiManagement.updateOrderStatus({\n            _id: this.currentOrderForDate._id,\n            status: 'å·²ç¡®è®¤',\n            fahuiDate: this.fahuiDateInput,\n            operator: 'ç®¡ç†å‘˜'\n          })\n        }\n        if (result.success) {\n          uni.showToast({ title: 'ä¸“åœºæ³•ä¼šå·²ç¡®è®¤', icon: 'success' })\n          this.showFahuiDatePopup = false\n          this.loadOrders()\n        } else {\n          throw new Error(result.message || 'ç¡®è®¤å¤±è´¥')\n        }\n      } catch (error) {\n        uni.showToast({ title: 'ç¡®è®¤å¤±è´¥', icon: 'none' })\n      } finally {\n        uni.hideLoading()\n      }\n    },\n    toggleDetail(idx) {\n      if (this.showDetailIndex === idx) {\n        this.showDetailIndex = -1\n      } else {\n        this.showDetailIndex = idx\n        this.inlineFahuiDate = this.filteredOrders[idx].fahuiDate || ''\n      }\n    },\n    toggleRemark(idx) {\n      if (this.showRemarkIndex === idx) {\n        this.showRemarkIndex = -1\n      } else {\n        this.showRemarkIndex = idx\n        this.inlineRemarkContent = ''\n      }\n    },\n    async confirmInlineFahuiDate(order) {\n      if (!order || !this.inlineFahuiDate) return\n      try {\n        uni.showLoading({ title: 'ç¡®è®¤ä¸­...' })\n        let result\n        if (this.fahuiType === 'joint') {\n          // åˆå›æ³•ä¼šè®¢å•\n          result = await jointManagement.updateOrderStatus({\n            orderId: order._id,\n            status: 'å·²ç¡®è®¤',\n            fahuiDate: this.inlineFahuiDate,\n            operator: 'ç®¡ç†å‘˜'\n          })\n        } else {\n          // ä¸“åœºæ³•ä¼šè®¢å•\n          result = await fahuiManagement.updateOrderStatus({\n            _id: order._id,\n            status: 'å·²ç¡®è®¤',\n            fahuiDate: this.inlineFahuiDate,\n            operator: 'ç®¡ç†å‘˜'\n          })\n        }\n        if (result.success) {\n          uni.showToast({ title: 'ä¸“åœºæ³•ä¼šå·²ç¡®è®¤', icon: 'success' })\n          this.loadOrders()\n        } else {\n          throw new Error(result.message || 'ç¡®è®¤å¤±è´¥')\n        }\n      } catch (error) {\n        uni.showToast({ title: 'ç¡®è®¤å¤±è´¥', icon: 'none' })\n      } finally {\n        uni.hideLoading()\n      }\n    },\n    async saveInlineRemark(order) {\n      if (!this.inlineRemarkContent.trim()) {\n        uni.showToast({ title: 'è¯·è¾“å…¥å¤‡æ³¨å†…å®¹', icon: 'none' })\n        return\n      }\n      if (!this.remarkOperator.trim()) {\n        uni.showToast({ title: 'è¯·è¾“å…¥æ“ä½œäººå§“å', icon: 'none' })\n        return\n      }\n      try {\n        let result\n        if (this.fahuiType === 'joint') {\n          // åˆå›æ³•ä¼šè®¢å•\n          result = await jointManagement.addOrderRemark({\n            orderId: order._id,\n            content: this.inlineRemarkContent,\n            operator: this.remarkOperator\n          })\n        } else {\n          // ä¸“åœºæ³•ä¼šè®¢å•\n          const remark = { content: this.inlineRemarkContent }\n          result = await fahuiManagement.addOrderRemark({\n            orderId: order._id,\n            remark: remark,\n            operator: this.remarkOperator\n          })\n        }\n        \n        if (result.success) {\n          this.inlineRemarkContent = ''\n          this.loadOrders()\n          uni.showToast({ title: 'å¤‡æ³¨æ·»åŠ æˆåŠŸ', icon: 'success' })\n        } else {\n          uni.showToast({ title: result.message || 'æ·»åŠ å¤‡æ³¨å¤±è´¥', icon: 'none' })\n        }\n      } catch (error) {\n        console.error('æ·»åŠ å¤‡æ³¨å¤±è´¥ï¼š', error)\n        uni.showToast({ title: 'æ·»åŠ å¤‡æ³¨å¤±è´¥', icon: 'none' })\n      }\n    },\n    async testReceiverConfig() {\n      try {\n        uni.showLoading({ title: 'æµ‹è¯•ä¸­...' })\n        let result\n        if (this.fahuiType === 'joint') {\n          // åˆå›æ³•ä¼šæ”¶ä»¶ä¿¡æ¯é…ç½®\n          console.log('ğŸ” æµ‹è¯•åˆå›æ³•ä¼šæ”¶ä»¶é…ç½®')\n          result = await jointManagement.getReceiverConfig()\n          console.log('ğŸ” åˆå›æ³•ä¼šæ”¶ä»¶é…ç½®æµ‹è¯•ç»“æœ:', result)\n          if (result.success) {\n            uni.showToast({ title: 'åˆå›æ³•ä¼šæ”¶ä»¶é…ç½®å·²è·å–', icon: 'success' })\n          } else {\n            uni.showToast({ title: 'åˆå›æ³•ä¼šæ”¶ä»¶é…ç½®è·å–å¤±è´¥', icon: 'none' })\n          }\n        } else {\n          // ä¸“åœºæ³•ä¼šæ”¶ä»¶ä¿¡æ¯é…ç½®\n          console.log('ğŸ” æµ‹è¯•ä¸“åœºæ³•ä¼šæ”¶ä»¶é…ç½®')\n          result = await fahuiManagement.getReceiverConfig()\n          console.log('ğŸ” ä¸“åœºæ³•ä¼šæ”¶ä»¶é…ç½®æµ‹è¯•ç»“æœ:', result)\n          if (result.success) {\n            uni.showToast({ title: 'ä¸“åœºæ³•ä¼šæ”¶ä»¶é…ç½®å·²è·å–', icon: 'success' })\n          } else {\n            uni.showToast({ title: 'ä¸“åœºæ³•ä¼šæ”¶ä»¶é…ç½®è·å–å¤±è´¥', icon: 'none' })\n          }\n        }\n      } catch (e) {\n        console.error('ğŸ” æµ‹è¯•æ”¶ä»¶ä¿¡æ¯é…ç½®å¼‚å¸¸:', e)\n        uni.showToast({ title: 'æµ‹è¯•å¤±è´¥', icon: 'none' })\n      } finally {\n        uni.hideLoading()\n      }\n    },\n    hideFahuiDateModal() {\n      this.$refs.fahuiDatePopup.close()\n      this.fahuiDate = ''\n      this.operator = ''\n    }\n  }\n}\n</script>\n\n<style scoped>\n.admin-container {\n  min-height: 100vh;\n  background: #f5f5f5;\n  padding: 0;\n}\n\n.header {\n  background: #2d8cf0;\n  color: white;\n  padding: 20rpx 30rpx;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: sticky;\n  top: 0;\n  z-index: 100;\n}\n\n.back-btn {\n  display: flex;\n  align-items: center;\n  font-size: 28rpx;\n}\n\n.back-icon {\n  font-size: 32rpx;\n  margin-right: 8rpx;\n}\n\n.title {\n  font-size: 32rpx;\n  font-weight: bold;\n}\n\n.refresh-btn {\n  display: flex;\n  align-items: center;\n  font-size: 28rpx;\n}\n\n.refresh-icon {\n  font-size: 32rpx;\n  margin-right: 8rpx;\n}\n\n.filter-bar {\n  background: white;\n  padding: 20rpx 30rpx;\n  display: flex;\n  gap: 30rpx;\n  border-bottom: 1rpx solid #eee;\n}\n\n.filter-item {\n  display: flex;\n  align-items: center;\n}\n\n.filter-label {\n  font-size: 28rpx;\n  color: #666;\n  margin-right: 10rpx;\n}\n\n.picker-text {\n  font-size: 28rpx;\n  color: #333;\n  padding: 10rpx 20rpx;\n  background: #f8f9fa;\n  border-radius: 8rpx;\n  border: 1rpx solid #ddd;\n}\n\n.order-list {\n  padding: 20rpx;\n}\n\n.order-item {\n  background: white;\n  border-radius: 12rpx;\n  padding: 30rpx;\n  margin-bottom: 20rpx;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\n}\n\n.order-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20rpx;\n}\n\n.order-id {\n  font-size: 28rpx;\n  color: #666;\n}\n\n.order-status {\n  padding: 8rpx 16rpx;\n  border-radius: 20rpx;\n  font-size: 24rpx;\n}\n\n.status-pending {\n  background: #fff7e6;\n  color: #fa8c16;\n}\n\n.status-confirmed {\n  background: #e8f5e8;\n  color: #52c41a;\n}\n\n.status-cancelled {\n  background: #fff2f0;\n  color: #ff4d4f;\n}\n\n.status-default {\n  background: #f5f5f5;\n  color: #666;\n}\n\n.order-content {\n  margin-bottom: 20rpx;\n}\n\n.order-info {\n  display: flex;\n  flex-direction: column;\n  gap: 10rpx;\n}\n\n.info-row {\n  display: flex;\n}\n\n.info-label {\n  font-size: 26rpx;\n  color: #666;\n  width: 140rpx;\n}\n\n.info-value {\n  font-size: 26rpx;\n  color: #333;\n  flex: 1;\n}\n\n.price {\n  color: #ff4d4f;\n  font-weight: bold;\n}\n\n.order-actions {\n  display: flex;\n  gap: 20rpx;\n}\n\n.action-btn {\n  flex: 1;\n  padding: 16rpx;\n  border-radius: 8rpx;\n  font-size: 28rpx;\n  border: none;\n}\n\n.detail-btn {\n  background: #1890ff;\n  color: white;\n}\n\n.status-btn {\n  background: #52c41a;\n  color: white;\n}\n\n.delete-btn {\n  background: #ff4d4f;\n  color: white;\n}\n\n.confirm-date-btn {\n  background: #2d8cf0;\n  color: #fff;\n  border-radius: 8rpx;\n  font-size: 26rpx;\n  padding: 12rpx 20rpx;\n  border: none;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 12rpx;\n  width: 600rpx;\n  max-height: 80vh;\n  overflow-y: auto;\n}\n\n.modal-header {\n  padding: 30rpx;\n  border-bottom: 1rpx solid #eee;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.modal-title {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.modal-close {\n  font-size: 40rpx;\n  color: #999;\n  cursor: pointer;\n}\n\n.modal-body {\n  padding: 30rpx;\n}\n\n.detail-section {\n  margin-bottom: 30rpx;\n}\n\n.detail-title {\n  font-size: 30rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 20rpx;\n  padding-bottom: 10rpx;\n  border-bottom: 1rpx solid #eee;\n}\n\n.detail-item {\n  display: flex;\n  margin-bottom: 15rpx;\n}\n\n.detail-label {\n  font-size: 28rpx;\n  color: #666;\n  width: 160rpx;\n}\n\n.detail-value {\n  font-size: 28rpx;\n  color: #333;\n  flex: 1;\n}\n\n.modal-footer {\n  padding: 30rpx;\n  border-top: 1rpx solid #eee;\n  display: flex;\n  gap: 20rpx;\n}\n\n.modal-btn {\n  flex: 1;\n  padding: 20rpx;\n  border-radius: 8rpx;\n  font-size: 28rpx;\n  border: none;\n}\n\n.confirm-btn {\n  background: #2d8cf0;\n  color: white;\n}\n\n.remark-btn {\n  background: #fa8c16;\n  color: white;\n}\n\n.form-group {\n  margin-bottom: 20rpx;\n}\n\n.form-label {\n  font-size: 28rpx;\n  color: #333;\n  display: block;\n  margin-bottom: 10rpx;\n}\n\n.form-input {\n  width: 100%;\n  border: 1rpx solid #e0e0e0;\n  border-radius: 8rpx;\n  padding: 20rpx;\n  font-size: 28rpx;\n  box-sizing: border-box;\n  height: 120rpx;\n  resize: none;\n}\n\n.form-textarea {\n  width: 100%;\n  border: 1rpx solid #e0e0e0;\n  border-radius: 8rpx;\n  padding: 20rpx;\n  font-size: 28rpx;\n  box-sizing: border-box;\n  min-height: 120rpx;\n  resize: vertical;\n}\n\n.remark-item {\n  background: #f8f9fa;\n  border-radius: 8rpx;\n  padding: 16rpx;\n  margin-bottom: 12rpx;\n}\n\n.remark-content {\n  font-size: 26rpx;\n  color: #333;\n  margin-bottom: 8rpx;\n}\n\n.remark-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.remark-author {\n  font-size: 24rpx;\n  color: #666;\n}\n\n.remark-time {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.module-status-bar {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n  background: #fffbe6;\n  padding: 16rpx 30rpx;\n  font-size: 28rpx;\n  margin-bottom: 10rpx;\n}\n.set-btn {\n  background: #2d8cf0;\n  color: #fff;\n  border-radius: 8rpx;\n  padding: 8rpx 20rpx;\n  font-size: 26rpx;\n  border: none;\n  margin-left: 12rpx;\n}\n.export-btn {\n  background: #52c41a;\n  color: #fff;\n  border-radius: 8rpx;\n  padding: 12rpx 24rpx;\n  font-size: 26rpx;\n  border: none;\n  margin-left: 16rpx;\n}\n.applicant-detail {\n  background: #f8f9fa;\n  border-radius: 8rpx;\n  padding: 16rpx;\n  margin-bottom: 12rpx;\n}\n\n.inline-detail, .inline-remark {\n  background: #f8f9fa;\n  border-radius: 8rpx;\n  padding: 20rpx;\n  margin-top: 16rpx;\n  border: 1rpx solid #e0e0e0;\n}\n</style> ","import mod from \"-!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orders.vue?vue&type=style&index=0&id=6f9cf068&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orders.vue?vue&type=style&index=0&id=6f9cf068&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1754022717608\n      var cssReload = require(\"C:/Users/qub/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}