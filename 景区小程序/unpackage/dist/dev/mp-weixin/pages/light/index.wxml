<view class="page-container data-v-07b48630"><view class="header-section data-v-07b48630"><image class="banner data-v-07b48630" src="{{headImage}}" mode="widthFix"></image><view class="intro-card data-v-07b48630"><view class="intro-title data-v-07b48630"><text class="icon data-v-07b48630">🕯️</text>供灯祈福</view><view class="intro-text data-v-07b48630">点亮心灯，照亮前程。在佛前供灯，不仅是对佛法的供养，更是对内心的净化与升华。
        愿您的心愿如灯光明亮，照亮人生的每一个角落。</view></view></view><view class="step-bar data-v-07b48630"><view class="step active data-v-07b48630">1. 选择供灯</view><view class="step data-v-07b48630">2. 信息确认</view><view class="step data-v-07b48630">3. 支付</view></view><view class="card data-v-07b48630"><view class="card-title data-v-07b48630"><text class="icon data-v-07b48630">🏮</text>选择灯塔<text class="required data-v-07b48630">*</text></view><view class="form-group data-v-07b48630"><picker range="{{towerOptions}}" value="{{towerIndex}}" data-event-opts="{{[['change',[['onSelectTower',['$event']]]]]}}" bindchange="__e" class="data-v-07b48630"><view class="picker data-v-07b48630"><text class="icon data-v-07b48630">🏛️</text>灯塔：<block wx:if="{{towerIndex>=0}}"><text class="data-v-07b48630">{{towerOptions[towerIndex]}}</text></block><block wx:else><text class="placeholder data-v-07b48630">请选择灯塔</text></block><text class="arrow data-v-07b48630">▼</text></view></picker><block wx:if="{{errors.towerIndex}}"><view class="error-tip data-v-07b48630">{{errors.towerIndex}}</view></block></view><block wx:if="{{towerIndex>=0}}"><view class="form-group data-v-07b48630"><picker range="{{levelOptions}}" value="{{levelIndex}}" data-event-opts="{{[['change',[['onSelectLevel',['$event']]]]]}}" bindchange="__e" class="data-v-07b48630"><view class="picker data-v-07b48630"><text class="icon data-v-07b48630">📊</text>楼层：<block wx:if="{{levelIndex>=0}}"><text class="data-v-07b48630">{{levelOptions[levelIndex]}}</text></block><block wx:else><text class="placeholder data-v-07b48630">请选择楼层</text></block><text class="arrow data-v-07b48630">▼</text></view></picker><block wx:if="{{errors.levelIndex}}"><view class="error-tip data-v-07b48630">{{errors.levelIndex}}</view></block></view></block><block wx:if="{{$root.g0}}"><view class="form-group data-v-07b48630"><picker range="{{timeOptions}}" value="{{timeIndex}}" data-event-opts="{{[['change',[['onSelectTime',['$event']]]]]}}" bindchange="__e" class="data-v-07b48630"><view class="picker data-v-07b48630"><text class="icon data-v-07b48630">⏰</text>时间：<block wx:if="{{timeIndex>=0}}"><text class="data-v-07b48630">{{timeOptions[timeIndex]}}</text></block><block wx:else><text class="placeholder data-v-07b48630">请选择时间</text></block><text class="arrow data-v-07b48630">▼</text></view></picker><block wx:if="{{errors.timeIndex}}"><view class="error-tip data-v-07b48630">{{errors.timeIndex}}</view></block></view></block></view><view class="card data-v-07b48630"><view class="card-title data-v-07b48630"><text class="icon data-v-07b48630">👤</text>供灯人信息<text class="required data-v-07b48630">*</text></view><view class="form-group data-v-07b48630"><input class="input data-v-07b48630" placeholder="请输入姓名" maxlength="10" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['form']]]]]}}" value="{{form.name}}" bindinput="__e"/><block wx:if="{{errors.name}}"><view class="error-tip data-v-07b48630">{{errors.name}}</view></block></view><view class="form-group data-v-07b48630"><input class="input data-v-07b48630" placeholder="请输入联系电话" maxlength="11" data-event-opts="{{[['input',[['__set_model',['$0','phone','$event',[]],['form']]]]]}}" value="{{form.phone}}" bindinput="__e"/><block wx:if="{{errors.phone}}"><view class="error-tip data-v-07b48630">{{errors.phone}}</view></block></view><view class="form-group data-v-07b48630"><input class="input data-v-07b48630" placeholder="请输入身份证号" maxlength="18" data-event-opts="{{[['input',[['__set_model',['$0','idCard','$event',[]],['form']]]]]}}" value="{{form.idCard}}" bindinput="__e"/><block wx:if="{{errors.idCard}}"><view class="error-tip data-v-07b48630">{{errors.idCard}}</view></block></view></view><view class="card data-v-07b48630"><view class="card-title data-v-07b48630"><text class="icon data-v-07b48630">🙏</text>许愿语（可选）</view><view class="form-group data-v-07b48630"><textarea class="textarea data-v-07b48630" placeholder="请输入您的愿望（最多100字）" maxlength="100" data-event-opts="{{[['input',[['__set_model',['$0','wish','$event',[]],['form']],['onWishInput',['$event']]]]]}}" value="{{form.wish}}" bindinput="__e"></textarea><view class="word-count data-v-07b48630">{{$root.g1+"/100"}}</view></view></view><block wx:if="{{showReceiver}}"><view class="card data-v-07b48630"><view class="card-title data-v-07b48630"><text class="icon data-v-07b48630">📦</text>收件信息</view><view class="form-group data-v-07b48630"><input class="input data-v-07b48630" placeholder="收件人姓名" maxlength="10" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['form.receiver']]]]]}}" value="{{form.receiver.name}}" bindinput="__e"/></view><view class="form-group data-v-07b48630"><input class="input data-v-07b48630" placeholder="收件人电话" maxlength="11" data-event-opts="{{[['input',[['__set_model',['$0','phone','$event',[]],['form.receiver']]]]]}}" value="{{form.receiver.phone}}" bindinput="__e"/></view><view class="form-group data-v-07b48630"><textarea class="textarea data-v-07b48630" placeholder="详细收件地址" maxlength="100" data-event-opts="{{[['input',[['__set_model',['$0','address','$event',[]],['form.receiver']]]]]}}" value="{{form.receiver.address}}" bindinput="__e"></textarea></view><view class="form-group data-v-07b48630"><input class="input data-v-07b48630" placeholder="备注信息（可选）" maxlength="50" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['form.receiver']]]]]}}" value="{{form.receiver.remark}}" bindinput="__e"/></view></view></block><block wx:if="{{selectedPrice>0}}"><view class="card price-card data-v-07b48630"><view class="card-title data-v-07b48630"><text class="icon data-v-07b48630">💰</text>费用预览</view><view class="price-item data-v-07b48630"><text class="data-v-07b48630">供灯费用：</text><text class="price data-v-07b48630">{{"¥"+selectedPrice}}</text></view><block wx:if="{{form.receiver.name}}"><view class="price-item data-v-07b48630"><text class="data-v-07b48630">邮寄费用：</text><text class="price data-v-07b48630">{{"¥"+shippingFee}}</text></view></block><view class="price-total data-v-07b48630"><text class="data-v-07b48630">总计：</text><text class="total-price data-v-07b48630">{{"¥"+totalPrice}}</text></view></view></block><view class="btn-group data-v-07b48630"><button class="form-btn data-v-07b48630" type="primary" loading="{{loading}}" data-event-opts="{{[['tap',[['nextStep',['$event']]]]]}}" bindtap="__e"><block wx:if="{{!loading}}"><text class="data-v-07b48630">下一步</text></block><block wx:else><text class="data-v-07b48630">提交中...</text></block></button><button class="form-btn reset data-v-07b48630" type="default" data-event-opts="{{[['tap',[['resetForm',['$event']]]]]}}" bindtap="__e">重置</button></view><view class="back-section data-v-07b48630"><button data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-btn data-v-07b48630" bindtap="__e">返回上页</button></view></view>