<view class="admin-container data-v-3a03b3d4"><view class="page-header data-v-3a03b3d4"><text class="page-title data-v-3a03b3d4">供灯配置管理</text><text class="page-desc data-v-3a03b3d4">管理供灯祈福项目和价格配置</text></view><view class="config-section data-v-3a03b3d4"><view class="section-title data-v-3a03b3d4"><text class="icon data-v-3a03b3d4">🏮</text>供灯项目配置<button data-event-opts="{{[['tap',[['showAddModal',['$event']]]]]}}" class="add-btn data-v-3a03b3d4" bindtap="__e">+ 添加项目</button></view><view class="config-list data-v-3a03b3d4"><block wx:for="{{lightItems}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="config-item data-v-3a03b3d4"><view class="item-image data-v-3a03b3d4"><block wx:if="{{item.image}}"><image class="item-img data-v-3a03b3d4" src="{{item.image}}" mode="aspectFill"></image></block><block wx:else><view class="item-placeholder data-v-3a03b3d4">🕯️</view></block></view><view class="item-info data-v-3a03b3d4"><view class="item-header data-v-3a03b3d4"><text class="item-name data-v-3a03b3d4">{{item.name}}</text><view class="{{['item-status','data-v-3a03b3d4',(item.enabled)?'active':'']}}">{{''+(item.enabled?'启用':'禁用')+''}}</view></view><view class="item-details data-v-3a03b3d4"><text class="item-desc data-v-3a03b3d4">{{item.description}}</text><view class="item-meta data-v-3a03b3d4"><text class="item-price data-v-3a03b3d4">{{"价格：¥"+item.price}}</text><text class="item-duration data-v-3a03b3d4">{{"时长："+item.duration+"天"}}</text></view></view></view><view class="item-actions data-v-3a03b3d4"><button data-event-opts="{{[['tap',[['editItem',[index]]]]]}}" class="action-btn edit data-v-3a03b3d4" bindtap="__e">编辑</button><button data-event-opts="{{[['tap',[['deleteItem',[index]]]]]}}" class="action-btn delete data-v-3a03b3d4" bindtap="__e">删除</button></view></view></block></view></view><uni-popup vue-id="067347b2-1" type="center" data-ref="itemPopup" class="data-v-3a03b3d4 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-content data-v-3a03b3d4"><view class="popup-header data-v-3a03b3d4"><text class="popup-title data-v-3a03b3d4">{{isEdit?'编辑供灯项目':'添加供灯项目'}}</text><button data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="close-btn data-v-3a03b3d4" bindtap="__e">×</button></view><view class="form-group data-v-3a03b3d4"><text class="form-label data-v-3a03b3d4">项目名称</text><input class="form-input data-v-3a03b3d4" placeholder="请输入项目名称" maxlength="50" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['currentItem']]]]]}}" value="{{currentItem.name}}" bindinput="__e"/></view><view class="form-group data-v-3a03b3d4"><text class="form-label data-v-3a03b3d4">项目描述</text><textarea class="form-textarea data-v-3a03b3d4" placeholder="请输入项目描述" maxlength="200" data-event-opts="{{[['input',[['__set_model',['$0','description','$event',[]],['currentItem']]]]]}}" value="{{currentItem.description}}" bindinput="__e"></textarea><view class="word-count data-v-3a03b3d4">{{$root.g0+"/200"}}</view></view><view class="form-group data-v-3a03b3d4"><text class="form-label data-v-3a03b3d4">项目价格</text><input class="form-input data-v-3a03b3d4" placeholder="请输入价格" type="number" data-event-opts="{{[['input',[['__set_model',['$0','price','$event',[]],['currentItem']]]]]}}" value="{{currentItem.price}}" bindinput="__e"/></view><view class="form-group data-v-3a03b3d4"><text class="form-label data-v-3a03b3d4">供灯时长（天）</text><input class="form-input data-v-3a03b3d4" placeholder="请输入时长" type="number" data-event-opts="{{[['input',[['__set_model',['$0','duration','$event',[]],['currentItem']]]]]}}" value="{{currentItem.duration}}" bindinput="__e"/></view><view class="form-group data-v-3a03b3d4"><text class="form-label data-v-3a03b3d4">项目图片</text><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="upload-area data-v-3a03b3d4" bindtap="__e"><block wx:if="{{currentItem.image}}"><image class="upload-preview data-v-3a03b3d4" src="{{currentItem.image}}" mode="aspectFill"></image></block><block wx:else><view class="upload-placeholder data-v-3a03b3d4"><text class="upload-icon data-v-3a03b3d4">📷</text><text class="upload-text data-v-3a03b3d4">点击上传项目图片</text></view></block></view></view><view class="form-group data-v-3a03b3d4"><text class="form-label data-v-3a03b3d4">显示设置</text><view class="setting-group data-v-3a03b3d4"><view class="setting-item data-v-3a03b3d4"><text class="setting-label data-v-3a03b3d4">是否启用</text><switch checked="{{currentItem.enabled}}" data-event-opts="{{[['change',[['onEnabledChange',['$event']]]]]}}" bindchange="__e" class="data-v-3a03b3d4"></switch></view><view class="setting-item data-v-3a03b3d4"><text class="setting-label data-v-3a03b3d4">推荐项目</text><switch checked="{{currentItem.recommended}}" data-event-opts="{{[['change',[['onRecommendedChange',['$event']]]]]}}" bindchange="__e" class="data-v-3a03b3d4"></switch></view></view></view><view class="popup-buttons data-v-3a03b3d4"><button data-event-opts="{{[['tap',[['saveItem',['$event']]]]]}}" class="popup-btn primary data-v-3a03b3d4" bindtap="__e">保存</button><button data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="popup-btn data-v-3a03b3d4" bindtap="__e">取消</button></view></view></uni-popup></view>