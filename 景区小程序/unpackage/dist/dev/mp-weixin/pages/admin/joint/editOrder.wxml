<view class="edit-order-page data-v-e2afa194"><view class="page-header data-v-e2afa194"><view class="header-content data-v-e2afa194"><view class="header-left data-v-e2afa194"><button data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-btn data-v-e2afa194" bindtap="__e"><text class="back-icon data-v-e2afa194">â†</text></button><text class="page-title data-v-e2afa194">ç¼–è¾‘è®¢å•</text></view><view class="header-actions data-v-e2afa194"><button class="save-btn data-v-e2afa194" disabled="{{loading}}" data-event-opts="{{[['tap',[['saveOrder',['$event']]]]]}}" bindtap="__e"><text class="btn-icon data-v-e2afa194">ğŸ’¾</text><text class="data-v-e2afa194">{{loading?'ä¿å­˜ä¸­...':'ä¿å­˜'}}</text></button></view></view></view><block wx:if="{{loading&&!orderDetail}}"><view class="loading-state data-v-e2afa194"><view class="loading-content data-v-e2afa194"><text class="loading-icon data-v-e2afa194">â³</text><text class="loading-text data-v-e2afa194">åŠ è½½ä¸­...</text></view></view></block><block wx:else><block wx:if="{{orderDetail}}"><view class="edit-content data-v-e2afa194"><view class="form-card data-v-e2afa194"><view class="card-header data-v-e2afa194"><text class="card-title data-v-e2afa194">ğŸ“‹ åŸºæœ¬ä¿¡æ¯</text></view><view class="form-content data-v-e2afa194"><view class="form-group data-v-e2afa194"><text class="form-label data-v-e2afa194">è®¢å•å·</text><text class="form-value data-v-e2afa194">{{orderDetail.orderNo||orderDetail.order_id}}</text></view><view class="form-group data-v-e2afa194"><text class="form-label data-v-e2afa194">æ³•ä¼šé¡¹ç›®</text><text class="form-value data-v-e2afa194">{{orderDetail.projectName||orderDetail.project_name||'æœªæŒ‡å®š'}}</text></view><view class="form-group data-v-e2afa194"><text class="form-label data-v-e2afa194">è®¢å•çŠ¶æ€</text><picker value="{{statusIndex}}" range="{{statusOptions}}" range-key="label" data-event-opts="{{[['change',[['onStatusChange',['$event']]]]]}}" bindchange="__e" class="data-v-e2afa194"><view class="picker-item data-v-e2afa194"><text class="picker-text data-v-e2afa194">{{statusOptions[statusIndex].label}}</text><text class="picker-arrow data-v-e2afa194">â–¼</text></view></picker></view><view class="form-group data-v-e2afa194"><text class="form-label data-v-e2afa194">æ€»é‡‘é¢</text><text class="form-value amount data-v-e2afa194">{{"Â¥"+(orderDetail.totalCost||orderDetail.total_fee||0)}}</text></view><view class="form-group data-v-e2afa194"><text class="form-label data-v-e2afa194">åˆ›å»ºæ—¶é—´</text><text class="form-value data-v-e2afa194">{{$root.m0}}</text></view></view></view><block wx:if="{{$root.g0}}"><view class="form-card data-v-e2afa194"><view class="card-header data-v-e2afa194"><text class="card-title data-v-e2afa194">ğŸ‘¥ æŠ¥åäººä¿¡æ¯</text></view><view class="form-content data-v-e2afa194"><block wx:for="{{orderDetail.applicants}}" wx:for-item="applicant" wx:for-index="index" wx:key="index"><view class="applicant-section data-v-e2afa194"><view class="section-title data-v-e2afa194">{{"æŠ¥åäºº "+(index+1)}}</view><view class="form-group data-v-e2afa194"><text class="form-label data-v-e2afa194">å§“å</text><input class="form-input data-v-e2afa194" placeholder="è¯·è¾“å…¥å§“å" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],[[['orderDetail.applicants','',index]]]]]]]}}" value="{{applicant.name}}" bindinput="__e"/></view><view class="form-group data-v-e2afa194"><text class="form-label data-v-e2afa194">ç”µè¯</text><input class="form-input data-v-e2afa194" placeholder="è¯·è¾“å…¥ç”µè¯" type="number" data-event-opts="{{[['input',[['__set_model',['$0','phone','$event',[]],[[['orderDetail.applicants','',index]]]]]]]}}" value="{{applicant.phone}}" bindinput="__e"/></view><block wx:if="{{applicant.idCard}}"><view class="form-group data-v-e2afa194"><text class="form-label data-v-e2afa194">èº«ä»½è¯</text><input class="form-input data-v-e2afa194" placeholder="è¯·è¾“å…¥èº«ä»½è¯å·" data-event-opts="{{[['input',[['__set_model',['$0','idCard','$event',[]],[[['orderDetail.applicants','',index]]]]]]]}}" value="{{applicant.idCard}}" bindinput="__e"/></view></block></view></block></view></view></block><view class="form-card data-v-e2afa194"><view class="card-header data-v-e2afa194"><text class="card-title data-v-e2afa194">ğŸ’¬ å¤‡æ³¨ä¿¡æ¯</text></view><view class="form-content data-v-e2afa194"><view class="form-group data-v-e2afa194"><text class="form-label data-v-e2afa194">å¤‡æ³¨</text><textarea class="form-textarea data-v-e2afa194" placeholder="è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯..." maxlength="500" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['orderDetail']]]]]}}" value="{{orderDetail.remark}}" bindinput="__e"></textarea><view class="textarea-counter data-v-e2afa194"><text class="counter-text data-v-e2afa194">{{$root.g1+"/500"}}</text></view></view></view></view><block wx:if="{{$root.g2}}"><view class="form-card data-v-e2afa194"><view class="card-header data-v-e2afa194"><text class="card-title data-v-e2afa194">ğŸ“ æ“ä½œè®°å½•</text></view><view class="form-content data-v-e2afa194"><block wx:for="{{$root.l0}}" wx:for-item="operation" wx:for-index="index" wx:key="index"><view class="operation-item data-v-e2afa194"><view class="operation-header data-v-e2afa194"><text class="operation-type data-v-e2afa194">{{operation.$orig.type}}</text><text class="operation-time data-v-e2afa194">{{operation.m1}}</text></view><view class="operation-content data-v-e2afa194"><text class="operation-operator data-v-e2afa194">{{"æ“ä½œäººï¼š"+operation.$orig.operator}}</text><block wx:if="{{operation.$orig.remark}}"><text class="operation-remark data-v-e2afa194">{{"å¤‡æ³¨ï¼š"+operation.$orig.remark}}</text></block></view></view></block></view></view></block></view></block><block wx:else><view class="error-state data-v-e2afa194"><view class="error-content data-v-e2afa194"><text class="error-icon data-v-e2afa194">âŒ</text><text class="error-title data-v-e2afa194">è®¢å•ä¸å­˜åœ¨</text><text class="error-desc data-v-e2afa194">æ— æ³•æ‰¾åˆ°æŒ‡å®šçš„è®¢å•ä¿¡æ¯</text><button data-event-opts="{{[['tap',[['loadOrderDetail',['$event']]]]]}}" class="retry-btn data-v-e2afa194" bindtap="__e"><text class="data-v-e2afa194">é‡æ–°åŠ è½½</text></button></view></view></block></block></view>