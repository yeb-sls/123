<view class="admin-container data-v-2d38f3fa"><view class="page-header data-v-2d38f3fa"><text class="page-title data-v-2d38f3fa">合坛法会订单管理</text><text class="page-desc data-v-2d38f3fa">查看和管理合坛法会订单</text></view><view class="orders-list data-v-2d38f3fa"><block wx:for="{{$root.l2}}" wx:for-item="order" wx:for-index="__i0__" wx:key="_id"><view class="order-card data-v-2d38f3fa"><view class="order-header data-v-2d38f3fa"><view class="order-info data-v-2d38f3fa"><text class="order-id data-v-2d38f3fa">{{"订单号："+order.$orig._id}}</text><text class="{{order.m0}}">{{order.$orig.status}}</text></view><text class="order-time data-v-2d38f3fa">{{order.m1}}</text></view><view class="order-content data-v-2d38f3fa"><view class="order-item data-v-2d38f3fa"><text class="item-label data-v-2d38f3fa">项目名称：</text><text class="item-value data-v-2d38f3fa">{{order.$orig.projectName}}</text></view><view class="order-item data-v-2d38f3fa"><text class="item-label data-v-2d38f3fa">法会日期：</text><text class="item-value data-v-2d38f3fa">{{order.$orig.fahuiDate}}</text></view><view class="order-item data-v-2d38f3fa"><text class="item-label data-v-2d38f3fa">报名人数：</text><text class="item-value data-v-2d38f3fa">{{(order.$orig.applicants?order.g0:0)+"人"}}</text></view><view class="order-item data-v-2d38f3fa"><text class="item-label data-v-2d38f3fa">总费用：</text><text class="item-value price data-v-2d38f3fa">{{"¥"+order.$orig.totalCost}}</text></view></view><block wx:if="{{order.g1}}"><view class="applicants-section data-v-2d38f3fa"><text class="section-title data-v-2d38f3fa">报名者信息</text><block wx:for="{{order.$orig.applicants}}" wx:for-item="applicant" wx:for-index="index" wx:key="index"><view class="applicant-item data-v-2d38f3fa"><text class="applicant-name data-v-2d38f3fa">{{applicant.name}}</text><text class="applicant-phone data-v-2d38f3fa">{{applicant.phone}}</text></view></block></view></block><block wx:if="{{order.g2}}"><view class="goods-section data-v-2d38f3fa"><text class="section-title data-v-2d38f3fa">代办物品</text><block wx:for="{{order.$orig.goods}}" wx:for-item="good" wx:for-index="index" wx:key="index"><view class="good-item data-v-2d38f3fa"><text class="good-name data-v-2d38f3fa">{{good.name}}</text><text class="good-quantity data-v-2d38f3fa">{{"x"+good.quantity}}</text><text class="good-price data-v-2d38f3fa">{{"¥"+good.price}}</text></view></block></view></block><block wx:if="{{order.$orig.receiver}}"><view class="receiver-section data-v-2d38f3fa"><text class="section-title data-v-2d38f3fa">收件信息</text><view class="receiver-info data-v-2d38f3fa"><text class="receiver-name data-v-2d38f3fa">{{order.$orig.receiver.name}}</text><text class="receiver-phone data-v-2d38f3fa">{{order.$orig.receiver.phone}}</text><text class="receiver-address data-v-2d38f3fa">{{order.$orig.receiver.address}}</text></view></view></block><block wx:if="{{order.g3}}"><view class="logs-section data-v-2d38f3fa"><text class="section-title data-v-2d38f3fa">操作日志</text><block wx:for="{{order.l0}}" wx:for-item="log" wx:for-index="index" wx:key="index"><view class="log-item data-v-2d38f3fa"><text class="log-time data-v-2d38f3fa">{{log.m2}}</text><text class="log-action data-v-2d38f3fa">{{log.$orig.action}}</text><text class="log-operator data-v-2d38f3fa">{{log.$orig.operator}}</text></view></block></view></block><block wx:if="{{order.g4}}"><view class="remarks-section data-v-2d38f3fa"><text class="section-title data-v-2d38f3fa">管理员备注</text><block wx:for="{{order.l1}}" wx:for-item="remark" wx:for-index="index" wx:key="index"><view class="remark-item data-v-2d38f3fa"><text class="remark-time data-v-2d38f3fa">{{remark.m3}}</text><text class="remark-content data-v-2d38f3fa">{{remark.$orig.content}}</text><text class="remark-operator data-v-2d38f3fa">{{remark.$orig.operator}}</text></view></block></view></block><view class="order-actions data-v-2d38f3fa"><block wx:if="{{order.$orig.status==='待确认'}}"><button data-event-opts="{{[['tap',[['confirmOrder',['$0'],[[['orders','_id',order.$orig._id,'_id']]]]]]]}}" class="action-btn confirm data-v-2d38f3fa" bindtap="__e">确认订单</button></block><block wx:if="{{order.$orig.status==='已确认'}}"><button data-event-opts="{{[['tap',[['completeOrder',['$0'],[[['orders','_id',order.$orig._id,'_id']]]]]]]}}" class="action-btn complete data-v-2d38f3fa" bindtap="__e">完成法会</button></block><button data-event-opts="{{[['tap',[['showRemarkModal',['$0'],[[['orders','_id',order.$orig._id,'_id']]]]]]]}}" class="action-btn remark data-v-2d38f3fa" bindtap="__e">添加备注</button></view></view></block></view><uni-popup vue-id="430dbb63-1" type="center" mask-click="{{false}}" data-ref="remarkPopup" class="data-v-2d38f3fa vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="remark-popup data-v-2d38f3fa"><view class="popup-header data-v-2d38f3fa"><text class="popup-title data-v-2d38f3fa">添加备注</text><text data-event-opts="{{[['tap',[['closeRemarkModal',['$event']]]]]}}" class="popup-close data-v-2d38f3fa" bindtap="__e">×</text></view><view class="popup-content data-v-2d38f3fa"><textarea class="remark-textarea data-v-2d38f3fa" placeholder="请输入备注内容" maxlength="500" data-event-opts="{{[['input',[['__set_model',['','remarkContent','$event',[]]]]]]}}" value="{{remarkContent}}" bindinput="__e"></textarea></view><view class="popup-actions data-v-2d38f3fa"><button data-event-opts="{{[['tap',[['closeRemarkModal',['$event']]]]]}}" class="cancel-btn data-v-2d38f3fa" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['addRemark',['$event']]]]]}}" class="confirm-btn data-v-2d38f3fa" bindtap="__e">确认</button></view></view></uni-popup></view>