<view class="admin-container data-v-7f5cdbef"><view class="page-header data-v-7f5cdbef"><view class="header-content data-v-7f5cdbef"><view class="header-left data-v-7f5cdbef"><text class="page-title data-v-7f5cdbef">殿堂供品配置管理</text><text class="page-desc data-v-7f5cdbef">管理殿堂供品项目和价格配置</text></view><view class="header-actions data-v-7f5cdbef"><button data-event-opts="{{[['tap',[['showAddModal',['$event']]]]]}}" class="add-btn data-v-7f5cdbef" bindtap="__e"><text class="btn-icon data-v-7f5cdbef">➕</text><text class="data-v-7f5cdbef">添加供品</text></button></view></view></view><view class="stats-card data-v-7f5cdbef"><view class="stat-item data-v-7f5cdbef"><text class="stat-number data-v-7f5cdbef">{{$root.g0}}</text><text class="stat-label data-v-7f5cdbef">总供品数</text></view><view class="stat-item data-v-7f5cdbef"><text class="stat-number data-v-7f5cdbef">{{enabledCount}}</text><text class="stat-label data-v-7f5cdbef">已启用</text></view><view class="stat-item data-v-7f5cdbef"><text class="stat-number data-v-7f5cdbef">{{disabledCount}}</text><text class="stat-label data-v-7f5cdbef">已禁用</text></view></view><view class="hall-list data-v-7f5cdbef"><view class="list-header data-v-7f5cdbef"><text class="list-title data-v-7f5cdbef">🏛️ 殿堂供品列表</text><text class="list-subtitle data-v-7f5cdbef">{{"共 "+$root.g1+" 个供品"}}</text></view><block wx:if="{{$root.g2===0}}"><view class="empty-state data-v-7f5cdbef"><text class="empty-icon data-v-7f5cdbef">🏛️</text><text class="empty-title data-v-7f5cdbef">暂无供品</text><text class="empty-desc data-v-7f5cdbef">点击上方"添加供品"按钮开始创建</text><button data-event-opts="{{[['tap',[['showAddModal',['$event']]]]]}}" class="empty-btn data-v-7f5cdbef" bindtap="__e">添加第一个供品</button></view></block><block wx:else><view class="hall-items data-v-7f5cdbef"><block wx:for="{{hallItems}}" wx:for-item="item" wx:for-index="index" wx:key="_id"><view class="{{['hall-item','data-v-7f5cdbef',(item.status!=='启用')?'hall-disabled':'']}}"><view class="hall-info data-v-7f5cdbef"><view class="info-header data-v-7f5cdbef"><text class="hall-title data-v-7f5cdbef">{{item.name||'未设置名称'}}</text><text class="hall-price data-v-7f5cdbef">{{"¥"+item.price}}</text></view><text class="hall-desc data-v-7f5cdbef">{{item.description||'未设置描述'}}</text><text class="hall-category data-v-7f5cdbef">{{"殿堂："+(item.hallName||'未设置殿堂')}}</text><view class="hall-actions data-v-7f5cdbef"><view class="action-group data-v-7f5cdbef"><button data-event-opts="{{[['tap',[['editHallItem',[index]]]]]}}" class="edit-btn data-v-7f5cdbef" bindtap="__e"><text class="action-icon data-v-7f5cdbef">✏️</text><text class="data-v-7f5cdbef">编辑</text></button><button data-event-opts="{{[['tap',[['deleteHallItem',[index]]]]]}}" class="delete-btn data-v-7f5cdbef" bindtap="__e"><text class="action-icon data-v-7f5cdbef">🗑️</text><text class="data-v-7f5cdbef">删除</text></button></view><view class="toggle-group data-v-7f5cdbef"><text class="toggle-label data-v-7f5cdbef">状态</text><switch checked="{{item.status==='启用'}}" color="#007aff" data-event-opts="{{[['change',[['toggleHallItemStatus',['$0','$event'],[[['hallItems','_id',item._id]]]]]]]}}" bindchange="__e" class="data-v-7f5cdbef"></switch></view></view></view></view></block></view></block></view><uni-popup vue-id="6c3f22f7-1" show="{{showHallPopup}}" type="center" data-event-opts="{{[['^close',[['closePopup']]]]}}" bind:close="__e" class="data-v-7f5cdbef" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-content data-v-7f5cdbef"><view class="popup-header data-v-7f5cdbef"><text class="popup-title data-v-7f5cdbef">{{isEdit?'编辑供品':'添加供品'}}</text><button data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="close-btn data-v-7f5cdbef" bindtap="__e">×</button></view><view class="form-container data-v-7f5cdbef"><view class="form-group data-v-7f5cdbef"><text class="form-label data-v-7f5cdbef">供品名称 *</text><input class="form-input data-v-7f5cdbef" placeholder="请输入供品名称" maxlength="50" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['currentHallItem']]]]]}}" value="{{currentHallItem.name}}" bindinput="__e"/><text class="form-tip data-v-7f5cdbef">{{$root.g3+"/50"}}</text></view><view class="form-group data-v-7f5cdbef"><text class="form-label data-v-7f5cdbef">殿堂名称 *</text><input class="form-input data-v-7f5cdbef" placeholder="请输入殿堂名称" maxlength="50" data-event-opts="{{[['input',[['__set_model',['$0','hallName','$event',[]],['currentHallItem']]]]]}}" value="{{currentHallItem.hallName}}" bindinput="__e"/><text class="form-tip data-v-7f5cdbef">{{$root.g4+"/50"}}</text></view><view class="form-group data-v-7f5cdbef"><text class="form-label data-v-7f5cdbef">功德金 *</text><input class="form-input data-v-7f5cdbef" placeholder="请输入功德金金额" type="number" data-event-opts="{{[['input',[['__set_model',['$0','price','$event',[]],['currentHallItem']]]]]}}" value="{{currentHallItem.price}}" bindinput="__e"/><text class="form-tip data-v-7f5cdbef">单位：元</text></view><view class="form-group data-v-7f5cdbef"><text class="form-label data-v-7f5cdbef">供品描述</text><textarea class="form-textarea data-v-7f5cdbef" placeholder="请输入供品描述" maxlength="200" data-event-opts="{{[['input',[['__set_model',['$0','description','$event',[]],['currentHallItem']]]]]}}" value="{{currentHallItem.description}}" bindinput="__e"></textarea><text class="form-tip data-v-7f5cdbef">{{$root.g5+"/200"}}</text></view></view><view class="popup-buttons data-v-7f5cdbef"><button data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="popup-btn cancel-btn data-v-7f5cdbef" bindtap="__e">取消</button><button class="popup-btn primary-btn data-v-7f5cdbef" disabled="{{loading}}" data-event-opts="{{[['tap',[['saveHallItem',['$event']]]]]}}" bindtap="__e"><block wx:if="{{loading}}"><text class="data-v-7f5cdbef">保存中...</text></block><block wx:else><text class="data-v-7f5cdbef">{{isEdit?'更新':'保存'}}</text></block></button></view></view></uni-popup><block wx:if="{{loading}}"><view class="loading-overlay data-v-7f5cdbef"><view class="loading-content data-v-7f5cdbef"><text class="loading-icon data-v-7f5cdbef">⏳</text><text class="loading-text data-v-7f5cdbef">加载中...</text></view></view></block></view>