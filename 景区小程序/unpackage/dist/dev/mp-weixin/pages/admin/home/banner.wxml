<view class="admin-container data-v-23175a73"><view class="page-header data-v-23175a73"><view class="header-content data-v-23175a73"><view class="header-left data-v-23175a73"><text class="page-title data-v-23175a73">é¦–é¡µè½®æ’­å›¾ç®¡ç†</text><text class="page-desc data-v-23175a73">ç®¡ç†å°ç¨‹åºé¦–é¡µçš„è½®æ’­å›¾ç‰‡ï¼Œæ”¯æŒæ‹–æ‹½æ’åº</text></view><view class="header-actions data-v-23175a73"><button data-event-opts="{{[['tap',[['initDatabase',['$event']]]]]}}" class="init-btn data-v-23175a73" bindtap="__e"><text class="btn-icon data-v-23175a73">ğŸ”„</text><text class="data-v-23175a73">åˆå§‹åŒ–</text></button><button data-event-opts="{{[['tap',[['showAddModal',['$event']]]]]}}" class="add-btn data-v-23175a73" bindtap="__e"><text class="btn-icon data-v-23175a73">â•</text><text class="data-v-23175a73">æ·»åŠ å›¾ç‰‡</text></button><button data-event-opts="{{[['tap',[['testAddBanner',['$event']]]]]}}" class="debug-btn data-v-23175a73" style="background:#ff9800;margin-left:10rpx;" bindtap="__e"><text class="btn-icon data-v-23175a73">ğŸ”§</text><text class="data-v-23175a73">æµ‹è¯•æ·»åŠ </text></button><button data-event-opts="{{[['tap',[['showDebugInfo',['$event']]]]]}}" class="debug-btn data-v-23175a73" style="background:#2196f3;margin-left:10rpx;" bindtap="__e"><text class="btn-icon data-v-23175a73">ğŸ›</text><text class="data-v-23175a73">è°ƒè¯•ä¿¡æ¯</text></button><button data-event-opts="{{[['tap',[['forceRefreshData',['$event']]]]]}}" class="debug-btn data-v-23175a73" style="background:#4caf50;margin-left:10rpx;" bindtap="__e"><text class="btn-icon data-v-23175a73">ğŸ”„</text><text class="data-v-23175a73">å¼ºåˆ¶åˆ·æ–°</text></button></view></view></view><block wx:if="{{showDebug}}"><view class="debug-section data-v-23175a73"><view class="debug-header data-v-23175a73"><text class="debug-title data-v-23175a73">ğŸ› è°ƒè¯•ä¿¡æ¯</text><button data-event-opts="{{[['tap',[['hideDebugInfo',['$event']]]]]}}" class="debug-close-btn data-v-23175a73" bindtap="__e">Ã—</button></view><view class="debug-content data-v-23175a73"><view class="debug-item data-v-23175a73"><text class="debug-label data-v-23175a73">é¡µé¢çŠ¶æ€:</text><text class="debug-value data-v-23175a73">{{debugInfo.pageStatus}}</text></view><view class="debug-item data-v-23175a73"><text class="debug-label data-v-23175a73">è½®æ’­å›¾æ•°æ®:</text><text class="debug-value data-v-23175a73">{{debugInfo.bannersInfo}}</text></view><view class="debug-item data-v-23175a73"><text class="debug-label data-v-23175a73">äº‘å¯¹è±¡çŠ¶æ€:</text><text class="debug-value data-v-23175a73">{{debugInfo.cloudObjectStatus}}</text></view><view class="debug-item data-v-23175a73"><text class="debug-label data-v-23175a73">åŠ è½½çŠ¶æ€:</text><text class="debug-value data-v-23175a73">{{debugInfo.loadingStatus}}</text></view><view class="debug-item data-v-23175a73"><text class="debug-label data-v-23175a73">å¼¹çª—çŠ¶æ€:</text><text class="debug-value data-v-23175a73">{{debugInfo.popupStatus}}</text></view><view class="debug-item data-v-23175a73"><text class="debug-label data-v-23175a73">ç¼–è¾‘çŠ¶æ€:</text><text class="debug-value data-v-23175a73">{{debugInfo.editStatus}}</text></view><view class="debug-item data-v-23175a73"><text class="debug-label data-v-23175a73">æœ€åæ“ä½œ:</text><text class="debug-value data-v-23175a73">{{debugInfo.lastOperation}}</text></view><view class="debug-item data-v-23175a73"><text class="debug-label data-v-23175a73">é”™è¯¯ä¿¡æ¯:</text><text class="debug-value data-v-23175a73">{{debugInfo.errorInfo}}</text></view></view></view></block><view class="stats-card data-v-23175a73"><view class="stat-item data-v-23175a73"><text class="stat-number data-v-23175a73">{{banners?$root.g0:0}}</text><text class="stat-label data-v-23175a73">æ€»æ•°é‡</text></view><view class="stat-item data-v-23175a73"><text class="stat-number data-v-23175a73">{{enabledCount}}</text><text class="stat-label data-v-23175a73">å·²å¯ç”¨</text></view><view class="stat-item data-v-23175a73"><text class="stat-number data-v-23175a73">{{disabledCount}}</text><text class="stat-label data-v-23175a73">å·²ç¦ç”¨</text></view></view><view class="banner-list data-v-23175a73"><view class="list-header data-v-23175a73"><text class="list-title data-v-23175a73">ğŸ–¼ï¸ è½®æ’­å›¾åˆ—è¡¨</text><text class="list-subtitle data-v-23175a73">{{"å…± "+(banners?$root.g1:0)+" å¼ å›¾ç‰‡"}}</text></view><block wx:if="{{$root.g2}}"><view class="empty-state data-v-23175a73"><text class="empty-icon data-v-23175a73">ğŸ“·</text><text class="empty-title data-v-23175a73">æš‚æ— è½®æ’­å›¾</text><text class="empty-desc data-v-23175a73">ç‚¹å‡»ä¸Šæ–¹"æ·»åŠ å›¾ç‰‡"æŒ‰é’®å¼€å§‹åˆ›å»º</text><button data-event-opts="{{[['tap',[['showAddModal',['$event']]]]]}}" class="empty-btn data-v-23175a73" bindtap="__e">æ·»åŠ ç¬¬ä¸€å¼ å›¾ç‰‡</button></view></block><block wx:else><view class="banner-items data-v-23175a73"><block wx:for="{{$root.l0}}" wx:for-item="banner" wx:for-index="index" wx:key="_id"><view class="{{['banner-item','data-v-23175a73',(banner.$orig.status!=='å¯ç”¨')?'banner-disabled':'']}}"><view class="banner-preview data-v-23175a73"><image class="banner-img data-v-23175a73" src="{{banner.$orig.imageUrl}}" mode="aspectFill"></image><view class="banner-overlay data-v-23175a73"><view class="overlay-actions data-v-23175a73"><button data-event-opts="{{[['tap',[['editBanner',[index]]]]]}}" class="action-btn edit-btn data-v-23175a73" bindtap="__e"><text class="action-icon data-v-23175a73">âœï¸</text><text class="data-v-23175a73">ç¼–è¾‘</text></button><button data-event-opts="{{[['tap',[['deleteBanner',[index]]]]]}}" class="action-btn delete-btn data-v-23175a73" bindtap="__e"><text class="action-icon data-v-23175a73">ğŸ—‘ï¸</text><text class="data-v-23175a73">åˆ é™¤</text></button></view></view><view class="{{['status-badge','data-v-23175a73',banner.$orig.status==='å¯ç”¨'?'status-enabled':'status-disabled']}}">{{''+banner.$orig.status+''}}</view></view><view class="banner-info data-v-23175a73"><view class="info-header data-v-23175a73"><text class="banner-title data-v-23175a73">{{banner.$orig.title||'æœªè®¾ç½®æ ‡é¢˜'}}</text><text class="banner-order data-v-23175a73">{{"#"+banner.$orig.order}}</text></view><text class="banner-desc data-v-23175a73">{{banner.$orig.description||'æœªè®¾ç½®æè¿°'}}</text><view class="banner-actions data-v-23175a73"><view class="action-group data-v-23175a73"><button class="{{['sort-btn','data-v-23175a73',(index===0)?'btn-disabled':'']}}" style="background:#007aff;color:#fff;border:none;padding:10rpx 20rpx;border-radius:8rpx;font-size:24rpx;" disabled="{{index===0}}" data-event-opts="{{[['tap',[['moveBanner',[index,-1]]]]]}}" bindtap="__e"><text class="sort-icon data-v-23175a73">â¬†ï¸</text><text class="data-v-23175a73">ä¸Šç§»</text></button><button class="{{['sort-btn','data-v-23175a73',(index===(banner.g3?banner.g4-1:-1))?'btn-disabled':'']}}" style="background:#007aff;color:#fff;border:none;padding:10rpx 20rpx;border-radius:8rpx;font-size:24rpx;" disabled="{{index===(banner.g5?banner.g6-1:-1)}}" data-event-opts="{{[['tap',[['moveBanner',[index,1]]]]]}}" bindtap="__e"><text class="sort-icon data-v-23175a73">â¬‡ï¸</text><text class="data-v-23175a73">ä¸‹ç§»</text></button></view><view class="toggle-group data-v-23175a73"><text class="toggle-label data-v-23175a73">çŠ¶æ€</text><switch checked="{{banner.$orig.status==='å¯ç”¨'}}" color="#007aff" data-event-opts="{{[['change',[['toggleBannerStatus',['$0','$event'],[[['banners||[]','_id',banner.$orig._id]]]]]]]}}" bindchange="__e" class="data-v-23175a73"></switch></view></view></view></view></block></view></block></view><uni-popup vue-id="3fd474f3-1" show="{{showBannerPopup}}" type="center" data-event-opts="{{[['^close',[['closePopup']]]]}}" bind:close="__e" class="data-v-23175a73" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-content data-v-23175a73"><view class="popup-header data-v-23175a73"><text class="popup-title data-v-23175a73">{{isEdit?'ç¼–è¾‘è½®æ’­å›¾':'æ·»åŠ è½®æ’­å›¾'}}</text><button data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="close-btn data-v-23175a73" bindtap="__e">Ã—</button></view><view class="form-container data-v-23175a73"><view class="form-group data-v-23175a73"><text class="form-label data-v-23175a73">å›¾ç‰‡æ ‡é¢˜ *</text><input class="form-input data-v-23175a73" placeholder="è¯·è¾“å…¥å›¾ç‰‡æ ‡é¢˜" maxlength="50" data-event-opts="{{[['input',[['__set_model',['$0','title','$event',[]],['currentBanner']]]]]}}" value="{{currentBanner.title}}" bindinput="__e"/><text class="form-tip data-v-23175a73">{{$root.g7+"/50"}}</text></view><view class="form-group data-v-23175a73"><text class="form-label data-v-23175a73">å›¾ç‰‡æè¿°</text><textarea class="form-textarea data-v-23175a73" placeholder="è¯·è¾“å…¥å›¾ç‰‡æè¿°" maxlength="200" data-event-opts="{{[['input',[['__set_model',['$0','description','$event',[]],['currentBanner']]]]]}}" value="{{currentBanner.description}}" bindinput="__e"></textarea><text class="form-tip data-v-23175a73">{{$root.g8+"/200"}}</text></view><view class="form-group data-v-23175a73"><text class="form-label data-v-23175a73">ä¸Šä¼ å›¾ç‰‡ *</text><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="upload-area data-v-23175a73" bindtap="__e"><block wx:if="{{currentBanner.imageUrl}}"><image class="upload-preview data-v-23175a73" src="{{currentBanner.imageUrl}}" mode="aspectFill"></image></block><block wx:else><view class="upload-placeholder data-v-23175a73"><text class="upload-icon data-v-23175a73">ğŸ“·</text><text class="upload-text data-v-23175a73">ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡</text><text class="upload-tip data-v-23175a73">å»ºè®®å°ºå¯¸ï¼š750x400pxï¼Œæ ¼å¼ï¼šJPG/PNG</text></view></block></view><button data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="test-btn data-v-23175a73" bindtap="__e">æµ‹è¯•é€‰æ‹©å›¾ç‰‡</button><button data-event-opts="{{[['tap',[['testChooseImage',['$event']]]]]}}" class="test-btn data-v-23175a73" style="margin-left:10rpx;" bindtap="__e">ç®€å•æµ‹è¯•</button></view><view class="form-group data-v-23175a73"><text class="form-label data-v-23175a73">è·³è½¬é“¾æ¥ï¼ˆå¯é€‰ï¼‰</text><input class="form-input data-v-23175a73" placeholder="è¯·è¾“å…¥è·³è½¬é“¾æ¥ï¼Œå¦‚ï¼š/pages/detail" data-event-opts="{{[['input',[['__set_model',['$0','linkUrl','$event',[]],['currentBanner']]]]]}}" value="{{currentBanner.linkUrl}}" bindinput="__e"/></view></view><view class="popup-buttons data-v-23175a73"><button data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="popup-btn cancel-btn data-v-23175a73" bindtap="__e">å–æ¶ˆ</button><button class="popup-btn primary-btn data-v-23175a73" disabled="{{loading}}" data-event-opts="{{[['tap',[['saveBanner',['$event']]]]]}}" bindtap="__e"><block wx:if="{{loading}}"><text class="data-v-23175a73">ä¿å­˜ä¸­...</text></block><block wx:else><text class="data-v-23175a73">{{isEdit?'æ›´æ–°':'ä¿å­˜'}}</text></block></button></view></view></uni-popup><block wx:if="{{loading}}"><view class="loading-overlay data-v-23175a73"><view class="loading-content data-v-23175a73"><text class="loading-icon data-v-23175a73">â³</text><text class="loading-text data-v-23175a73">åŠ è½½ä¸­...</text></view></view></block></view>