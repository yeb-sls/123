<view class="admin-container data-v-d4e8ec28"><view class="page-header data-v-d4e8ec28"><view class="header-content data-v-d4e8ec28"><view class="header-left data-v-d4e8ec28"><text class="page-title data-v-d4e8ec28">首页导航管理</text><text class="page-desc data-v-d4e8ec28">管理小程序首页的导航按钮</text></view><view class="header-right data-v-d4e8ec28"><button class="refresh-btn data-v-d4e8ec28" disabled="{{loading}}" data-event-opts="{{[['tap',[['loadNavs',['$event']]]]]}}" bindtap="__e"><text class="refresh-icon data-v-d4e8ec28">🔄</text></button></view></view></view><view class="stats-section data-v-d4e8ec28"><view class="stat-item data-v-d4e8ec28"><text class="stat-number data-v-d4e8ec28">{{$root.g0}}</text><text class="stat-label data-v-d4e8ec28">总数</text></view><view class="stat-item data-v-d4e8ec28"><text class="stat-number data-v-d4e8ec28">{{enabledCount}}</text><text class="stat-label data-v-d4e8ec28">已启用</text></view><view class="stat-item data-v-d4e8ec28"><text class="stat-number data-v-d4e8ec28">{{disabledCount}}</text><text class="stat-label data-v-d4e8ec28">已禁用</text></view></view><view class="action-bar data-v-d4e8ec28"><view class="search-box data-v-d4e8ec28"><input class="search-input data-v-d4e8ec28" placeholder="搜索导航名称或图标" data-event-opts="{{[['input',[['__set_model',['','searchText','$event',[]]],['filterNavs',['$event']]]]]}}" value="{{searchText}}" bindinput="__e"/><text class="search-icon data-v-d4e8ec28">🔍</text></view><button data-event-opts="{{[['tap',[['showAddModal',['$event']]]]]}}" class="action-btn primary data-v-d4e8ec28" bindtap="__e"><text class="btn-icon data-v-d4e8ec28">＋</text><text class="btn-text data-v-d4e8ec28">添加导航</text></button></view><view class="nav-list data-v-d4e8ec28"><view class="list-header data-v-d4e8ec28"><text class="list-title data-v-d4e8ec28">导航按钮列表</text><text class="list-count data-v-d4e8ec28">{{"共 "+$root.g1+" 项"}}</text></view><block wx:if="{{$root.g2>0}}"><view class="nav-items data-v-d4e8ec28"><block wx:for="{{$root.l0}}" wx:for-item="nav" wx:for-index="index" wx:key="m0"><view class="nav-item card data-v-d4e8ec28"><view class="nav-preview data-v-d4e8ec28"><view class="{{['nav-status','data-v-d4e8ec28',nav.$orig.enabled?'enabled':'disabled']}}"><text class="status-icon data-v-d4e8ec28">{{nav.$orig.enabled?'✓':'✗'}}</text></view><view class="nav-icon-wrap data-v-d4e8ec28" style="{{'background-color:'+(nav.$orig.bgColor)+';'}}"><text class="nav-icon data-v-d4e8ec28" style="{{'color:'+(nav.$orig.color)+';'}}">{{nav.$orig.icon}}</text></view><view class="nav-info data-v-d4e8ec28"><view class="nav-text-row data-v-d4e8ec28"><text class="nav-text data-v-d4e8ec28" style="{{'color:'+(nav.$orig.color)+';'}}">{{nav.$orig.text}}</text><button class="quick-edit-btn data-v-d4e8ec28" disabled="{{loading}}" data-event-opts="{{[['tap',[['quickEditText',[index]]]]]}}" bindtap="__e"><text class="quick-edit-icon data-v-d4e8ec28">✏️</text></button></view><text class="nav-url data-v-d4e8ec28">{{nav.$orig.url||'未设置链接'}}</text><text class="nav-order data-v-d4e8ec28">{{"排序: "+(nav.$orig.order||index+1)}}</text><text class="nav-time data-v-d4e8ec28">{{nav.m1}}</text></view></view><view class="nav-actions data-v-d4e8ec28"><button class="action-btn edit data-v-d4e8ec28" disabled="{{loading}}" data-event-opts="{{[['tap',[['editNav',[index]]]]]}}" bindtap="__e"><text class="action-icon data-v-d4e8ec28">✏️</text><text class="action-text data-v-d4e8ec28">编辑</text></button><button class="action-btn toggle data-v-d4e8ec28" disabled="{{loading}}" data-event-opts="{{[['tap',[['toggleNav',[index]]]]]}}" bindtap="__e"><text class="action-icon data-v-d4e8ec28">{{nav.$orig.enabled?'✗':'✓'}}</text><text class="action-text data-v-d4e8ec28">{{nav.$orig.enabled?'禁用':'启用'}}</text></button><button class="action-btn delete data-v-d4e8ec28" disabled="{{loading}}" data-event-opts="{{[['tap',[['deleteNav',[index]]]]]}}" bindtap="__e"><text class="action-icon data-v-d4e8ec28">🗑️</text><text class="action-text data-v-d4e8ec28">删除</text></button><view class="move-actions data-v-d4e8ec28"><button class="move-btn data-v-d4e8ec28" disabled="{{index===0||loading}}" data-event-opts="{{[['tap',[['moveNav',[index,'up']]]]]}}" bindtap="__e"><text class="move-icon data-v-d4e8ec28">↑</text></button><button class="move-btn data-v-d4e8ec28" disabled="{{nav.g3}}" data-event-opts="{{[['tap',[['moveNav',[index,'down']]]]]}}" bindtap="__e"><text class="move-icon data-v-d4e8ec28">↓</text></button></view></view></view></block></view></block><block wx:else><view class="empty-state data-v-d4e8ec28"><text class="empty-icon data-v-d4e8ec28">🔗</text><text class="empty-title data-v-d4e8ec28">暂无导航数据</text><text class="empty-desc data-v-d4e8ec28">{{searchText?'没有找到匹配的导航':'点击上方按钮添加导航'}}</text><block wx:if="{{!searchText}}"><button data-event-opts="{{[['tap',[['showAddModal',['$event']]]]]}}" class="empty-btn data-v-d4e8ec28" bindtap="__e">立即添加</button></block></view></block></view><uni-popup vue-id="1be6349a-1" show="{{showNavModal}}" type="center" data-event-opts="{{[['^close',[['closeNavModal']]]]}}" bind:close="__e" class="data-v-d4e8ec28" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-content data-v-d4e8ec28"><view class="popup-header data-v-d4e8ec28"><text class="popup-title data-v-d4e8ec28">{{isEdit?'编辑导航':'添加导航'}}</text><button data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="close-btn data-v-d4e8ec28" bindtap="__e">×</button></view><view class="form-container data-v-d4e8ec28"><view class="form-group data-v-d4e8ec28"><text class="form-label data-v-d4e8ec28">按钮文字 *</text><textarea class="form-input data-v-d4e8ec28" style="min-height:60rpx;" placeholder="请输入按钮文字" maxlength="10" auto-height="{{true}}" data-event-opts="{{[['input',[['onTextInput',['$event']]]],['blur',[['onTextBlur',['$event']]]],['change',[['onTextChange',['$event']]]],['focus',[['onTextFocus',['$event']]]]]}}" value="{{currentNav.text}}" bindinput="__e" bindblur="__e" bindchange="__e" bindfocus="__e"></textarea><text class="form-tip data-v-d4e8ec28">最多10个字符</text><text class="form-debug data-v-d4e8ec28">{{"当前值: "+currentNav.text}}</text><button data-event-opts="{{[['tap',[['testTextChange',['$event']]]]]}}" class="test-btn data-v-d4e8ec28" bindtap="__e">测试文字修改</button></view><view class="form-group data-v-d4e8ec28"><text class="form-label data-v-d4e8ec28">按钮图标 *</text><view class="icon-selector data-v-d4e8ec28"><input class="form-input data-v-d4e8ec28" placeholder="请输入图标emoji" maxlength="5" confirm-type="done" data-event-opts="{{[['input',[['onIconInput',['$event']]]],['blur',[['onIconBlur',['$event']]]],['change',[['onIconChange',['$event']]]],['focus',[['onIconFocus',['$event']]]]]}}" value="{{currentNav.icon}}" bindinput="__e" bindblur="__e" bindchange="__e" bindfocus="__e"/><block wx:if="{{currentNav.icon}}"><view class="icon-preview data-v-d4e8ec28"><text class="preview-icon data-v-d4e8ec28">{{currentNav.icon}}</text></view></block></view><text class="form-tip data-v-d4e8ec28">建议使用emoji图标</text><text class="form-debug data-v-d4e8ec28">{{"当前值: "+currentNav.icon}}</text><button data-event-opts="{{[['tap',[['testIconChange',['$event']]]]]}}" class="test-btn data-v-d4e8ec28" style="margin-top:10rpx;background:#007aff;color:#fff;border:none;padding:10rpx 20rpx;border-radius:8rpx;font-size:24rpx;" bindtap="__e">测试图标修改</button></view><view class="form-group data-v-d4e8ec28"><text class="form-label data-v-d4e8ec28">跳转页面</text><picker range="{{pageOptions}}" value="{{$root.g4}}" data-event-opts="{{[['change',[['onPageChange',['$event']]]]]}}" bindchange="__e" class="data-v-d4e8ec28"><view class="picker data-v-d4e8ec28"><text class="picker-value data-v-d4e8ec28">{{currentNav.url||'请选择页面'}}</text><text class="picker-arrow data-v-d4e8ec28">▼</text></view></picker><text class="form-tip data-v-d4e8ec28">选择点击后跳转的页面</text></view><view class="form-group data-v-d4e8ec28"><text class="form-label data-v-d4e8ec28">文字颜色</text><view class="color-picker data-v-d4e8ec28"><block wx:for="{{colorOptions}}" wx:for-item="color" wx:for-index="__i0__" wx:key="value"><view data-event-opts="{{[['tap',[['selectColor',['$0'],[[['colorOptions','value',color.value,'value']]]]]]]}}" class="{{['color-item','data-v-d4e8ec28',(currentNav.color===color.value)?'active':'']}}" style="{{'background-color:'+(color.value)+';'}}" bindtap="__e"></view></block></view></view><view class="form-group data-v-d4e8ec28"><text class="form-label data-v-d4e8ec28">背景颜色</text><view class="color-picker data-v-d4e8ec28"><block wx:for="{{bgColorOptions}}" wx:for-item="bgColor" wx:for-index="__i1__" wx:key="value"><view data-event-opts="{{[['tap',[['selectBgColor',['$0'],[[['bgColorOptions','value',bgColor.value,'value']]]]]]]}}" class="{{['color-item','data-v-d4e8ec28',(currentNav.bgColor===bgColor.value)?'active':'']}}" style="{{'background-color:'+(bgColor.value)+';'}}" bindtap="__e"></view></block></view></view><view class="form-group data-v-d4e8ec28"><text class="form-label data-v-d4e8ec28">是否启用</text><switch checked="{{currentNav.enabled}}" data-event-opts="{{[['change',[['onEnabledChange',['$event']]]]]}}" bindchange="__e" class="data-v-d4e8ec28"></switch><text class="form-tip data-v-d4e8ec28">禁用后不会在首页显示</text></view><view class="form-group data-v-d4e8ec28"><text class="form-label data-v-d4e8ec28">预览效果</text><view class="nav-preview-container data-v-d4e8ec28"><view class="nav-preview-item data-v-d4e8ec28" style="{{'background-color:'+(currentNav.bgColor)+';'}}"><text class="nav-preview-icon data-v-d4e8ec28" style="{{'color:'+(currentNav.color)+';'}}">{{currentNav.icon||'📱'}}</text><text class="nav-preview-text data-v-d4e8ec28" style="{{'color:'+(currentNav.color)+';'}}">{{currentNav.text||'导航文字'}}</text></view></view><text class="form-tip data-v-d4e8ec28">实时预览导航按钮效果</text></view></view><view class="popup-buttons data-v-d4e8ec28"><button data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="popup-btn data-v-d4e8ec28" bindtap="__e">取消</button><button class="popup-btn primary data-v-d4e8ec28" disabled="{{loading||!isFormValid}}" data-event-opts="{{[['tap',[['saveNav',['$event']]]]]}}" bindtap="__e">{{''+(loading?'保存中...':'保存')+''}}</button></view></view></uni-popup><uni-popup vue-id="1be6349a-2" show="{{showDeleteModal}}" type="center" data-event-opts="{{[['^close',[['closeDeleteModal']]]]}}" bind:close="__e" class="data-v-d4e8ec28" bind:__l="__l" vue-slots="{{['default']}}"><view class="confirm-modal data-v-d4e8ec28"><view class="confirm-header data-v-d4e8ec28"><text class="confirm-icon data-v-d4e8ec28">⚠️</text><text class="confirm-title data-v-d4e8ec28">确认删除</text></view><view class="confirm-content data-v-d4e8ec28"><text class="confirm-text data-v-d4e8ec28">{{"确定要删除导航 \""+deleteNavData.text+"\" 吗？"}}</text><text class="confirm-warning data-v-d4e8ec28">此操作不可恢复！</text></view><view class="confirm-buttons data-v-d4e8ec28"><button data-event-opts="{{[['tap',[['cancelDelete',['$event']]]]]}}" class="confirm-btn data-v-d4e8ec28" bindtap="__e">取消</button><button class="confirm-btn danger data-v-d4e8ec28" disabled="{{loading}}" data-event-opts="{{[['tap',[['confirmDelete',['$event']]]]]}}" bindtap="__e">{{''+(loading?'删除中...':'确认删除')+''}}</button></view></view></uni-popup></view>