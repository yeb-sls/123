<view class="admin-container data-v-dfce0834"><view class="page-header data-v-dfce0834"><view class="header-content data-v-dfce0834"><view class="header-left data-v-dfce0834"><text class="page-title data-v-dfce0834">功德布施配置管理</text><text class="page-desc data-v-dfce0834">管理功德布施项目和配置</text></view><view class="header-actions data-v-dfce0834"><button data-event-opts="{{[['tap',[['showAddModal',['$event']]]]]}}" class="add-btn data-v-dfce0834" bindtap="__e"><text class="btn-icon data-v-dfce0834">➕</text><text class="data-v-dfce0834">添加布施项目</text></button></view></view></view><view class="stats-card data-v-dfce0834"><view class="stat-item data-v-dfce0834"><text class="stat-number data-v-dfce0834">{{$root.g0}}</text><text class="stat-label data-v-dfce0834">总布施项目</text></view><view class="stat-item data-v-dfce0834"><text class="stat-number data-v-dfce0834">{{enabledCount}}</text><text class="stat-label data-v-dfce0834">已启用</text></view><view class="stat-item data-v-dfce0834"><text class="stat-number data-v-dfce0834">{{disabledCount}}</text><text class="stat-label data-v-dfce0834">已禁用</text></view></view><view class="gongde-list data-v-dfce0834"><view class="list-header data-v-dfce0834"><text class="list-title data-v-dfce0834">💰 功德布施项目列表</text><text class="list-subtitle data-v-dfce0834">{{"共 "+$root.g1+" 个项目"}}</text></view><block wx:if="{{$root.g2===0}}"><view class="empty-state data-v-dfce0834"><text class="empty-icon data-v-dfce0834">💰</text><text class="empty-title data-v-dfce0834">暂无布施项目</text><text class="empty-desc data-v-dfce0834">点击上方"添加布施项目"按钮开始创建</text><button data-event-opts="{{[['tap',[['showAddModal',['$event']]]]]}}" class="empty-btn data-v-dfce0834" bindtap="__e">添加第一个项目</button></view></block><block wx:else><view class="gongde-items data-v-dfce0834"><block wx:for="{{gongdeItems}}" wx:for-item="item" wx:for-index="index" wx:key="_id"><view class="{{['gongde-item','data-v-dfce0834',(item.status!=='启用')?'gongde-disabled':'']}}"><view class="gongde-info data-v-dfce0834"><view class="info-header data-v-dfce0834"><text class="gongde-title data-v-dfce0834">{{item.name||'未设置名称'}}</text><text class="gongde-type data-v-dfce0834">{{item.type==='money'?'善款捐赠':'实物捐赠'}}</text></view><text class="gongde-desc data-v-dfce0834">{{item.description||'未设置描述'}}</text><text class="gongde-category data-v-dfce0834">{{"类型："+(item.type==='money'?'善款捐赠':'实物捐赠')}}</text><view class="gongde-actions data-v-dfce0834"><view class="action-group data-v-dfce0834"><button data-event-opts="{{[['tap',[['editGongdeItem',[index]]]]]}}" class="edit-btn data-v-dfce0834" bindtap="__e"><text class="action-icon data-v-dfce0834">✏️</text><text class="data-v-dfce0834">编辑</text></button><button data-event-opts="{{[['tap',[['deleteGongdeItem',[index]]]]]}}" class="delete-btn data-v-dfce0834" bindtap="__e"><text class="action-icon data-v-dfce0834">🗑️</text><text class="data-v-dfce0834">删除</text></button></view><view class="toggle-group data-v-dfce0834"><text class="toggle-label data-v-dfce0834">状态</text><switch checked="{{item.status==='启用'}}" color="#007aff" data-event-opts="{{[['change',[['toggleGongdeItemStatus',['$0','$event'],[[['gongdeItems','_id',item._id]]]]]]]}}" bindchange="__e" class="data-v-dfce0834"></switch></view></view></view></view></block></view></block></view><uni-popup vue-id="730701e0-1" show="{{showGongdePopup}}" type="center" data-event-opts="{{[['^close',[['closePopup']]]]}}" bind:close="__e" class="data-v-dfce0834" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-content data-v-dfce0834"><view class="popup-header data-v-dfce0834"><text class="popup-title data-v-dfce0834">{{isEdit?'编辑布施项目':'添加布施项目'}}</text><button data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="close-btn data-v-dfce0834" bindtap="__e">×</button></view><view class="form-container data-v-dfce0834"><view class="form-group data-v-dfce0834"><text class="form-label data-v-dfce0834">项目名称 *</text><input class="form-input data-v-dfce0834" placeholder="请输入布施项目名称" maxlength="50" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['currentGongdeItem']]]]]}}" value="{{currentGongdeItem.name}}" bindinput="__e"/><text class="form-tip data-v-dfce0834">{{$root.g3+"/50"}}</text></view><view class="form-group data-v-dfce0834"><text class="form-label data-v-dfce0834">项目类型 *</text><picker class="form-picker data-v-dfce0834" value="{{typeIndex}}" range="{{typeOptions}}" data-event-opts="{{[['change',[['onTypeChange',['$event']]]]]}}" bindchange="__e"><view class="picker-display data-v-dfce0834"><text class="data-v-dfce0834">{{typeOptions[typeIndex]}}</text><text class="picker-arrow data-v-dfce0834">▼</text></view></picker></view><view class="form-group data-v-dfce0834"><text class="form-label data-v-dfce0834">项目描述</text><textarea class="form-textarea data-v-dfce0834" placeholder="请输入项目描述" maxlength="200" data-event-opts="{{[['input',[['__set_model',['$0','description','$event',[]],['currentGongdeItem']]]]]}}" value="{{currentGongdeItem.description}}" bindinput="__e"></textarea><text class="form-tip data-v-dfce0834">{{$root.g4+"/200"}}</text></view><view class="form-group data-v-dfce0834"><text class="form-label data-v-dfce0834">功德值倍数</text><input class="form-input data-v-dfce0834" placeholder="请输入功德值倍数" type="number" data-event-opts="{{[['input',[['__set_model',['$0','meritMultiplier','$event',[]],['currentGongdeItem']]]]]}}" value="{{currentGongdeItem.meritMultiplier}}" bindinput="__e"/><text class="form-tip data-v-dfce0834">每100元对应的功德值倍数（默认2）</text></view></view><view class="popup-buttons data-v-dfce0834"><button data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="popup-btn cancel-btn data-v-dfce0834" bindtap="__e">取消</button><button class="popup-btn primary-btn data-v-dfce0834" disabled="{{loading}}" data-event-opts="{{[['tap',[['saveGongdeItem',['$event']]]]]}}" bindtap="__e"><block wx:if="{{loading}}"><text class="data-v-dfce0834">保存中...</text></block><block wx:else><text class="data-v-dfce0834">{{isEdit?'更新':'保存'}}</text></block></button></view></view></uni-popup><block wx:if="{{loading}}"><view class="loading-overlay data-v-dfce0834"><view class="loading-content data-v-dfce0834"><text class="loading-icon data-v-dfce0834">⏳</text><text class="loading-text data-v-dfce0834">加载中...</text></view></view></block></view>