<view class="admin-container data-v-0db4ec3f"><view class="page-header data-v-0db4ec3f"><text class="page-title data-v-0db4ec3f">{{(fahuiType==='joint'?'合坛法会':'专场法会')+"代办物品管理"}}</text><text class="page-desc data-v-0db4ec3f">{{"管理"+(fahuiType==='joint'?'合坛法会':'专场法会')+"代办物品及价格设置"}}</text></view><view class="module-switch data-v-0db4ec3f"><view class="switch-item data-v-0db4ec3f"><text class="switch-label data-v-0db4ec3f">启用代办物品模块</text><switch checked="{{moduleEnabled}}" data-event-opts="{{[['change',[['onModuleToggle',['$event']]]]]}}" bindchange="__e" class="data-v-0db4ec3f"></switch></view><text class="switch-desc data-v-0db4ec3f">关闭后前台将不显示代办物品模块</text></view><block wx:if="{{moduleEnabled}}"><view class="goods-edit-form data-v-0db4ec3f"><view class="form-group data-v-0db4ec3f"><text class="form-label data-v-0db4ec3f">物品名称<text class="required data-v-0db4ec3f">*</text></text><input class="form-input data-v-0db4ec3f" placeholder="请输入物品名称" maxlength="50" autocomplete="off" data-event-opts="{{[['focus',[['onInputFocus',['name','$event']]]],['input',[['__set_model',['$0','name','$event',[]],['currentGoods']]]]]}}" value="{{currentGoods.name}}" bindfocus="__e" bindinput="__e"/></view><view class="form-group data-v-0db4ec3f"><text class="form-label data-v-0db4ec3f">单价<text class="required data-v-0db4ec3f">*</text></text><input class="form-input data-v-0db4ec3f" placeholder="请输入单价" type="number" autocomplete="off" data-event-opts="{{[['focus',[['onInputFocus',['price','$event']]]],['input',[['__set_model',['$0','price','$event',[]],['currentGoods']]]]]}}" value="{{currentGoods.price}}" bindfocus="__e" bindinput="__e"/></view><view class="form-group data-v-0db4ec3f"><text class="form-label data-v-0db4ec3f">物品描述</text><textarea class="form-textarea data-v-0db4ec3f" placeholder="请输入物品描述" maxlength="200" data-event-opts="{{[['input',[['__set_model',['$0','description','$event',[]],['currentGoods']]]]]}}" value="{{currentGoods.description}}" bindinput="__e"></textarea></view><view class="form-group data-v-0db4ec3f"><text class="form-label data-v-0db4ec3f">是否启用</text><switch checked="{{currentGoods.enabled}}" data-event-opts="{{[['change',[['onEnabledChange',['$event']]]]]}}" bindchange="__e" class="data-v-0db4ec3f"></switch></view><view class="form-group data-v-0db4ec3f"><text class="form-label data-v-0db4ec3f">物品图片</text><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="image-upload data-v-0db4ec3f" bindtap="__e"><block wx:if="{{currentGoods.image}}"><image class="upload-img data-v-0db4ec3f" src="{{currentGoods.image}}" mode="aspectFill"></image></block><block wx:else><view class="upload-placeholder data-v-0db4ec3f"><text class="upload-icon data-v-0db4ec3f">+</text><text class="upload-text data-v-0db4ec3f">选择图片</text></view></block></view></view><view class="form-actions data-v-0db4ec3f"><button data-event-opts="{{[['tap',[['saveGoods',['$event']]]]]}}" class="save-btn data-v-0db4ec3f" bindtap="__e">{{isEdit?'保存修改':'添加物品'}}</button><block wx:if="{{isEdit}}"><button data-event-opts="{{[['tap',[['cancelEdit',['$event']]]]]}}" class="cancel-btn data-v-0db4ec3f" bindtap="__e">取消编辑</button></block></view></view></block><block wx:if="{{moduleEnabled}}"><view class="goods-list data-v-0db4ec3f"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="_id"><view class="goods-card data-v-0db4ec3f"><view class="goods-header data-v-0db4ec3f"><view class="goods-name data-v-0db4ec3f">{{item.$orig.name}}</view><view class="goods-price data-v-0db4ec3f">{{"¥"+item.$orig.price}}</view></view><view class="goods-content data-v-0db4ec3f"><view class="goods-info data-v-0db4ec3f"><view class="info-row data-v-0db4ec3f"><text class="info-label data-v-0db4ec3f">描述：</text><text class="info-value data-v-0db4ec3f">{{item.$orig.description||'暂无描述'}}</text></view><view class="info-row data-v-0db4ec3f"><text class="info-label data-v-0db4ec3f">状态：</text><text class="{{['info-value','data-v-0db4ec3f',(item.$orig.enabled)?'active':'']}}">{{''+(item.$orig.enabled?'启用':'禁用')+''}}</text></view></view><block wx:if="{{item.$orig.image}}"><view class="goods-image data-v-0db4ec3f"><image class="goods-img data-v-0db4ec3f" src="{{item.$orig.image}}" mode="aspectFill"></image></view></block></view><view class="goods-actions data-v-0db4ec3f"><button data-event-opts="{{[['tap',[['editGoods',['$0'],[[['goodsList','_id',item.$orig._id]]]]]]]}}" class="action-btn edit data-v-0db4ec3f" bindtap="__e">编辑</button><button data-event-opts="{{[['tap',[['deleteGoods',['$0'],[[['goodsList','_id',item.$orig._id,'_id']]]]]]]}}" class="action-btn delete data-v-0db4ec3f" bindtap="__e">删除</button><button class="action-btn data-v-0db4ec3f" disabled="{{index===0}}" data-event-opts="{{[['tap',[['moveGoodsUp',[index]]]]]}}" bindtap="__e">↑</button><button class="action-btn data-v-0db4ec3f" disabled="{{index===item.g0-1}}" data-event-opts="{{[['tap',[['moveGoodsDown',[index]]]]]}}" bindtap="__e">↓</button></view></view></block></view></block></view>