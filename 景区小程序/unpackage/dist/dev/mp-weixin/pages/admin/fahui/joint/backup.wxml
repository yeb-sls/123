<view class="backup-container data-v-87d408e4"><view class="page-header data-v-87d408e4"><text class="page-title data-v-87d408e4">合坛法会数据备份</text><text class="page-desc data-v-87d408e4">备份和恢复合坛法会相关数据</text></view><view class="status-section data-v-87d408e4"><view class="status-card data-v-87d408e4"><view class="status-icon data-v-87d408e4">💾</view><view class="status-content data-v-87d408e4"><text class="status-title data-v-87d408e4">数据状态</text><text class="status-desc data-v-87d408e4">{{"最后备份时间："+(lastBackupTime||'从未备份')}}</text></view></view></view><view class="section data-v-87d408e4"><view class="section-header data-v-87d408e4"><text class="section-title data-v-87d408e4">备份操作</text></view><view class="backup-options data-v-87d408e4"><view data-event-opts="{{[['tap',[['backupProjects',['$event']]]]]}}" class="option-card data-v-87d408e4" bindtap="__e"><view class="option-icon data-v-87d408e4">📋</view><view class="option-content data-v-87d408e4"><text class="option-title data-v-87d408e4">备份项目数据</text><text class="option-desc data-v-87d408e4">备份所有合坛法会项目配置</text></view><view class="option-arrow data-v-87d408e4">→</view></view><view data-event-opts="{{[['tap',[['backupOrders',['$event']]]]]}}" class="option-card data-v-87d408e4" bindtap="__e"><view class="option-icon data-v-87d408e4">📊</view><view class="option-content data-v-87d408e4"><text class="option-title data-v-87d408e4">备份订单数据</text><text class="option-desc data-v-87d408e4">备份所有合坛法会订单记录</text></view><view class="option-arrow data-v-87d408e4">→</view></view><view data-event-opts="{{[['tap',[['backupAll',['$event']]]]]}}" class="option-card data-v-87d408e4" bindtap="__e"><view class="option-icon data-v-87d408e4">🔄</view><view class="option-content data-v-87d408e4"><text class="option-title data-v-87d408e4">完整备份</text><text class="option-desc data-v-87d408e4">备份所有合坛法会相关数据</text></view><view class="option-arrow data-v-87d408e4">→</view></view></view></view><view class="section data-v-87d408e4"><view class="section-header data-v-87d408e4"><text class="section-title data-v-87d408e4">恢复操作</text></view><view class="restore-options data-v-87d408e4"><view data-event-opts="{{[['tap',[['showRestoreModal',['$event']]]]]}}" class="option-card data-v-87d408e4" bindtap="__e"><view class="option-icon data-v-87d408e4">📥</view><view class="option-content data-v-87d408e4"><text class="option-title data-v-87d408e4">从备份恢复</text><text class="option-desc data-v-87d408e4">从备份文件恢复数据</text></view><view class="option-arrow data-v-87d408e4">→</view></view><view data-event-opts="{{[['tap',[['resetData',['$event']]]]]}}" class="option-card warning data-v-87d408e4" bindtap="__e"><view class="option-icon data-v-87d408e4">⚠️</view><view class="option-content data-v-87d408e4"><text class="option-title data-v-87d408e4">重置数据</text><text class="option-desc data-v-87d408e4">清空所有合坛法会数据（危险操作）</text></view><view class="option-arrow data-v-87d408e4">→</view></view></view></view><view class="section data-v-87d408e4"><view class="section-header data-v-87d408e4"><text class="section-title data-v-87d408e4">备份历史</text><button data-event-opts="{{[['tap',[['loadBackupHistory',['$event']]]]]}}" class="refresh-btn data-v-87d408e4" bindtap="__e">🔄 刷新</button></view><view class="backup-history data-v-87d408e4"><block wx:if="{{$root.g0===0}}"><view class="empty-history data-v-87d408e4"><text class="empty-icon data-v-87d408e4">📁</text><text class="empty-text data-v-87d408e4">暂无备份记录</text></view></block><block wx:else><block wx:for="{{backupHistory}}" wx:for-item="backup" wx:for-index="index" wx:key="index"><view class="backup-item data-v-87d408e4"><view class="backup-info data-v-87d408e4"><text class="backup-name data-v-87d408e4">{{backup.name}}</text><text class="backup-time data-v-87d408e4">{{backup.time}}</text><text class="backup-size data-v-87d408e4">{{backup.size}}</text></view><view class="backup-actions data-v-87d408e4"><button data-event-opts="{{[['tap',[['restoreFromBackup',['$0'],[[['backupHistory','',index]]]]]]]}}" class="action-btn restore data-v-87d408e4" bindtap="__e">恢复</button><button data-event-opts="{{[['tap',[['downloadBackup',['$0'],[[['backupHistory','',index]]]]]]]}}" class="action-btn download data-v-87d408e4" bindtap="__e">下载</button><button data-event-opts="{{[['tap',[['deleteBackup',['$0'],[[['backupHistory','',index]]]]]]]}}" class="action-btn delete data-v-87d408e4" bindtap="__e">删除</button></view></view></block></block></view></view><uni-popup vue-id="72ac1190-1" show="{{showRestorePopup}}" type="center" data-event-opts="{{[['^close',[['closeRestoreModal']]]]}}" bind:close="__e" class="data-v-87d408e4" bind:__l="__l" vue-slots="{{['default']}}"><view class="restore-popup data-v-87d408e4"><view class="popup-header data-v-87d408e4"><text class="popup-title data-v-87d408e4">选择备份文件</text><button data-event-opts="{{[['tap',[['closeRestoreModal',['$event']]]]]}}" class="close-btn data-v-87d408e4" bindtap="__e">×</button></view><view class="popup-body data-v-87d408e4"><view class="file-upload data-v-87d408e4"><button data-event-opts="{{[['tap',[['selectBackupFile',['$event']]]]]}}" class="upload-btn data-v-87d408e4" bindtap="__e"><text class="upload-icon data-v-87d408e4">📁</text><text class="upload-text data-v-87d408e4">选择备份文件</text></button><text class="upload-desc data-v-87d408e4">支持 .json 格式的备份文件</text></view><block wx:if="{{selectedFile}}"><view class="selected-file data-v-87d408e4"><text class="file-name data-v-87d408e4">{{selectedFile.name}}</text><text class="file-size data-v-87d408e4">{{selectedFile.size}}</text></view></block></view><view class="popup-footer data-v-87d408e4"><button data-event-opts="{{[['tap',[['closeRestoreModal',['$event']]]]]}}" class="popup-btn cancel data-v-87d408e4" bindtap="__e">取消</button><button class="popup-btn primary data-v-87d408e4" disabled="{{!selectedFile}}" data-event-opts="{{[['tap',[['confirmRestore',['$event']]]]]}}" bindtap="__e">确认恢复</button></view></view></uni-popup></view>