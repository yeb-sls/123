<view class="form-bg data-v-cd3914c4"><view class="form-container data-v-cd3914c4"><view class="step-bar data-v-cd3914c4"><view class="step active data-v-cd3914c4">1. 填写信息</view><view class="step data-v-cd3914c4">2. 信息确认</view><view class="step data-v-cd3914c4">3. 支付</view></view><view class="card data-v-cd3914c4"><view class="card-title data-v-cd3914c4"><text class="icon data-v-cd3914c4">🎯</text>活动选择<text class="required data-v-cd3914c4">*</text></view><view class="form-group data-v-cd3914c4"><picker range="{{activityTypes}}" value="{{activityTypeIdx}}" data-event-opts="{{[['change',[['onActivityTypeChange',['$event']]]]]}}" bindchange="__e" class="data-v-cd3914c4"><view class="picker data-v-cd3914c4"><text class="icon data-v-cd3914c4">📋</text>活动类型：<block wx:if="{{activityTypeIdx!==null}}"><text class="data-v-cd3914c4">{{activityTypes[activityTypeIdx]}}</text></block><block wx:else><text class="placeholder data-v-cd3914c4">请选择</text></block><text class="arrow data-v-cd3914c4">▼</text></view></picker><block wx:if="{{errors.activityTypeIdx}}"><view class="error-tip data-v-cd3914c4">{{errors.activityTypeIdx}}</view></block></view><block wx:if="{{activityTypeIdx!==null}}"><view class="form-group data-v-cd3914c4"><picker range="{{activityList}}" value="{{activityIdx}}" data-event-opts="{{[['change',[['onActivityChange',['$event']]]]]}}" bindchange="__e" class="data-v-cd3914c4"><view class="picker data-v-cd3914c4"><text class="icon data-v-cd3914c4">🎪</text>具体活动：<block wx:if="{{activityIdx!==null}}"><text class="data-v-cd3914c4">{{activityList[activityIdx]}}</text></block><block wx:else><text class="placeholder data-v-cd3914c4">请选择</text></block><text class="arrow data-v-cd3914c4">▼</text></view></picker><block wx:if="{{errors.activityIdx}}"><view class="error-tip data-v-cd3914c4">{{errors.activityIdx}}</view></block></view></block><block wx:if="{{activityIdx!==null}}"><view class="activity-info data-v-cd3914c4"><view class="info-item data-v-cd3914c4"><text class="label data-v-cd3914c4">活动费用：</text><text class="value data-v-cd3914c4">{{"¥"+currentFee}}</text></view><view class="info-item data-v-cd3914c4"><text class="label data-v-cd3914c4">活动时间：</text><text class="value data-v-cd3914c4">{{currentActivityInfo.time}}</text></view><view class="info-item data-v-cd3914c4"><text class="label data-v-cd3914c4">活动地点：</text><text class="value data-v-cd3914c4">{{currentActivityInfo.location}}</text></view></view></block></view><view class="card data-v-cd3914c4"><view class="card-title data-v-cd3914c4"><text class="icon data-v-cd3914c4">👤</text>报名人信息<text class="required data-v-cd3914c4">*</text></view><view class="form-group data-v-cd3914c4"><input class="input data-v-cd3914c4" placeholder="请输入姓名" maxlength="10" data-event-opts="{{[['blur',[['validateName',['$event']]]],['input',[['__set_model',['','name','$event',[]]]]]]}}" value="{{name}}" bindblur="__e" bindinput="__e"/><block wx:if="{{errors.name}}"><view class="error-tip data-v-cd3914c4">{{errors.name}}</view></block></view><view class="form-group data-v-cd3914c4"><input class="input data-v-cd3914c4" placeholder="请输入联系电话" maxlength="11" type="number" data-event-opts="{{[['blur',[['validatePhone',['$event']]]],['input',[['__set_model',['','phone','$event',[]]]]]]}}" value="{{phone}}" bindblur="__e" bindinput="__e"/><block wx:if="{{errors.phone}}"><view class="error-tip data-v-cd3914c4">{{errors.phone}}</view></block></view><view class="form-group data-v-cd3914c4"><input class="input data-v-cd3914c4" placeholder="请输入身份证号" maxlength="18" data-event-opts="{{[['blur',[['validateIdCard',['$event']]]],['input',[['__set_model',['','idCard','$event',[]]]]]]}}" value="{{idCard}}" bindblur="__e" bindinput="__e"/><block wx:if="{{errors.idCard}}"><view class="error-tip data-v-cd3914c4">{{errors.idCard}}</view></block></view><view class="form-group data-v-cd3914c4"><input class="input data-v-cd3914c4" placeholder="请输入联系地址" maxlength="50" data-event-opts="{{[['blur',[['validateAddress',['$event']]]],['input',[['__set_model',['','address','$event',[]]]]]]}}" value="{{address}}" bindblur="__e" bindinput="__e"/><block wx:if="{{errors.address}}"><view class="error-tip data-v-cd3914c4">{{errors.address}}</view></block></view><view class="form-group data-v-cd3914c4"><input class="input data-v-cd3914c4" placeholder="请输入邮箱（选填）" maxlength="50" type="text" data-event-opts="{{[['input',[['__set_model',['','email','$event',[]]]]]]}}" value="{{email}}" bindinput="__e"/></view></view><view class="card data-v-cd3914c4"><view class="card-title data-v-cd3914c4"><text class="icon data-v-cd3914c4">📞</text>紧急联系人<text class="required data-v-cd3914c4">*</text></view><view class="form-group data-v-cd3914c4"><input class="input data-v-cd3914c4" placeholder="请输入紧急联系人姓名" maxlength="10" data-event-opts="{{[['blur',[['validateEmergencyName',['$event']]]],['input',[['__set_model',['','emergencyName','$event',[]]]]]]}}" value="{{emergencyName}}" bindblur="__e" bindinput="__e"/><block wx:if="{{errors.emergencyName}}"><view class="error-tip data-v-cd3914c4">{{errors.emergencyName}}</view></block></view><view class="form-group data-v-cd3914c4"><input class="input data-v-cd3914c4" placeholder="请输入紧急联系人电话" maxlength="11" type="number" data-event-opts="{{[['blur',[['validateEmergencyPhone',['$event']]]],['input',[['__set_model',['','emergencyPhone','$event',[]]]]]]}}" value="{{emergencyPhone}}" bindblur="__e" bindinput="__e"/><block wx:if="{{errors.emergencyPhone}}"><view class="error-tip data-v-cd3914c4">{{errors.emergencyPhone}}</view></block></view><view class="form-group data-v-cd3914c4"><picker range="{{relationOptions}}" value="{{relationIdx}}" data-event-opts="{{[['change',[['onRelationChange',['$event']]]]]}}" bindchange="__e" class="data-v-cd3914c4"><view class="picker data-v-cd3914c4"><text class="icon data-v-cd3914c4">👥</text>关系：<block wx:if="{{relationIdx!==null}}"><text class="data-v-cd3914c4">{{relationOptions[relationIdx]}}</text></block><block wx:else><text class="placeholder data-v-cd3914c4">请选择</text></block><text class="arrow data-v-cd3914c4">▼</text></view></picker><block wx:if="{{errors.emergencyRelation}}"><view class="error-tip data-v-cd3914c4">{{errors.emergencyRelation}}</view></block></view></view><block wx:if="{{activityIdx!==null}}"><view class="card price-card data-v-cd3914c4"><view class="card-title data-v-cd3914c4"><text class="icon data-v-cd3914c4">💰</text>费用预览</view><view class="price-item data-v-cd3914c4"><text class="data-v-cd3914c4">活动费用：</text><text class="price data-v-cd3914c4">{{"¥"+currentFee}}</text></view><view class="price-total data-v-cd3914c4"><text class="data-v-cd3914c4">总计：</text><text class="total-price data-v-cd3914c4">{{"¥"+currentFee}}</text></view></view></block><view class="card data-v-cd3914c4"><view class="card-title data-v-cd3914c4"><text class="icon data-v-cd3914c4">💡</text>特殊需求（非必填）</view><view class="form-group data-v-cd3914c4"><textarea class="textarea data-v-cd3914c4" placeholder="请输入特殊需求或注意事项（最多100字）" maxlength="100" data-event-opts="{{[['input',[['__set_model',['','specialNeeds','$event',[]]],['onSpecialNeedsInput',['$event']]]]]}}" value="{{specialNeeds}}" bindinput="__e"></textarea><view class="word-count data-v-cd3914c4">{{$root.g0+"/100"}}</view></view></view><view class="card data-v-cd3914c4"><view class="card-title data-v-cd3914c4"><text class="icon data-v-cd3914c4">📋</text>协议确认</view><view class="agreement-section data-v-cd3914c4"><checkbox-group data-event-opts="{{[['change',[['onAgreementChange',['$event']]]]]}}" bindchange="__e" class="data-v-cd3914c4"><label class="agreement-item data-v-cd3914c4"><checkbox value="agree" checked="{{agreed}}" class="data-v-cd3914c4"></checkbox><text class="agreement-text data-v-cd3914c4">我已阅读并同意</text><text data-event-opts="{{[['tap',[['showAgreement',['$event']]]]]}}" class="agreement-link data-v-cd3914c4" bindtap="__e">《活动报名协议》</text></label></checkbox-group><block wx:if="{{errors.agreed}}"><view class="error-tip data-v-cd3914c4">{{errors.agreed}}</view></block></view></view><view class="btn-group data-v-cd3914c4"><button class="form-btn data-v-cd3914c4" type="primary" loading="{{loading}}" data-event-opts="{{[['tap',[['nextStep',['$event']]]]]}}" bindtap="__e"><block wx:if="{{!loading}}"><text class="data-v-cd3914c4">下一步</text></block><block wx:else><text class="data-v-cd3914c4">提交中...</text></block></button><button class="form-btn reset data-v-cd3914c4" type="default" data-event-opts="{{[['tap',[['resetForm',['$event']]]]]}}" bindtap="__e">重置</button></view><view class="back-section data-v-cd3914c4"><button data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-btn data-v-cd3914c4" bindtap="__e">返回上页</button></view></view></view>