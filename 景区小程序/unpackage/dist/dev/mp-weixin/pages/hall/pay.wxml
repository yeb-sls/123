<view class="pay-bg data-v-d9cd836a"><view class="pay-container data-v-d9cd836a"><view class="step-bar data-v-d9cd836a"><view class="step data-v-d9cd836a">1. 选择供品</view><view class="step data-v-d9cd836a">2. 信息确认</view><view class="step active data-v-d9cd836a">3. 支付</view></view><view class="order-section data-v-d9cd836a"><view class="section-title data-v-d9cd836a">订单信息</view><view class="order-card data-v-d9cd836a"><view class="order-item data-v-d9cd836a"><text class="order-label data-v-d9cd836a">订单编号</text><text class="order-value data-v-d9cd836a">{{orderInfo.orderId}}</text></view><view class="order-item data-v-d9cd836a"><text class="order-label data-v-d9cd836a">供养人</text><text class="order-value data-v-d9cd836a">{{orderInfo.name}}</text></view><view class="order-item data-v-d9cd836a"><text class="order-label data-v-d9cd836a">联系方式</text><text class="order-value data-v-d9cd836a">{{orderInfo.phone}}</text></view></view></view><view class="goods-section data-v-d9cd836a"><view class="section-title data-v-d9cd836a">供品清单</view><view class="goods-list data-v-d9cd836a"><block wx:for="{{orderInfo.goodsList}}" wx:for-item="item" wx:for-index="idx" wx:key="idx"><view class="goods-item data-v-d9cd836a"><text class="goods-name data-v-d9cd836a">{{item.name}}</text><text class="goods-qty data-v-d9cd836a">{{"x"+item.quantity}}</text><text class="goods-price data-v-d9cd836a">{{"¥"+item.price}}</text></view></block></view></view><view class="fee-section data-v-d9cd836a"><view class="section-title data-v-d9cd836a">费用明细</view><view class="fee-row data-v-d9cd836a"><text class="data-v-d9cd836a">供品合计</text><text class="data-v-d9cd836a">{{"¥"+goodsTotal}}</text></view><block wx:if="{{orderInfo.postFee}}"><view class="fee-row data-v-d9cd836a"><text class="data-v-d9cd836a">邮寄费用</text><text class="data-v-d9cd836a">{{"¥"+orderInfo.postFee}}</text></view></block><view class="fee-row total data-v-d9cd836a"><text class="data-v-d9cd836a">应付总额</text><text class="total-price data-v-d9cd836a">{{"¥"+totalPrice}}</text></view></view><view class="payment-section data-v-d9cd836a"><view class="section-title data-v-d9cd836a">选择支付方式</view><view class="payment-options data-v-d9cd836a"><block wx:for="{{paymentOptions}}" wx:for-item="option" wx:for-index="index"><view data-event-opts="{{[['tap',[['selectPayment',[index]]]]]}}" class="{{['payment-option','data-v-d9cd836a',(selectedPayment===index)?'active':'']}}" bindtap="__e"><view class="option-left data-v-d9cd836a"><text class="payment-icon data-v-d9cd836a">{{option.icon}}</text><text class="payment-name data-v-d9cd836a">{{option.name}}</text></view><view class="option-right data-v-d9cd836a"><view class="{{['radio','data-v-d9cd836a',(selectedPayment===index)?'checked':'']}}"></view></view></view></block></view></view><view class="pay-safe-tip data-v-d9cd836a"><text class="safe-icon data-v-d9cd836a">🔒</text><text class="safe-text data-v-d9cd836a">本页面已加密，您的支付信息将被严格保护</text></view><view class="pay-help-bar data-v-d9cd836a"><text data-event-opts="{{[['tap',[['showAgreement',['$event']]]]]}}" class="help-link data-v-d9cd836a" bindtap="__e">《支付协议》</text><text data-event-opts="{{[['tap',[['showHelp',['$event']]]]]}}" class="help-link data-v-d9cd836a" bindtap="__e">支付遇到问题？</text></view><view class="pay-btn-section data-v-d9cd836a"><button class="pay-btn data-v-d9cd836a" loading="{{paying}}" data-event-opts="{{[['tap',[['handlePay',['$event']]]]]}}" bindtap="__e">立即支付</button></view></view><uni-popup vue-id="5fe1e7ca-1" type="center" data-ref="payResultPopup" class="data-v-d9cd836a vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-content data-v-d9cd836a"><text class="popup-title data-v-d9cd836a">{{payResult.success?'支付成功':'支付失败'}}</text><text class="popup-msg data-v-d9cd836a">{{payResult.message}}</text><block wx:if="{{!payResult.success}}"><view class="popup-actions data-v-d9cd836a"><button data-event-opts="{{[['tap',[['handlePay',['$event']]]]]}}" class="popup-btn data-v-d9cd836a" bindtap="__e">重新支付</button><button data-event-opts="{{[['tap',[['contactService',['$event']]]]]}}" class="popup-btn outline data-v-d9cd836a" bindtap="__e">联系客服</button></view></block><block wx:else><view class="popup-actions data-v-d9cd836a"><button data-event-opts="{{[['tap',[['closePayResult',['$event']]]]]}}" class="popup-btn data-v-d9cd836a" bindtap="__e">查看订单详情</button></view></block></view></uni-popup><uni-popup vue-id="5fe1e7ca-2" type="center" data-ref="agreementPopup" class="data-v-d9cd836a vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-content data-v-d9cd836a"><text class="popup-title data-v-d9cd836a">支付协议</text><scroll-view style="max-height:400rpx;" scroll-y="{{true}}" class="data-v-d9cd836a"><text class="popup-msg data-v-d9cd836a">1. 您的支付信息将被严格保密，仅用于本次供养订单结算。\n2. 支付成功后不可撤销，如有疑问请联系客服。\n3. 订单如因网络等原因未及时到账，请耐心等待或联系客服处理。\n4. 其他未尽事宜以平台最终解释为准。</text></scroll-view><button data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="popup-btn data-v-d9cd836a" bindtap="__e">我已知晓</button></view></uni-popup><uni-popup vue-id="5fe1e7ca-3" type="center" data-ref="helpPopup" class="data-v-d9cd836a vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-content data-v-d9cd836a"><text class="popup-title data-v-d9cd836a">支付帮助</text><scroll-view style="max-height:400rpx;" scroll-y="{{true}}" class="data-v-d9cd836a"><text class="popup-msg data-v-d9cd836a">如遇支付失败、扣款异常、页面卡顿等问题，请尝试：\n1. 检查网络连接\n2. 更换支付方式\n3. 重新进入小程序\n如仍无法解决，请联系客服：400-888-8888</text></scroll-view><button data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="popup-btn data-v-d9cd836a" bindtap="__e">我已知晓</button></view></uni-popup></view>