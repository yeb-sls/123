<view class="pay-page data-v-31850c98"><view class="step-bar data-v-31850c98"><view class="step data-v-31850c98">1. 选择布施</view><view class="step data-v-31850c98">2. 信息确认</view><view class="step active data-v-31850c98">3. 支付</view></view><view class="card data-v-31850c98"><view class="card-title data-v-31850c98"><text class="icon data-v-31850c98">📋</text>订单信息</view><view class="order-info data-v-31850c98"><view class="info-item data-v-31850c98"><text class="label data-v-31850c98">订单号：</text><text class="value data-v-31850c98">{{orderInfo.orderId}}</text></view><view class="info-item data-v-31850c98"><text class="label data-v-31850c98">布施类型：</text><text class="value data-v-31850c98">{{orderInfo.donateType}}</text></view><block wx:if="{{orderInfo.donateType==='善款'}}"><view class="info-item data-v-31850c98"><text class="label data-v-31850c98">布施金额：</text><text class="value price data-v-31850c98">{{"¥"+orderInfo.totalPrice}}</text></view></block><view class="info-item data-v-31850c98"><text class="label data-v-31850c98">布施人：</text><text class="value data-v-31850c98">{{orderInfo.name}}</text></view></view></view><block wx:if="{{orderInfo.donateType==='善款'}}"><view class="card data-v-31850c98"><view class="card-title data-v-31850c98"><text class="icon data-v-31850c98">💳</text>选择支付方式</view><view class="payment-methods data-v-31850c98"><block wx:for="{{paymentMethods}}" wx:for-item="method" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['selectMethod',[index]]]]]}}" class="{{['method-item','data-v-31850c98',(selectedMethod===index)?'active':'']}}" bindtap="__e"><view class="method-icon data-v-31850c98">{{method.icon}}</view><view class="method-info data-v-31850c98"><view class="method-name data-v-31850c98">{{method.name}}</view><view class="method-desc data-v-31850c98">{{method.desc}}</view></view><view class="method-check data-v-31850c98"><block wx:if="{{selectedMethod===index}}"><text class="data-v-31850c98">✓</text></block></view></view></block></view></view></block><view class="card price-card data-v-31850c98"><view class="card-title data-v-31850c98"><text class="icon data-v-31850c98">💰</text>费用明细</view><block wx:if="{{orderInfo.donateType==='善款'}}"><view class="price-item data-v-31850c98"><text class="data-v-31850c98">布施金额：</text><text class="price data-v-31850c98">{{"¥"+orderInfo.totalPrice}}</text></view></block><block wx:else><view class="price-item data-v-31850c98"><text class="data-v-31850c98">布施类型：</text><text class="price data-v-31850c98">{{orderInfo.donateType}}</text></view></block><view class="price-total data-v-31850c98"><text class="data-v-31850c98">应付金额：</text><text class="total-price data-v-31850c98">{{orderInfo.donateType==='善款'?'¥'+orderInfo.totalPrice:'免费布施'}}</text></view></view><view class="card merit-card data-v-31850c98"><view class="card-title data-v-31850c98"><text class="icon data-v-31850c98">✨</text>功德回向</view><view class="merit-content data-v-31850c98"><text class="data-v-31850c98">愿以此布施功德，回向给一切众生，愿众生离苦得乐，早证菩提。</text><text class="data-v-31850c98">愿以此功德，庄严佛净土，上报四重恩，下济三途苦。</text></view></view><view class="btn-group data-v-31850c98"><button class="pay-btn data-v-31850c98" type="primary" loading="{{loading}}" disabled="{{orderInfo.donateType==='善款'&&selectedMethod===null}}" data-event-opts="{{[['tap',[['handlePayment',['$event']]]]]}}" bindtap="__e"><block wx:if="{{!loading}}"><text class="data-v-31850c98">{{orderInfo.donateType==='善款'?'立即支付':'确认布施'}}</text></block><block wx:else><text class="data-v-31850c98">处理中...</text></block></button><button class="cancel-btn data-v-31850c98" type="default" data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" bindtap="__e">取消</button></view></view>