<view class="form-bg data-v-64bb3d30"><view class="form-container data-v-64bb3d30"><view class="step-bar data-v-64bb3d30"><view class="step active data-v-64bb3d30">1. 选择布施</view><view class="step data-v-64bb3d30">2. 信息确认</view><view class="step data-v-64bb3d30">3. 支付</view></view><view class="card data-v-64bb3d30"><view class="card-title data-v-64bb3d30"><text class="icon data-v-64bb3d30">🎁</text>选择布施类型<text class="required data-v-64bb3d30">*</text></view><view class="form-group data-v-64bb3d30"><picker range="{{donateTypes}}" value="{{donateTypeIdx}}" data-event-opts="{{[['change',[['onSelectType',['$event']]]]]}}" bindchange="__e" class="data-v-64bb3d30"><view class="picker data-v-64bb3d30"><text class="icon data-v-64bb3d30">🛕</text>类型：<block wx:if="{{donateTypeIdx>=0}}"><text class="data-v-64bb3d30">{{donateTypes[donateTypeIdx]}}</text></block><block wx:else><text class="placeholder data-v-64bb3d30">请选择布施类型</text></block><text class="arrow data-v-64bb3d30">▼</text></view></picker><block wx:if="{{errors.donateTypeIdx}}"><view class="error-tip data-v-64bb3d30">{{errors.donateTypeIdx}}</view></block></view></view><block wx:if="{{donateTypeIdx<0}}"><view class="card data-v-64bb3d30"><view class="card-title data-v-64bb3d30"><text class="icon data-v-64bb3d30">💡</text>提示</view><view class="tip-content data-v-64bb3d30"><text class="tip-text data-v-64bb3d30">请先选择布施类型，然后填写相应的布施内容</text></view></view></block><block wx:if="{{donateTypeIdx>=0}}"><view class="card data-v-64bb3d30"><view class="card-title data-v-64bb3d30"><text class="icon data-v-64bb3d30">📝</text>布施内容<text class="required data-v-64bb3d30">*</text></view><block wx:if="{{donateTypeIdx===0}}"><view class="data-v-64bb3d30"><view class="form-group data-v-64bb3d30"><input class="input data-v-64bb3d30" type="number" min="1" placeholder="请输入布施金额（元）" data-event-opts="{{[['input',[['__set_model',['','amount','$event',['number']]]]],['blur',[['$forceUpdate']]]]}}" value="{{amount}}" bindinput="__e" bindblur="__e"/><block wx:if="{{errors.amount}}"><view class="error-tip data-v-64bb3d30">{{errors.amount}}</view></block></view><view class="amount-tips data-v-64bb3d30"><text class="tip-text data-v-64bb3d30">💡 布施金额建议：</text><view class="tip-items data-v-64bb3d30"><text class="tip-item data-v-64bb3d30">• 10-50元：随喜布施</text><text class="tip-item data-v-64bb3d30">• 50-200元：一般布施</text><text class="tip-item data-v-64bb3d30">• 200元以上：大布施</text></view></view></view></block><block wx:if="{{donateTypeIdx===1}}"><view class="data-v-64bb3d30"><view class="form-group data-v-64bb3d30"><input class="input data-v-64bb3d30" placeholder="请输入物品名称" maxlength="20" data-event-opts="{{[['input',[['__set_model',['','itemName','$event',[]]]]]]}}" value="{{itemName}}" bindinput="__e"/><block wx:if="{{errors.itemName}}"><view class="error-tip data-v-64bb3d30">{{errors.itemName}}</view></block></view><view class="form-group data-v-64bb3d30"><input class="input data-v-64bb3d30" type="number" min="1" placeholder="请输入物品数量" data-event-opts="{{[['input',[['__set_model',['','itemCount','$event',['number']]]]],['blur',[['$forceUpdate']]]]}}" value="{{itemCount}}" bindinput="__e" bindblur="__e"/><block wx:if="{{errors.itemCount}}"><view class="error-tip data-v-64bb3d30">{{errors.itemCount}}</view></block></view><view class="form-group data-v-64bb3d30"><textarea class="textarea data-v-64bb3d30" placeholder="请描述物品详情（新旧程度、规格等）" maxlength="100" data-event-opts="{{[['input',[['__set_model',['','itemDesc','$event',[]]]]]]}}" value="{{itemDesc}}" bindinput="__e"></textarea><view class="word-count data-v-64bb3d30">{{$root.g0+"/100"}}</view></view></view></block><block wx:if="{{donateTypeIdx===2}}"><view class="data-v-64bb3d30"><view class="form-group data-v-64bb3d30"><textarea class="textarea data-v-64bb3d30" placeholder="请描述您能提供的服务内容" maxlength="200" data-event-opts="{{[['input',[['__set_model',['','serviceDesc','$event',[]]]]]]}}" value="{{serviceDesc}}" bindinput="__e"></textarea><view class="word-count data-v-64bb3d30">{{$root.g1+"/200"}}</view></view><view class="form-group data-v-64bb3d30"><input class="input data-v-64bb3d30" placeholder="可提供服务的时间" maxlength="50" data-event-opts="{{[['input',[['__set_model',['','serviceTime','$event',[]]]]]]}}" value="{{serviceTime}}" bindinput="__e"/><block wx:if="{{errors.serviceTime}}"><view class="error-tip data-v-64bb3d30">{{errors.serviceTime}}</view></block></view></view></block></view></block><view class="card data-v-64bb3d30"><view class="card-title data-v-64bb3d30"><text class="icon data-v-64bb3d30">👤</text>布施人信息<text class="required data-v-64bb3d30">*</text></view><view class="form-group data-v-64bb3d30"><input class="input data-v-64bb3d30" placeholder="请输入姓名" maxlength="10" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['form']]]]]}}" value="{{form.name}}" bindinput="__e"/><block wx:if="{{errors.name}}"><view class="error-tip data-v-64bb3d30">{{errors.name}}</view></block></view><view class="form-group data-v-64bb3d30"><input class="input data-v-64bb3d30" placeholder="请输入联系电话" maxlength="11" data-event-opts="{{[['input',[['__set_model',['$0','phone','$event',[]],['form']]]]]}}" value="{{form.phone}}" bindinput="__e"/><block wx:if="{{errors.phone}}"><view class="error-tip data-v-64bb3d30">{{errors.phone}}</view></block></view><view class="form-group data-v-64bb3d30"><input class="input data-v-64bb3d30" placeholder="请输入身份证号" maxlength="18" data-event-opts="{{[['input',[['__set_model',['$0','idCard','$event',[]],['form']]]]]}}" value="{{form.idCard}}" bindinput="__e"/><block wx:if="{{errors.idCard}}"><view class="error-tip data-v-64bb3d30">{{errors.idCard}}</view></block></view><view class="form-group data-v-64bb3d30"><textarea class="textarea data-v-64bb3d30" placeholder="请输入联系地址" maxlength="100" data-event-opts="{{[['input',[['__set_model',['$0','address','$event',[]],['form']]]]]}}" value="{{form.address}}" bindinput="__e"></textarea><block wx:if="{{errors.address}}"><view class="error-tip data-v-64bb3d30">{{errors.address}}</view></block></view></view><view class="card data-v-64bb3d30"><view class="card-title data-v-64bb3d30"><text class="icon data-v-64bb3d30">🙏</text>许愿语（可选）</view><view class="form-group data-v-64bb3d30"><textarea class="textarea data-v-64bb3d30" placeholder="请输入您的愿望（最多100字）" maxlength="100" data-event-opts="{{[['input',[['__set_model',['$0','wish','$event',[]],['form']],['onWishInput',['$event']]]]]}}" value="{{form.wish}}" bindinput="__e"></textarea><view class="word-count data-v-64bb3d30">{{$root.g2+"/100"}}</view></view></view><block wx:if="{{showPrice}}"><view class="card price-card data-v-64bb3d30"><view class="card-title data-v-64bb3d30"><text class="icon data-v-64bb3d30">💰</text>费用预览</view><view class="price-item data-v-64bb3d30"><text class="data-v-64bb3d30">布施费用：</text><text class="price data-v-64bb3d30">{{"¥"+$root.m0}}</text></view><view class="price-total data-v-64bb3d30"><text class="data-v-64bb3d30">总计：</text><text class="total-price data-v-64bb3d30">{{"¥"+$root.m1}}</text></view></view></block><view class="btn-group data-v-64bb3d30"><button class="form-btn data-v-64bb3d30" type="primary" loading="{{loading}}" data-event-opts="{{[['tap',[['nextStep',['$event']]]]]}}" bindtap="__e"><block wx:if="{{!loading}}"><text class="data-v-64bb3d30">下一步</text></block><block wx:else><text class="data-v-64bb3d30">提交中...</text></block></button><button class="form-btn reset data-v-64bb3d30" type="default" data-event-opts="{{[['tap',[['resetForm',['$event']]]]]}}" bindtap="__e">重置</button></view><view class="back-section data-v-64bb3d30"><button data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-btn data-v-64bb3d30" bindtap="__e">返回上页</button></view></view></view>