# 合坛法会独立系统架构说明

## 系统概述

根据您的要求，合坛法会和专场法会是两个完全独立的系统，不能混为一谈。我已经为合坛法会创建了完全独立的前后台系统。

## 系统架构

### 前台系统 (用户端)

#### 合坛法会前台页面
- **主页面**: `pages/fahui/joint/index.vue`
  - 头图轮播展示
  - 图文介绍
  - 法会项目列表
  - 服务说明

#### 数据来源
- **头图数据**: `getJointBanners` 云函数 → `joint_banners` 数据表
- **介绍数据**: `getJointIntros` 云函数 → `joint_intros` 数据表  
- **项目数据**: `getJointProjects` 云函数 → `joint_projects` 数据表

### 后台系统 (管理端)

#### 合坛法会后台管理
- **主页面**: `pages/admin/joint/index.vue`
  - 板块头图管理
  - 图文介绍管理
  - 法会项目管理
  - 代办物品管理
  - 收件信息管理
  - 订单管理
  - 数据统计
  - 功能测试

## 数据表设计

### 合坛法会专用数据表

#### 1. 头图表 (joint_banners)
```javascript
{
  _id: "头图ID",
  image: "图片URL",
  enabled: true,
  create_time: "创建时间"
}
```

#### 2. 介绍表 (joint_intros)
```javascript
{
  _id: "介绍ID",
  content: "介绍内容",
  enabled: true,
  order: 0,
  textColor: "#333333",
  bgColor: "#FFFFFF",
  bgImage: "背景图片URL"
}
```

#### 3. 项目表 (joint_projects)
```javascript
{
  _id: "项目ID",
  name: "项目名称",
  description: "项目描述",
  category: "项目分类",
  price: 100,
  deadline: "2025-12-31",
  dates: ["2025-10-01", "2025-10-15"],
  maxApplicants: 50,
  goods: [],
  needReceiver: false,
  currentApplicants: 0
}
```

#### 4. 订单表 (joint_orders)
```javascript
{
  _id: "订单ID",
  project_id: "项目ID",
  projectName: "项目名称",
  fahuiDate: "法会日期",
  applicants: [],
  goods: [],
  receiver: {},
  totalCost: 100,
  status: "待确认",
  createTime: "创建时间",
  payTime: "支付时间",
  confirmBy: "确认人",
  confirmTime: "确认时间",
  adminRemarks: [],
  logs: []
}
```

## 云函数设计

### 合坛法会专用云函数

#### 1. getJointBanners
- **功能**: 获取合坛法会头图
- **数据表**: `joint_banners`
- **返回**: 启用的头图列表

#### 2. getJointIntros  
- **功能**: 获取合坛法会介绍
- **数据表**: `joint_intros`
- **返回**: 启用的介绍列表

#### 3. getJointProjects
- **功能**: 获取合坛法会项目
- **数据表**: `joint_projects`
- **返回**: 项目列表（包含报名人数统计）

#### 4. getJointOrders
- **功能**: 获取合坛法会订单
- **数据表**: `joint_orders`
- **返回**: 订单列表（包含操作日志和备注）

## 路由配置

### 前台路由
```json
{
  "path": "pages/fahui/joint/index",
  "style": { "navigationBarTitleText": "合坛法会" }
}
```

### 后台路由
```json
{
  "path": "pages/admin/joint/index",
  "style": { "navigationBarTitleText": "合坛法会管理系统" }
}
```

## 系统特点

### 1. 完全独立
- 合坛法会和专场法会使用不同的数据表
- 使用不同的云函数
- 前后台页面完全分离

### 2. 数据隔离
- 合坛法会数据存储在 `joint_*` 表中
- 专场法会数据存储在 `fahui_*` 表中
- 两个系统数据完全隔离，互不影响

### 3. 功能完整
- 前台：展示、报名、支付
- 后台：配置、管理、统计

## 开发状态

### 已完成
- ✅ 前台主页面 (`pages/fahui/joint/index.vue`)
- ✅ 后台主页面 (`pages/admin/joint/index.vue`)
- ✅ 基础云函数 (getJointBanners, getJointIntros, getJointProjects, getJointOrders)
- ✅ 路由配置

### 待开发
- 🔄 后台管理子页面 (头图、介绍、项目、代办物品、收件信息、订单管理)
- 🔄 前台报名表单页面
- 🔄 前台确认和支付页面
- 🔄 完整的云函数 (增删改查)

## 使用说明

### 前台访问
1. 首页 → 合坛法会 → 进入合坛法会主页面
2. 查看法会项目 → 点击"立即报名"

### 后台管理
1. 后台管理 → 合坛法会管理系统
2. 目前显示"功能开发中"，等待后续开发

## 后续开发计划

1. **第一阶段**: 完善后台管理功能
   - 头图管理页面
   - 介绍管理页面
   - 项目管理页面

2. **第二阶段**: 完善前台功能
   - 报名表单页面
   - 确认页面
   - 支付页面

3. **第三阶段**: 完善云函数
   - 增删改查操作
   - 订单处理
   - 数据统计

## 注意事项

1. 合坛法会系统与专场法会系统完全独立
2. 数据表命名使用 `joint_` 前缀，避免混淆
3. 云函数命名使用 `getJoint` 前缀，便于识别
4. 页面路径使用 `joint` 目录，结构清晰

这样的架构确保了合坛法会和专场法会是两个完全独立的系统，不会相互干扰。 