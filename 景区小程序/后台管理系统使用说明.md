# 景区小程序后台管理系统使用说明

## 系统概述

后台管理系统为景区小程序提供完整的内容管理功能，包括首页管理、法会管理、供灯管理、殿堂供品管理、功德布施管理、活动管理和系统管理等功能模块。

## 快速开始

### 1. 访问后台管理

后台管理系统仅供开发人员使用，游客无法访问。在微信开发者工具中，通过以下路径访问：

#### 方式一：开发人员专用页面（推荐）
```
pages/developer/index
```
这个页面提供了完整的后台管理入口，包括：
- 后台管理主页面
- 系统测试页面
- 数据库初始化功能

#### 方式二：直接访问
- 后台管理主页面：`pages/admin/index`
- 测试页面：`pages/admin/test`

### 2. 初始化数据库

首次使用前，建议先初始化数据库：

#### 方式一：通过开发人员页面
1. 访问 `pages/developer/index`
2. 点击"初始化数据库"按钮
3. 系统将自动创建必要的数据库集合和示例数据

#### 方式二：通过测试页面
1. 访问测试页面 `pages/admin/test`
2. 点击"初始化数据库"按钮
3. 系统将自动创建必要的数据库集合和示例数据

### 3. 功能模块说明

#### 首页管理
- **轮播图管理** (`pages/admin/home/banner`)
  - 添加、编辑、删除首页轮播图
  - 支持图片上传和链接设置
  - 可控制显示顺序和启用状态

- **导航管理** (`pages/admin/home/nav`)
  - 管理首页导航按钮
  - 支持图标、颜色、背景色设置
  - 可控制显示顺序和启用状态

- **介绍管理** (`pages/admin/home/intro`)
  - 管理首页介绍内容
  - 支持多种内容类型（介绍、服务说明、公告）
  - 可设置样式、背景图片等

#### 法会管理
- **法会配置管理** (`pages/admin/fahui/config`) - 管理专场法会和合坛法会的配置信息
- **法会订单管理** (`pages/admin/fahui/orders`) - 查看和管理法会报名订单

#### 供灯管理
- **供灯配置管理** (`pages/admin/light/config`) - 管理供灯祈福项目和价格配置
- **供灯订单管理** (`pages/admin/light/orders`) - 查看供灯祈福订单

#### 殿堂供品管理（待开发）
- 供品项目配置
- 供品订单管理

#### 功德布施管理（待开发）
- 布施项目配置
- 布施记录管理

#### 活动管理（待开发）
- 活动项目配置
- 活动报名管理

#### 系统管理（待开发）
- 用户管理
- 功德值管理
- 系统设置

## 数据库结构

### 首页相关集合

#### home_banners（轮播图）
```javascript
{
  _id: "文档ID",
  image: "图片URL",
  title: "标题",
  link: "链接地址",
  enabled: true, // 是否启用
  order: 1, // 排序
  createTime: "创建时间",
  updateTime: "更新时间"
}
```

#### home_navs（导航）
```javascript
{
  _id: "文档ID",
  text: "导航文本",
  icon: "图标",
  url: "跳转地址",
  color: "文字颜色",
  bgColor: "背景颜色",
  enabled: true, // 是否启用
  order: 1, // 排序
  createTime: "创建时间",
  updateTime: "更新时间"
}
```

#### home_intros（介绍）
```javascript
{
  _id: "文档ID",
  type: "intro|service|notice", // 内容类型
  title: "标题",
  content: "内容",
  bgImage: "背景图片",
  enabled: true, // 是否启用
  showBorder: true, // 是否显示边框
  textColor: "#333333", // 文字颜色
  bgColor: "#FFFFFF", // 背景颜色
  order: 1, // 排序
  createTime: "创建时间",
  updateTime: "更新时间"
}
```

## 云函数说明

### 首页管理相关云函数

#### getHomeBanners
- 功能：获取首页轮播图列表
- 返回：启用的轮播图数据，按排序字段排序

#### addHomeBanner
- 功能：添加轮播图
- 参数：banner对象
- 返回：添加结果

#### updateHomeBanner
- 功能：更新轮播图
- 参数：id, banner对象
- 返回：更新结果

#### deleteHomeBanner
- 功能：删除轮播图
- 参数：id
- 返回：删除结果

#### getHomeNavs
- 功能：获取首页导航列表
- 返回：启用的导航数据，按排序字段排序

#### addHomeNav
- 功能：添加导航
- 参数：nav对象
- 返回：添加结果

#### updateHomeNav
- 功能：更新导航
- 参数：id, nav对象
- 返回：更新结果

#### deleteHomeNav
- 功能：删除导航
- 参数：id
- 返回：删除结果

#### getHomeIntros
- 功能：获取首页介绍列表
- 返回：启用的介绍数据，按排序字段排序

#### addHomeIntro
- 功能：添加介绍
- 参数：intro对象
- 返回：添加结果

#### updateHomeIntro
- 功能：更新介绍
- 参数：id, intro对象
- 返回：更新结果

#### deleteHomeIntro
- 功能：删除介绍
- 参数：id
- 返回：删除结果

#### updateIntroOrder
- 功能：更新介绍排序
- 参数：intros数组
- 返回：更新结果

#### initDatabase
- 功能：初始化数据库
- 返回：数据库集合状态和示例数据

## 开发计划

### 已完成功能
- ✅ 后台管理主页面
- ✅ 首页轮播图管理
- ✅ 首页导航管理
- ✅ 首页介绍管理
- ✅ 法会配置管理
- ✅ 法会订单管理
- ✅ 供灯配置管理
- ✅ 相关云函数开发
- ✅ 数据库初始化功能

### 待开发功能
- ⏳ 法会管理模块
- ⏳ 供灯管理模块
- ⏳ 殿堂供品管理模块
- ⏳ 功德布施管理模块
- ⏳ 活动管理模块
- ⏳ 系统管理模块
- ⏳ 用户权限管理
- ⏳ 数据统计功能

## 使用建议

1. **首次使用**：建议先运行数据库初始化，创建必要的集合和示例数据
2. **内容管理**：通过首页管理模块配置小程序首页内容
3. **测试验证**：使用测试页面验证各项功能是否正常
4. **数据备份**：定期备份重要数据
5. **权限控制**：后台管理仅供开发人员使用，游客无法访问
6. **安全考虑**：生产环境中建议添加登录验证机制

## 技术支持

如遇到问题，请检查：
1. uniCloud连接是否正常
2. 云函数是否已部署
3. 数据库集合是否已创建
4. 网络连接是否正常

## 更新日志

### v1.0.0 (2024-01-XX)
- 创建后台管理系统基础框架
- 实现首页管理功能（轮播图、导航、介绍）
- 开发相关云函数
- 添加数据库初始化功能
- 创建测试页面 