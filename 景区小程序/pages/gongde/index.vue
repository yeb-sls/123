<template>
  <view class="gongde-bg">
    <view class="gongde-container">
      <!-- é¡¶éƒ¨å›¾æ–‡ä»‹ç» -->
      <view class="header-section">
        <image class="gongde-banner" src="https://k.sinaimg.cn/n/sinacn10122/592/w870h522/20190806/40f6-iatixpn0632791.jpg/w700d1q75cms.jpg" mode="aspectFill" />
        <view class="intro-card">
          <view class="intro-title">
            <text class="icon">ğŸ™</text>åŠŸå¾·å¸ƒæ–½
          </view>
          <view class="intro-text">
            åŠŸå¾·å¸ƒæ–½æ˜¯ä½›æ•™å…­åº¦ä¹‹ä¸€ï¼Œé€šè¿‡å¸ƒæ–½å–„æ¬¾ã€å®ç‰©æˆ–æœåŠ¡ï¼Œå¹¿ç§ç¦ç”°ï¼Œç§¯ç´¯åŠŸå¾·ã€‚
            å¸ƒæ–½ä¸ä»…èƒ½å¸®åŠ©ä»–äººï¼Œæ›´èƒ½å‡€åŒ–å¿ƒçµï¼Œå¢é•¿æ™ºæ…§ï¼Œè·å¾—æ— é‡ç¦æŠ¥ã€‚
            æ„¿æ‚¨çš„å¸ƒæ–½å¦‚ç”˜éœ²èˆ¬æ»‹æ¶¦ä¼—ç”Ÿï¼ŒåŠŸå¾·æ— é‡ã€‚
          </view>
        </view>
      </view>

      <!-- å¸ƒæ–½ç±»å‹ä»‹ç» -->
      <view class="types-section">
        <view class="section-title">å¸ƒæ–½ç±»å‹</view>
        <view class="types-grid">
          <view class="type-item" v-for="(type, index) in donateTypes" :key="index">
            <view class="type-icon">{{ type.icon }}</view>
            <view class="type-name">{{ type.name }}</view>
            <view class="type-desc">{{ type.desc }}</view>
          </view>
        </view>
      </view>

      <!-- åŠŸå¾·åˆ©ç›Š -->
      <view class="benefits-section">
        <view class="section-title">å¸ƒæ–½åŠŸå¾·</view>
        <view class="benefits-list">
          <view class="benefit-item" v-for="(benefit, index) in benefits" :key="index">
            <text class="benefit-icon">{{ benefit.icon }}</text>
            <text class="benefit-text">{{ benefit.text }}</text>
          </view>
        </view>
      </view>

      <!-- å¸ƒæ–½æ•…äº‹ -->
      <view class="stories-section">
        <view class="section-title">å¸ƒæ–½æ•…äº‹</view>
        <view class="story-card">
          <view class="story-title">èˆèº«é¥²è™</view>
          <view class="story-content">
            é‡Šè¿¦ç‰Ÿå°¼ä½›å‰ä¸–ä¸ºè¨åŸµå¤ªå­æ—¶ï¼Œè§ä¸€æ¯è™é¥¥é¥¿éš¾è€ï¼Œæ¬²é£Ÿå…¶å­ï¼Œå¿ƒç”Ÿæ…ˆæ‚²ï¼Œèˆèº«é¥²è™ï¼Œæ•‘æ´»äº†æ¯è™å’Œè™å­ã€‚è¿™ä¸ªæ•…äº‹å‘Šè¯‰æˆ‘ä»¬ï¼Œå¸ƒæ–½çš„æœ€é«˜å¢ƒç•Œæ˜¯èˆå·±ä¸ºäººã€‚
          </view>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="action-section">
        <button class="primary-btn" type="primary" @click="goForm">
          <text class="icon">ğŸ™</text>å¼€å§‹å¸ƒæ–½
        </button>
        <button class="secondary-btn" @click="goRecord">
          <text class="icon">ğŸ“‹</text>æˆ‘çš„å¸ƒæ–½
        </button>
      </view>
    </view>
  </view>
</template>

<script>
export default {
  data() {
    return {
      donateTypes: [
        {
          icon: 'ğŸ’°',
          name: 'å–„æ¬¾å¸ƒæ–½',
          desc: 'æèµ å–„æ¬¾ï¼Œç”¨äºå¯ºé™¢å»ºè®¾ã€æ…ˆå–„äº‹ä¸š'
        },
        {
          icon: 'ğŸ',
          name: 'å®ç‰©å¸ƒæ–½',
          desc: 'æèµ ç‰©å“ï¼Œå¦‚è¡£ç‰©ã€é£Ÿå“ã€æ—¥ç”¨å“'
        },
        {
          icon: 'ğŸ¤',
          name: 'æœåŠ¡å¸ƒæ–½',
          desc: 'æä¾›å¿—æ„¿æœåŠ¡ï¼Œå¦‚æ¸…æ´ã€æŠ¤æŒç­‰'
        }
      ],
      benefits: [
        {
          icon: 'âœ¨',
          text: 'æ¶ˆé™¤ä¸šéšœï¼Œå¢é•¿ç¦æ…§'
        },
        {
          icon: 'ğŸ•Šï¸',
          text: 'å®¶åº­å’Œç¦ï¼Œäº‹ä¸šé¡ºé‚'
        },
        {
          icon: 'ğŸŒº',
          text: 'èº«å¿ƒå¥åº·ï¼Œå¹³å®‰å‰ç¥¥'
        },
        {
          icon: 'ğŸŒŸ',
          text: 'åŠŸå¾·æ— é‡ï¼Œåˆ©ç›Šä¼—ç”Ÿ'
        }
      ]
    }
  },
  methods: {
    goForm() {
      uni.showLoading({ title: 'åŠ è½½ä¸­...' });
      
      uni.navigateTo({ 
        url: '/pages/gongde/form',
        success: () => {
          uni.hideLoading();
          console.log('è·³è½¬åˆ°åŠŸå¾·å¸ƒæ–½è¡¨å•é¡µæˆåŠŸ');
        },
        fail: (err) => {
          uni.hideLoading();
          console.error('è·³è½¬å¤±è´¥:', err);
          uni.showToast({ 
            title: 'é¡µé¢è·³è½¬å¤±è´¥ï¼Œè¯·é‡è¯•', 
            icon: 'none',
            duration: 2000
          });
        }
      });
    },
    goRecord() {
      uni.navigateTo({ 
        url: '/pages/profile/gongde',
        success: () => {
          console.log('è·³è½¬åˆ°åŠŸå¾·å¸ƒæ–½è®°å½•é¡µæˆåŠŸ');
        },
        fail: (err) => {
          console.error('è·³è½¬è®°å½•é¡µå¤±è´¥:', err);
          // å¦‚æœè·³è½¬å¤±è´¥ï¼Œè·³è½¬åˆ°ä¸ªäººä¸­å¿ƒ
          uni.switchTab({
            url: '/pages/profile/index',
            fail: () => {
              uni.showToast({ 
                title: 'é¡µé¢è·³è½¬å¤±è´¥', 
                icon: 'none',
                duration: 2000
              });
            }
          });
        }
      });
    }
  }
}
</script>

<style scoped>
.gongde-bg {
  min-height: 100vh;
  background: linear-gradient(180deg, #e0eaff 0%, #f8f8f8 100%);
  padding-bottom: 40rpx;
}

.gongde-container {
  padding-top: 1rpx;
}

.header-section {
  margin-bottom: 24rpx;
}

.gongde-banner {
  width: 100%;
  height: 300rpx;
}

.intro-card {
  background: #fff;
  margin: 0 16rpx;
  border-radius: 18rpx;
  padding: 32rpx 24rpx;
  box-shadow: 0 2rpx 12rpx #e0eaff;
  margin-top: -20rpx;
  position: relative;
  z-index: 1;
}

.intro-title {
  font-size: 32rpx;
  font-weight: bold;
  color: #2d8cf0;
  margin-bottom: 16rpx;
  display: flex;
  align-items: center;
}

.icon {
  font-size: 30rpx;
  margin-right: 8rpx;
}

.intro-text {
  font-size: 28rpx;
  color: #666;
  line-height: 1.6;
}

.types-section,
.benefits-section,
.stories-section {
  background: #fff;
  border-radius: 18rpx;
  margin: 24rpx 16rpx 0 16rpx;
  padding: 32rpx 24rpx;
  box-shadow: 0 2rpx 12rpx #e0eaff;
}

.section-title {
  font-size: 30rpx;
  font-weight: bold;
  color: #2d8cf0;
  margin-bottom: 24rpx;
  display: flex;
  align-items: center;
}

.types-grid {
  display: grid;
  grid-template-columns: repeat(1, 1fr);
  gap: 24rpx;
}

.type-item {
  text-align: center;
  padding: 24rpx;
  border: 2rpx solid #e0eaff;
  border-radius: 12rpx;
  background: #f8f9fa;
}

.type-icon {
  font-size: 48rpx;
  margin-bottom: 12rpx;
}

.type-name {
  font-size: 28rpx;
  font-weight: bold;
  color: #333;
  margin-bottom: 8rpx;
}

.type-desc {
  font-size: 24rpx;
  color: #666;
  line-height: 1.4;
}

.benefits-list {
  display: flex;
  flex-direction: column;
  gap: 16rpx;
}

.benefit-item {
  display: flex;
  align-items: center;
  padding: 16rpx;
  background: linear-gradient(135deg, #fff7ec 0%, #fff 100%);
  border-radius: 12rpx;
  border: 2rpx solid #ffd591;
}

.benefit-icon {
  font-size: 32rpx;
  margin-right: 16rpx;
}

.benefit-text {
  font-size: 26rpx;
  color: #666;
  flex: 1;
}

.story-card {
  background: linear-gradient(135deg, #f0f8ff 0%, #fff 100%);
  border-radius: 12rpx;
  padding: 24rpx;
  border: 2rpx solid #b3c6e0;
}

.story-title {
  font-size: 28rpx;
  font-weight: bold;
  color: #2d8cf0;
  margin-bottom: 12rpx;
}

.story-content {
  font-size: 26rpx;
  color: #666;
  line-height: 1.6;
}

.action-section {
  margin: 48rpx 16rpx 0 16rpx;
  display: flex;
  flex-direction: column;
  gap: 24rpx;
}

.primary-btn,
.secondary-btn {
  width: 100%;
  height: 88rpx;
  border-radius: 44rpx;
  font-size: 32rpx;
  font-weight: bold;
  letter-spacing: 2rpx;
  display: flex;
  align-items: center;
  justify-content: center;
}

.primary-btn {
  background: linear-gradient(90deg, #2d8cf0 0%, #5cadff 100%);
  color: #fff;
  box-shadow: 0 4rpx 16rpx #b3c6e0;
}

.secondary-btn {
  background: #f8f9fa;
  color: #2d8cf0;
  border: 2rpx solid #e0eaff;
}
</style>