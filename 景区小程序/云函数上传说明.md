# 云函数上传说明

## 问题描述

当前遇到错误：`云函数[updateJointGoodsConfig]在云端不存在`，这是因为新创建的云函数还没有上传到云端。

## 需要上传的云函数

以下云函数需要上传到云端：

1. **getJointGoodsConfig** - 获取合坛法会代办物品模块配置
2. **updateJointGoodsConfig** - 更新合坛法会代办物品模块配置

## 上传方法

### 方法一：使用 HBuilderX 上传

1. 打开 HBuilderX
2. 在项目管理器中找到 `uniCloud-aliyun/cloudfunctions/` 目录
3. 右键点击 `getJointGoodsConfig` 文件夹
4. 选择 "上传部署"
5. 重复步骤 3-4，上传 `updateJointGoodsConfig` 文件夹

### 方法二：使用 uniCloud 控制台

1. 登录 [uniCloud 控制台](https://unicloud.dcloud.net.cn/)
2. 选择对应的服务空间
3. 进入 "云函数" 页面
4. 点击 "上传云函数"
5. 选择对应的云函数文件夹进行上传

### 方法三：使用命令行上传

如果已安装 uniCloud CLI，可以使用以下命令：

```bash
# 上传单个云函数
uniCloud cloud function upload getJointGoodsConfig
uniCloud cloud function upload updateJointGoodsConfig

# 或者上传所有云函数
uniCloud cloud function upload --all
```

## 验证上传

上传完成后，可以通过以下方式验证：

1. 在 HBuilderX 中查看云函数列表，确认状态为"已部署"
2. 在 uniCloud 控制台中查看云函数列表
3. 在前端代码中调用云函数，不再出现"云函数不存在"的错误

## 注意事项

1. **确保服务空间正确**：上传前确认选择了正确的服务空间
2. **依赖安装**：云函数的 `node_modules` 文件夹会自动生成
3. **权限设置**：确保云函数有正确的访问权限
4. **版本管理**：建议在重要更新前备份云函数代码

## 相关文件

- `uniCloud-aliyun/cloudfunctions/getJointGoodsConfig/index.js`
- `uniCloud-aliyun/cloudfunctions/getJointGoodsConfig/package.json`
- `uniCloud-aliyun/cloudfunctions/updateJointGoodsConfig/index.js`
- `uniCloud-aliyun/cloudfunctions/updateJointGoodsConfig/package.json`

## 功能说明

### getJointGoodsConfig
- **功能**：获取合坛法会代办物品模块的启用状态
- **返回**：`{ code: 0, data: { enabled: boolean } }`

### updateJointGoodsConfig
- **功能**：更新合坛法会代办物品模块的启用状态
- **参数**：`{ enabled: boolean }`
- **返回**：`{ success: boolean, message: string }`

## 数据库集合

这些云函数会操作 `joint_goods_config` 集合，包含以下字段：
- `enabled`: 模块是否启用
- `create_time`: 创建时间
- `update_time`: 更新时间

上传完成后，代办物品模块的启用/禁用功能就可以正常使用了。 