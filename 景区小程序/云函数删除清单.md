# 云函数删除清单

## 删除原则

1. **已整合到云对象中的云函数**：功能已迁移到云对象，可以安全删除
2. **测试和初始化云函数**：仅用于测试或初始化，不再需要
3. **重复或冗余云函数**：功能重复，保留一个即可
4. **未使用的云函数**：从未被调用或已废弃

## 可以删除的云函数列表

### 1. 通知系统相关（已整合到 notification-system 云对象）
- ✅ `getUnreadNotificationCount` - 获取未读通知数量
- ✅ `getAdminNotifications` - 获取管理员通知列表
- ✅ `markNotificationAsRead` - 标记通知为已读
- ✅ `markAllNotificationsAsRead` - 标记所有通知为已读
- ✅ `notifyAdminOnPayment` - 支付成功后通知管理员

### 2. 合坛法会相关（已整合到 joint-management 云对象）
- ✅ `getJointProjects` - 获取合坛法会项目
- ✅ `addJointProject` - 添加合坛法会项目
- ✅ `updateJointProject` - 更新合坛法会项目
- ✅ `deleteJointProject` - 删除合坛法会项目
- ✅ `getJointOrders` - 获取合坛法会订单
- ✅ `createJointOrder` - 创建合坛法会订单
- ✅ `updateJointOrderStatus` - 更新合坛法会订单状态
- ✅ `addJointOrderRemark` - 添加合坛法会订单备注
- ✅ `exportJointOrders` - 导出合坛法会订单
- ✅ `getJointGoods` - 获取合坛法会物品
- ✅ `addJointGood` - 添加合坛法会物品
- ✅ `updateJointGood` - 更新合坛法会物品
- ✅ `deleteJointGood` - 删除合坛法会物品
- ✅ `getJointGoodsConfig` - 获取合坛法会物品配置
- ✅ `updateJointGoodsConfig` - 更新合坛法会物品配置
- ✅ `getJointReceivers` - 获取合坛法会收件人
- ✅ `addJointReceiver` - 添加合坛法会收件人
- ✅ `updateJointReceiver` - 更新合坛法会收件人
- ✅ `deleteJointReceiver` - 删除合坛法会收件人
- ✅ `getJointReceiverConfig` - 获取合坛法会收件配置
- ✅ `updateJointReceiverConfig` - 更新合坛法会收件配置
- ✅ `getJointBanners` - 获取合坛法会横幅
- ✅ `addJointBanner` - 添加合坛法会横幅
- ✅ `updateJointBanner` - 更新合坛法会横幅
- ✅ `deleteJointBanner` - 删除合坛法会横幅
- ✅ `getJointIntros` - 获取合坛法会介绍
- ✅ `addJointIntro` - 添加合坛法会介绍
- ✅ `updateJointIntro` - 更新合坛法会介绍
- ✅ `deleteJointIntro` - 删除合坛法会介绍

### 3. 专场法会相关（已整合到 fahui-management 云对象）
- ✅ `getFahuiProjects` - 获取专场法会项目
- ✅ `addFahuiProject` - 添加专场法会项目
- ✅ `updateFahuiProject` - 更新专场法会项目
- ✅ `deleteFahuiProject` - 删除专场法会项目
- ✅ `getFahuiOrders` - 获取专场法会订单
- ✅ `submitFahuiOrder` - 提交专场法会订单
- ✅ `updateFahuiOrderStatus` - 更新专场法会订单状态
- ✅ `addFahuiOrderRemark` - 添加专场法会订单备注
- ✅ `deleteFahuiOrder` - 删除专场法会订单
- ✅ `getFahuiConfigs` - 获取专场法会配置
- ✅ `addFahuiConfig` - 添加专场法会配置
- ✅ `updateFahuiConfig` - 更新专场法会配置
- ✅ `deleteFahuiConfig` - 删除专场法会配置
- ✅ `getFahuiBanners` - 获取专场法会横幅
- ✅ `addFahuiBanner` - 添加专场法会横幅
- ✅ `updateFahuiBanner` - 更新专场法会横幅
- ✅ `deleteFahuiBanner` - 删除专场法会横幅
- ✅ `getFahuiIntros` - 获取专场法会介绍
- ✅ `addFahuiIntro` - 添加专场法会介绍
- ✅ `updateFahuiIntro` - 更新专场法会介绍
- ✅ `deleteFahuiIntro` - 删除专场法会介绍
- ✅ `getFahuiReceivers` - 获取专场法会收件人
- ✅ `addFahuiReceiver` - 添加专场法会收件人
- ✅ `updateFahuiReceiver` - 更新专场法会收件人
- ✅ `deleteFahuiReceiver` - 删除专场法会收件人
- ✅ `getFahuiReceiverConfig` - 获取专场法会收件配置
- ✅ `updateFahuiReceiverConfig` - 更新专场法会收件配置
- ✅ `getFahuiSpecialIntro` - 获取专场法会特殊介绍
- ✅ `addFahuiSpecialIntro` - 添加专场法会特殊介绍
- ✅ `updateFahuiSpecialIntro` - 更新专场法会特殊介绍
- ✅ `deleteFahuiSpecialIntro` - 删除专场法会特殊介绍

### 4. 通用管理相关（已整合到 common-management 云对象）
- ✅ `getHomeBanners` - 获取首页横幅
- ✅ `addHomeBanner` - 添加首页横幅
- ✅ `updateHomeBanner` - 更新首页横幅
- ✅ `deleteHomeBanner` - 删除首页横幅
- ✅ `getHomeNavs` - 获取首页导航
- ✅ `addHomeNav` - 添加首页导航
- ✅ `updateHomeNav` - 更新首页导航
- ✅ `deleteHomeNav` - 删除首页导航
- ✅ `getHomeIntros` - 获取首页介绍
- ✅ `addHomeIntro` - 添加首页介绍
- ✅ `updateHomeIntro` - 更新首页介绍
- ✅ `deleteHomeIntro` - 删除首页介绍
- ✅ `getLightItems` - 获取供灯项目
- ✅ `getHallItems` - 获取殿堂项目
- ✅ `getDelegateGoods` - 获取代办物品
- ✅ `addDelegateGood` - 添加代办物品
- ✅ `updateDelegateGood` - 更新代办物品
- ✅ `deleteDelegateGood` - 删除代办物品
- ✅ `getGongdeConfig` - 获取功德配置
- ✅ `updateGongdeConfig` - 更新功德配置
- ✅ `getHallConfig` - 获取殿堂配置
- ✅ `updateHallConfig` - 更新殿堂配置
- ✅ `getLightConfig` - 获取供灯配置
- ✅ `updateLightConfig` - 更新供灯配置
- ✅ `updateBannerOrder` - 更新横幅排序
- ✅ `updateIntroOrder` - 更新介绍排序
- ✅ `updateNavOrder` - 更新导航排序

### 5. 测试和初始化云函数（可以删除）
- ✅ `initDatabase` - 初始化数据库（仅用于测试）
- ✅ `initJointDatabase` - 初始化合坛法会数据库（仅用于测试）
- ✅ `checkJointDatabase` - 检查合坛法会数据库（仅用于测试）
- ✅ `checkJointGoodsConfig` - 检查合坛法会物品配置（仅用于测试）
- ✅ `checkJointReceiverConfig` - 检查合坛法会收件配置（仅用于测试）
- ✅ `getJointProject` - 获取单个合坛法会项目（功能重复）
- ✅ `getJointReceiver` - 获取单个合坛法会收件人（功能重复）

### 6. 统计相关云函数（可选删除）
- ✅ `getFahuiStats` - 获取专场法会统计（可选）
- ✅ `getAdminStats` - 获取管理员统计（可选）

## 删除步骤

### 步骤1：备份重要数据
1. 确保所有重要数据已备份
2. 确认云对象功能正常

### 步骤2：分批删除云函数
1. **第一批**：删除通知系统相关云函数（5个）
2. **第二批**：删除合坛法会相关云函数（25个）
3. **第三批**：删除专场法会相关云函数（20个）
4. **第四批**：删除通用管理相关云函数（15个）
5. **第五批**：删除测试和初始化云函数（7个）
6. **第六批**：删除统计相关云函数（2个，可选）

### 步骤3：验证功能
1. 测试所有云对象功能是否正常
2. 确认前端调用已更新为云对象调用
3. 检查是否有遗漏的功能

## 删除后的效果

### 云函数数量变化
- **删除前**：约 65 个云函数
- **删除后**：约 4 个云对象
- **减少比例**：约 94%

### 释放空间
- 大幅减少云函数数量
- 解决云函数数量上限问题
- 为后续开发留出空间

### 管理效率提升
- 代码集中管理
- 减少维护成本
- 提高开发效率

## 注意事项

1. **删除前确认**：确保云对象功能完全正常
2. **分批删除**：不要一次性删除所有云函数
3. **功能测试**：每批删除后都要测试功能
4. **备份保留**：保留重要云函数的备份
5. **文档更新**：更新相关文档和说明

## 删除命令示例

```bash
# 在 HBuilderX 中右键删除云函数
# 或使用命令行删除（需要确认云函数名称）

# 删除通知系统相关云函数
# getUnreadNotificationCount
# getAdminNotifications
# markNotificationAsRead
# markAllNotificationsAsRead
# notifyAdminOnPayment

# 删除合坛法会相关云函数
# getJointProjects, addJointProject, updateJointProject, deleteJointProject
# getJointOrders, createJointOrder, updateJointOrderStatus, addJointOrderRemark
# exportJointOrders, getJointGoods, addJointGood, updateJointGood, deleteJointGood
# getJointGoodsConfig, updateJointGoodsConfig, getJointReceivers, addJointReceiver
# updateJointReceiver, deleteJointReceiver, getJointReceiverConfig, updateJointReceiverConfig
# getJointBanners, addJointBanner, updateJointBanner, deleteJointBanner
# getJointIntros, addJointIntro, updateJointIntro, deleteJointIntro

# 删除专场法会相关云函数
# getFahuiProjects, addFahuiProject, updateFahuiProject, deleteFahuiProject
# getFahuiOrders, submitFahuiOrder, updateFahuiOrderStatus, addFahuiOrderRemark
# deleteFahuiOrder, getFahuiConfigs, addFahuiConfig, updateFahuiConfig, deleteFahuiConfig
# getFahuiBanners, addFahuiBanner, updateFahuiBanner, deleteFahuiBanner
# getFahuiIntros, addFahuiIntro, updateFahuiIntro, deleteFahuiIntro
# getFahuiReceivers, addFahuiReceiver, updateFahuiReceiver, deleteFahuiReceiver
# getFahuiReceiverConfig, updateFahuiReceiverConfig, getFahuiSpecialIntro
# addFahuiSpecialIntro, updateFahuiSpecialIntro, deleteFahuiSpecialIntro

# 删除通用管理相关云函数
# getHomeBanners, addHomeBanner, updateHomeBanner, deleteHomeBanner
# getHomeNavs, addHomeNav, updateHomeNav, deleteHomeNav
# getHomeIntros, addHomeIntro, updateHomeIntro, deleteHomeIntro
# getLightItems, getHallItems, getDelegateGoods, addDelegateGood
# updateDelegateGood, deleteDelegateGood, getGongdeConfig, updateGongdeConfig
# getHallConfig, updateHallConfig, getLightConfig, updateLightConfig
# updateBannerOrder, updateIntroOrder, updateNavOrder

# 删除测试和初始化云函数
# initDatabase, initJointDatabase, checkJointDatabase
# checkJointGoodsConfig, checkJointReceiverConfig
# getJointProject, getJointReceiver

# 删除统计相关云函数（可选）
# getFahuiStats, getAdminStats
```

按照这个清单逐步删除云函数，可以安全地释放云函数空间，同时保持系统功能完整。 